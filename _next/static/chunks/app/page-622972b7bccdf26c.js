(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{1150:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(95155),a=r(12115),s=r(24437);function o(e){return{default:e&&"default"in e?e.default:e}}r(36552);let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},u=function(e){let t={...i,...e},r=(0,a.lazy)(()=>t.loader().then(o)),u=t.loading;function l(e){let o=u?(0,n.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,l=i?a.Suspense:a.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(l,{...i?{fallback:o}:{},children:d})}return l.displayName="LoadableComponent",l}},4003:(e,t,r)=>{Promise.resolve().then(r.bind(r,37322))},8567:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(17828)},17828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(64054).createAsyncLocalStorage)()},20063:(e,t,r)=>{"use strict";var n=r(47260);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},24437:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(24553)},36552:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(95155),r(47650),r(8567),r(77278)},37322:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(95155),a=r(12115),s=r(20063),o=r(47921),i=r(67909),u=r(80408);let l=(0,i.default)(()=>Promise.all([r.e(2207),r.e(1733),r.e(2619),r.e(1860)]).then(r.bind(r,81860)),{loadableGenerated:{webpack:()=>[81860]},ssr:!1});function d(){let e=(0,s.useRouter)(),{data:t,status:r}=(0,o.Tk)(),[i,d]=(0,a.useState)(!1),[c,f]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{{let t=!!window.Capacitor;d(t),t?e.replace("/mobile"):f(!1)}},[e]),(0,a.useEffect)(()=>{var n;if("authenticated"===r&&(null==t||null==(n=t.user)?void 0:n.role)&&!i){let r=(0,u.Xb)(t.user.role);e.replace(r)}},[r,t,e,i]),c||i||"authenticated"===r)?(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #fef7ee 0%, #fafaf9 100%)"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83C\uDF57"}),(0,n.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:800,color:"#ed7734",marginBottom:"0.5rem"},children:"JERK Tracker X"}),(0,n.jsx)("p",{style:{color:"#78716c",fontSize:"1.1rem"},children:"Loading..."})]})}):(0,n.jsx)(l,{})}},47921:(e,t,r)=>{"use strict";r.d(t,{CP:()=>d,Tk:()=>u,Z2:()=>i,cV:()=>l});var n=r(95155),a=r(58347),s=r(12115);let o=(0,s.createContext)({hasNextAuth:!0}),i=()=>(0,s.useContext)(o);function u(){try{let{hasNextAuth:e}=i();if(!e)return{data:null,status:"unauthenticated"};return(0,a.wV)()}catch(e){return{data:null,status:"loading"}}}function l(){let{hasNextAuth:e}=i();return async t=>{if(e)return(0,a.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function d(e){let{children:t}=e,[r,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let n=r.headers.get("content-type");if(r.ok&&(null==n?void 0:n.includes("application/json")))try{await r.json(),i(!0)}catch(e){i(!1)}else i(!1)}catch(e){i(!1)}})()},[]),(0,n.jsx)(o.Provider,{value:{hasNextAuth:r},children:r?(0,n.jsx)(a.CP,{children:t}):(0,n.jsx)(n.Fragment,{children:t})})}},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return s},createSnapshot:function(){return i}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function s(){return a?new a:new n}function o(e){return a?a.bind(e):n.bind(e)}function i(){return a?a.snapshot():function(e,...t){return e(...t)}}},67909:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var n=r(86278),a=r.n(n)},80408:(e,t,r)=>{"use strict";r.d(t,{Xb:()=>a});let n={admin:{role:"admin",displayName:"Administrator",description:"Full system access with all permissions",permissions:["orders:create","orders:read","orders:update","orders:delete","orders:assign_driver","users:create","users:read","users:update","users:delete","admin:dashboard","admin:settings","admin:reports","manager:staff","manager:analytics","locations:create","locations:read","locations:update","locations:delete","locations:manage","locations:billing","locations:analytics"],routes:["/admin","/orders","/users","/analytics","/settings","/settings/locations"],defaultRoute:"/admin"},manager:{role:"manager",displayName:"Manager",description:"Operational management with staff and analytics access",permissions:["orders:create","orders:read","orders:update","orders:assign_driver","users:read","users:update","manager:staff","manager:analytics","driver:pickup","driver:delivery","locations:create","locations:read","locations:update","locations:manage","locations:analytics"],routes:["/manager","/orders","/analytics","/staff","/settings/locations"],defaultRoute:"/manager"},driver:{role:"driver",displayName:"Driver",description:"Delivery and pickup operations",permissions:["orders:read","orders:update","driver:pickup","driver:delivery","driver:status_update"],routes:["/driver","/orders","/pickup"],defaultRoute:"/driver"},customer:{role:"customer",displayName:"Customer",description:"Order placement and tracking",permissions:["orders:create","orders:read","customer:order_history","customer:profile"],routes:["/customer","/order","/profile","/order-history"],defaultRoute:"/customer"},user:{role:"user",displayName:"User",description:"Basic user access (legacy role)",permissions:["orders:read","customer:profile"],routes:["/profile"],defaultRoute:"/"}};function a(e){return n[e].defaultRoute}},86278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(28140)._(r(1150));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,n.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[8347,8441,1255,7358],()=>e(e.s=4003)),_N_E=e.O()}]);