(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8229],{9540:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},14606:(e,r,t)=>{"use strict";t.d(r,{Cs:()=>o,Qg:()=>a,Te:()=>n,UW:()=>d,cf:()=>s});var i=t(22663);let n=e=>{i.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},a=e=>{i.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},s=e=>{(0,i.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},o=e=>i.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),d=e=>{i.Ay.dismiss(e)}},15870:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},20508:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21873:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},26617:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},40294:(e,r,t)=>{"use strict";t.d(r,{kt:()=>h,lV:()=>p,p8:()=>u});var i=t(95155);t(12115);var n=t(50625);let a=(0,n.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),s=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],a,e=>{let{$size:r}=e;switch(r){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:r,theme:t}=e;switch(r){case"white":return"color: white;";case"gray":return"color: ".concat(t.colors.secondary[600],";");default:return"color: ".concat(t.colors.primary[600],";")}}),o=n.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),d=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),l=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:r}=e;return r.borderRadius.lg}),c=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:r}=e;return r.typography.fontSize.sm},e=>{let{theme:r}=e;return r.colors.text.secondary}),h=e=>{let{size:r="md",color:t="orange",className:n=""}=e;return(0,i.jsx)(s,{$size:r,$color:t,className:n,children:(0,i.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},p=e=>{let{isLoading:r,children:t,onClick:n,type:a="button",className:s="",disabled:d=!1}=e;return(0,i.jsxs)(o,{type:a,onClick:n,disabled:r||d,className:s,children:[r&&(0,i.jsx)(h,{size:"sm",color:"white"}),(0,i.jsx)("span",{children:t})]})},u=e=>{let{isLoading:r,message:t="Loading...",children:n}=e;return(0,i.jsxs)(d,{children:[n,r&&(0,i.jsx)(l,{children:(0,i.jsxs)(c,{children:[(0,i.jsx)(h,{size:"lg"}),(0,i.jsx)("p",{children:t})]})})]})}},47921:(e,r,t)=>{"use strict";t.d(r,{CP:()=>c,Tk:()=>d,Z2:()=>o,cV:()=>l});var i=t(95155),n=t(58347),a=t(12115);let s=(0,a.createContext)({hasNextAuth:!0}),o=()=>(0,a.useContext)(s);function d(){try{let{hasNextAuth:e}=o();if(!e)return{data:null,status:"unauthenticated"};return(0,n.wV)()}catch(e){return{data:null,status:"loading"}}}function l(){let{hasNextAuth:e}=o();return async r=>{if(e)return(0,n.signOut)(r);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function c(e){let{children:r}=e,[t,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{let e=new AbortController,r=setTimeout(()=>e.abort(),3e3),t=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(r);let i=t.headers.get("content-type");if(t.ok&&(null==i?void 0:i.includes("application/json")))try{await t.json(),o(!0)}catch(e){o(!1)}else o(!1)}catch(e){o(!1)}})()},[]),(0,i.jsx)(s.Provider,{value:{hasNextAuth:t},children:t?(0,i.jsx)(n.CP,{children:r}):(0,i.jsx)(i.Fragment,{children:r})})}},54690:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},65229:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},65993:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});let i=(0,t(71847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},66039:(e,r,t)=>{Promise.resolve().then(t.bind(t,71873))},71873:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>er});var i=t(95155),n=t(12115),a=t(52619),s=t.n(a),o=t(47921),d=t(20063),l=t(50625),c=t(39903),h=t(40294),p=t(14606),u=t(22663),g=t(65993),m=t(26617),x=t(21873),f=t(54690),b=t(15870),j=t(20508),y=t(65229),v=t(9540);let w=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-0"})(["min-height:100vh;background:#fafaf9;"]),k=l.Ay.header.withConfig({componentId:"jt-app__sc-e835adb4-1"})(["background:white;border-bottom:2px solid #e7e5e4;position:sticky;top:0;z-index:50;box-shadow:0 2px 8px rgba(0,0,0,0.05);"]),A=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-2"})(["max-width:1600px;margin:0 auto;padding:0 1.5rem;display:flex;align-items:center;justify-content:space-between;height:70px;"]),C=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-3"})(["display:flex;align-items:center;gap:2rem;"]),_=(0,l.Ay)(s()).withConfig({componentId:"jt-app__sc-e835adb4-4"})(["display:flex;align-items:center;gap:0.75rem;text-decoration:none;"]),I=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-5"})(["width:44px;height:44px;background:linear-gradient(135deg,#3b82f6 0%,#1e40af 100%);border-radius:0.75rem;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:1.25rem;box-shadow:0 2px 8px rgba(59,130,246,0.3);"]),z=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-6"})(["h1{font-size:1.25rem;font-weight:700;color:#1c1917;margin:0;line-height:1.2;}p{font-size:0.75rem;color:#78716c;margin:0;line-height:1;}"]),D=l.Ay.nav.withConfig({componentId:"jt-app__sc-e835adb4-7"})(["display:none;@media (min-width:1024px){display:flex;align-items:center;gap:0.5rem;}"]),S=l.Ay.ul.withConfig({componentId:"jt-app__sc-e835adb4-8"})(["list-style:none;padding:0;margin:0;display:flex;align-items:center;gap:0.5rem;"]),O=l.Ay.li.withConfig({componentId:"jt-app__sc-e835adb4-9"})(["display:inline-flex;"]),$=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-10"})(["display:flex;align-items:center;gap:0.5rem;padding:0.625rem 1rem;border-radius:0.5rem;border:none;cursor:pointer;font-weight:500;font-size:0.9375rem;transition:all 0.2s ease;background:",";color:",";&:hover{background:",";color:",";}svg{width:18px;height:18px;}"],e=>e.$active?"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)":"transparent",e=>e.$active?"white":"#44403c",e=>e.$active?"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)":"#f5f5f4",e=>e.$active?"white":"#1c1917"),M=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-11"})(["display:flex;align-items:center;gap:0.75rem;"]),T=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-12"})(["display:flex;gap:0.5rem;align-items:center;"]),N=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-13"})(["padding:0.5rem 1rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;font-size:0.875rem;",""],e=>{let r=e.$active;switch(e.$status){case"available":return"\n          background: ".concat(r?"#10b981":"#f3f4f6",";\n          color: ").concat(r?"white":"#6b7280",";\n          &:hover { background: ").concat(r?"#059669":"#e5e7eb","; }\n        ");case"busy":return"\n          background: ".concat(r?"#f59e0b":"#f3f4f6",";\n          color: ").concat(r?"white":"#6b7280",";\n          &:hover { background: ").concat(r?"#d97706":"#e5e7eb","; }\n        ");case"offline":return"\n          background: ".concat(r?"#ef4444":"#f3f4f6",";\n          color: ").concat(r?"white":"#6b7280",";\n          &:hover { background: ").concat(r?"#dc2626":"#e5e7eb","; }\n        ")}}),E=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-14"})(["display:flex;align-items:center;gap:0.5rem;padding:0.5rem 0.875rem;border-radius:0.5rem;border:none;background:#f5f5f4;color:#1c1917;cursor:pointer;font-weight:500;transition:all 0.2s ease;&:hover{background:#e7e5e4;}"]),P=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-15"})(["display:flex;align-items:center;justify-content:center;padding:0.5rem;background:none;border:none;color:#44403c;cursor:pointer;border-radius:0.5rem;&:hover{background:#f5f5f4;}@media (min-width:1024px){display:none;}"]),L=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-16"})(["position:fixed;top:70px;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:40;display:",";@media (min-width:1024px){display:none;}"],e=>e.$isOpen?"block":"none"),U=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-17"})(["background:white;width:280px;height:100%;overflow-y:auto;padding:1.5rem;"]),W=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-18"})(["width:100%;display:flex;align-items:center;gap:0.75rem;padding:0.75rem 1rem;border:none;background:",";color:",";border-radius:0.75rem;cursor:pointer;font-weight:500;font-size:0.9375rem;margin-bottom:0.5rem;transition:all 0.2s ease;text-align:left;&:hover{background:",";color:",";}svg{width:20px;height:20px;flex-shrink:0;}"],e=>e.$active?"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)":"transparent",e=>e.$active?"white":"#44403c",e=>e.$active?"linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)":"#f5f5f4",e=>e.$active?"white":"#1c1917"),F=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-19"})(["margin-bottom:2rem;h2{font-size:1.875rem;font-weight:700;color:#1c1917;margin:0 0 0.5rem 0;}p{font-size:1rem;color:#78716c;margin:0;}"]),B=l.Ay.main.withConfig({componentId:"jt-app__sc-e835adb4-20"})(["max-width:1400px;margin:0 auto;padding:2rem 1.5rem;padding-bottom:4rem;"]),q=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-21"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem;"]),V=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-22"})(["background:white;border:1px solid #e5e7eb;border-radius:0.75rem;padding:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.05);text-align:center;h3{margin:0 0 0.5rem 0;font-size:2rem;color:#3b82f6;font-weight:700;}p{margin:0;color:#6b7280;font-weight:500;}"]),Q=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-23"})(["display:flex;gap:1rem;margin-bottom:1.5rem;align-items:center;@media (max-width:768px){flex-direction:column;}"]),R=l.Ay.input.withConfig({componentId:"jt-app__sc-e835adb4-24"})(["flex:1;padding:0.75rem 1rem;border:1px solid #e5e7eb;border-radius:0.5rem;font-size:1rem;&:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1);}"]),H=l.Ay.select.withConfig({componentId:"jt-app__sc-e835adb4-25"})(["padding:0.75rem 1rem;border:1px solid #e5e7eb;border-radius:0.5rem;font-size:1rem;background:white;cursor:pointer;&:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.1);}"]),J=l.Ay.section.withConfig({componentId:"jt-app__sc-e835adb4-26"})(["margin-bottom:2rem;background:white;border-radius:0.75rem;padding:1.5rem;border:1px solid #e7e5e4;box-shadow:0 1px 3px rgba(0,0,0,0.05);h2{font-size:1.25rem;font-weight:700;color:#1c1917;margin:0 0 1.5rem 0;padding-bottom:1rem;border-bottom:1px solid #e7e5e4;}"]),G=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-27"})(["display:grid;gap:1rem;"]),K=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-28"})(["background:#f9fafb;border:1px solid #e5e7eb;border-radius:0.75rem;padding:1.5rem;transition:all 0.2s ease;&:hover{border-color:#3b82f6;box-shadow:0 4px 12px rgba(59,130,246,0.1);}"]),Z=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-29"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;"]),Y=l.Ay.h3.withConfig({componentId:"jt-app__sc-e835adb4-30"})(["margin:0;color:#1f2937;font-size:1.1rem;"]),X=l.Ay.button.withConfig({componentId:"jt-app__sc-e835adb4-31"})(["padding:0.5rem 1rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;",""],e=>"primary"===e.$variant?"\n    background: #3b82f6;\n    color: white;\n    &:hover { background: #2563eb; }\n  ":"\n    background: #f3f4f6;\n    color: #6b7280;\n    &:hover { background: #e5e7eb; }\n  "),ee=l.Ay.div.withConfig({componentId:"jt-app__sc-e835adb4-32"})(["color:#6b7280;font-size:0.9rem;line-height:1.4;margin-bottom:1rem;"]);function er(){var e,r;let{data:t,status:a}=(0,o.Tk)(),{hasNextAuth:s}=(0,o.Z2)(),l=(0,o.cV)(),er=(0,d.useRouter)(),[et,ei]=(0,n.useState)([]),[en,ea]=(0,n.useState)(!0),[es,eo]=(0,n.useState)("offline"),[ed,el]=(0,n.useState)([]),[ec,eh]=(0,n.useState)(""),[ep,eu]=(0,n.useState)("all"),[eg,em]=(0,n.useState)("dashboard"),[ex,ef]=(0,n.useState)(!1),eb=(0,n.useCallback)(async()=>{var e;if(null==t||null==(e=t.user)?void 0:e.email)try{ea(!0);let e=await c.DynamoDBService.getAllOrders(),r=e.filter(e=>{var r,i;return e.driverName===(null==(r=t.user)?void 0:r.name)||e.customerEmail===(null==(i=t.user)?void 0:i.email)});el(r);let i=e.filter(e=>"pending"===e.status&&!e.driverName);ei(i),eo("available")}catch(e){console.error("Error loading driver data:",e)}finally{ea(!1)}},[null==t||null==(e=t.user)?void 0:e.email,null==t||null==(r=t.user)?void 0:r.name]);(0,n.useEffect)(()=>{var e;return"unauthenticated"===a?void er.push("/auth/signin"):(null==t||null==(e=t.user)?void 0:e.role)!=="driver"?void er.push("/"):void eb()},[t,a,er,eb]);let ej=async e=>{let r=(0,p.Cs)("Updating status to ".concat(e,"..."));try{var i;if(eo(e),null==t||null==(i=t.user)?void 0:i.id)if(await c.DynamoDBService.updateDriverStatus(t.user.id,e))(0,p.UW)(r),(0,p.Te)("Status updated to ".concat(e));else throw Error("Failed to update status")}catch(e){(0,p.UW)(r),(0,p.Qg)("Failed to update status"),console.error("Error updating status:",e)}},ey=async e=>{let r=(0,p.Cs)("Accepting order...");try{var i;if(await c.DynamoDBService.updateOrder(e,{driverName:(null==t||null==(i=t.user)?void 0:i.name)||"",driverCompany:"The JERK Tracker Fleet"}))(0,p.UW)(r),(0,p.Te)("Order accepted successfully!"),eb();else throw Error("Failed to accept order")}catch(e){(0,p.UW)(r),(0,p.Qg)("Failed to accept order"),console.error("Error accepting order:",e)}},ev=async e=>{let r=(0,p.Cs)("Marking as picked up...");try{if(await c.DynamoDBService.updateOrder(e,{status:"picked_up",pickedUpAt:new Date}))(0,p.UW)(r),(0,p.Te)("Pickup confirmed! Order in transit."),eb();else throw Error("Failed to update pickup status")}catch(e){(0,p.UW)(r),(0,p.Qg)("Failed to mark as picked up"),console.error("Error completing pickup:",e)}},ew=async e=>{let r=(0,p.Cs)("Marking as delivered...");try{if(await c.DynamoDBService.updateOrder(e,{status:"delivered",deliveredAt:new Date}))(0,p.UW)(r),(0,p.Te)("Delivery completed! Great job! \uD83C\uDF89"),eb();else throw Error("Failed to update delivery status")}catch(e){(0,p.UW)(r),(0,p.Qg)("Failed to mark as delivered"),console.error("Error completing delivery:",e)}},ek=async()=>{confirm("Are you sure you want to sign out?")&&await l({callbackUrl:"/"})};if("loading"===a||en)return(0,i.jsx)(w,{children:(0,i.jsx)(h.p8,{isLoading:!0,message:"Loading driver dashboard...",children:(0,i.jsx)("div",{})})});if(!(null==t?void 0:t.user)||"driver"!==t.user.role)return(0,i.jsx)(w,{children:(0,i.jsx)(h.p8,{isLoading:!0,message:"Redirecting...",children:(0,i.jsx)("div",{})})});let eA=ed.filter(e=>"pending"===e.status),eC=ed.filter(e=>"picked_up"===e.status),e_=ed.filter(e=>"delivered"===e.status&&new Date(e.deliveredAt||"").toDateString()===new Date().toDateString()),eI=ed.filter(e=>{let r=""===ec||e.customerName.toLowerCase().includes(ec.toLowerCase())||e.id.toLowerCase().includes(ec.toLowerCase()),t="all"===ep||e.status===ep;return r&&t}),ez=et.filter(e=>""===ec||e.customerName.toLowerCase().includes(ec.toLowerCase())||e.id.toLowerCase().includes(ec.toLowerCase())),eD=[{id:"dashboard",icon:(0,i.jsx)(g.A,{size:20}),label:"Dashboard"},{id:"assigned",icon:(0,i.jsx)(m.A,{size:20}),label:"My Orders"},{id:"available",icon:(0,i.jsx)(x.A,{size:20}),label:"Available Orders"},{id:"qr",icon:(0,i.jsx)(f.A,{size:20}),label:"QR Codes",href:"/qr-tracking"},{id:"settings",icon:(0,i.jsx)(b.A,{size:20}),label:"Settings",href:"/settings"}];return(0,i.jsxs)(w,{children:[(0,i.jsx)(u.l$,{}),(0,i.jsx)(L,{$isOpen:ex,onClick:()=>ef(!1),children:(0,i.jsxs)(U,{onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #e7e5e4"},children:(0,i.jsx)("h3",{style:{margin:0,fontSize:"1.125rem",fontWeight:700,color:"#1c1917"},children:"Menu"})}),eD.map(e=>(0,i.jsxs)(W,{$active:eg===e.id,onClick:()=>{e.href?er.push(e.href):em(e.id),ef(!1)},children:[e.icon,(0,i.jsx)("span",{children:e.label})]},e.id)),(0,i.jsx)("div",{style:{height:"1px",background:"#e7e5e4",margin:"1rem 0"}}),(0,i.jsxs)(W,{$active:!1,onClick:ek,style:{color:"#dc2626"},children:[(0,i.jsx)(j.A,{size:20}),(0,i.jsx)("span",{children:"Sign Out"})]})]})}),(0,i.jsx)(k,{children:(0,i.jsxs)(A,{children:[(0,i.jsxs)(C,{children:[(0,i.jsxs)(_,{href:"/",children:[(0,i.jsx)(I,{children:"JT"}),(0,i.jsxs)(z,{children:[(0,i.jsx)("h1",{children:"TheJERKTracker"}),(0,i.jsx)("p",{children:"Driver Panel"})]})]}),(0,i.jsx)(D,{children:(0,i.jsx)(S,{children:eD.map(e=>(0,i.jsx)(O,{children:(0,i.jsxs)($,{$active:eg===e.id,onClick:()=>{e.href?er.push(e.href):em(e.id)},children:[e.icon,(0,i.jsx)("span",{children:e.label})]})},e.id))})})]}),(0,i.jsxs)(M,{children:[(0,i.jsxs)(T,{children:[(0,i.jsx)(N,{$active:"available"===es,$status:"available",onClick:()=>ej("available"),children:"Available"}),(0,i.jsx)(N,{$active:"busy"===es,$status:"busy",onClick:()=>ej("busy"),children:"Busy"}),(0,i.jsx)(N,{$active:"offline"===es,$status:"offline",onClick:()=>ej("offline"),children:"Offline"})]}),(0,i.jsx)(P,{onClick:()=>ef(!ex),children:ex?(0,i.jsx)(y.A,{size:24}):(0,i.jsx)(v.A,{size:24})}),(0,i.jsxs)(E,{onClick:ek,children:[(0,i.jsx)(j.A,{size:18}),(0,i.jsx)("span",{children:t.user.name})]})]})]})}),(0,i.jsxs)(B,{children:["dashboard"===eg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(F,{children:[(0,i.jsx)("h2",{children:"Driver Dashboard"}),(0,i.jsxs)("p",{children:["Welcome back, ",t.user.name,"!"]})]}),(0,i.jsxs)(Q,{children:[(0,i.jsx)(R,{type:"text",placeholder:"Search by customer name or order ID...",value:ec,onChange:e=>eh(e.target.value)}),(0,i.jsxs)(H,{value:ep,onChange:e=>eu(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"All Orders"}),(0,i.jsx)("option",{value:"pending",children:"Pending Pickup"}),(0,i.jsx)("option",{value:"picked_up",children:"In Transit"}),(0,i.jsx)("option",{value:"delivered",children:"Delivered"})]})]}),(0,i.jsxs)(q,{children:[(0,i.jsxs)(V,{children:[(0,i.jsx)("h3",{children:eA.length}),(0,i.jsx)("p",{children:"Pending Pickups"})]}),(0,i.jsxs)(V,{children:[(0,i.jsx)("h3",{children:eC.length}),(0,i.jsx)("p",{children:"In Transit"})]}),(0,i.jsxs)(V,{children:[(0,i.jsx)("h3",{children:e_.length}),(0,i.jsx)("p",{children:"Completed Today"})]}),(0,i.jsxs)(V,{children:[(0,i.jsx)("h3",{children:et.length}),(0,i.jsx)("p",{children:"Available Orders"})]})]}),eI.filter(e=>"pending"===e.status).length>0&&(0,i.jsxs)(J,{children:[(0,i.jsxs)("h2",{children:["Pending Pickups (",eI.filter(e=>"pending"===e.status).length,")"]}),(0,i.jsx)(G,{children:eI.filter(e=>"pending"===e.status).map(e=>(0,i.jsxs)(K,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsxs)(Y,{children:["Order #",e.orderNumber]}),(0,i.jsx)(X,{$variant:"primary",onClick:()=>ev(e.id),children:"Mark Picked Up"})]}),(0,i.jsxs)(ee,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Customer:"})," ",e.customerName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Items:"})," ",e.orderDetails]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Order Time:"})," ",new Date(e.createdAt).toLocaleString()]})]})]},e.id))})]}),eI.filter(e=>"picked_up"===e.status).length>0&&(0,i.jsxs)(J,{children:[(0,i.jsxs)("h2",{children:["In Transit (",eI.filter(e=>"picked_up"===e.status).length,")"]}),(0,i.jsx)(G,{children:eI.filter(e=>"picked_up"===e.status).map(e=>(0,i.jsxs)(K,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsxs)(Y,{children:["Order #",e.orderNumber]}),(0,i.jsx)(X,{$variant:"primary",onClick:()=>ew(e.id),children:"Mark Delivered"})]}),(0,i.jsxs)(ee,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Customer:"})," ",e.customerName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Items:"})," ",e.orderDetails]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Picked up:"})," ",e.pickedUpAt?new Date(e.pickedUpAt).toLocaleString():"N/A"]})]})]},e.id))})]})]}),"assigned"===eg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(F,{children:[(0,i.jsx)("h2",{children:"My Orders"}),(0,i.jsx)("p",{children:"Orders assigned to you"})]}),(0,i.jsxs)(Q,{children:[(0,i.jsx)(R,{type:"text",placeholder:"Search by customer name or order ID...",value:ec,onChange:e=>eh(e.target.value)}),(0,i.jsxs)(H,{value:ep,onChange:e=>eu(e.target.value),children:[(0,i.jsx)("option",{value:"all",children:"All Orders"}),(0,i.jsx)("option",{value:"pending",children:"Pending Pickup"}),(0,i.jsx)("option",{value:"picked_up",children:"In Transit"}),(0,i.jsx)("option",{value:"delivered",children:"Delivered"})]})]}),eI.length>0?(0,i.jsxs)(J,{children:[(0,i.jsxs)("h2",{children:["Assigned Orders (",eI.length,")"]}),(0,i.jsx)(G,{children:eI.map(e=>(0,i.jsxs)(K,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsxs)(Y,{children:["Order #",e.orderNumber]}),"pending"===e.status&&(0,i.jsx)(X,{$variant:"primary",onClick:()=>ev(e.id),children:"Mark Picked Up"}),"picked_up"===e.status&&(0,i.jsx)(X,{$variant:"primary",onClick:()=>ew(e.id),children:"Mark Delivered"})]}),(0,i.jsxs)(ee,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Customer:"})," ",e.customerName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Items:"})," ",e.orderDetails]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Order Time:"})," ",new Date(e.createdAt).toLocaleString()]})]})]},e.id))})]}):(0,i.jsx)(J,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,i.jsx)("h3",{children:"No assigned orders"}),(0,i.jsx)("p",{children:"Check the Available Orders tab to accept new orders."})]})})]}),"available"===eg&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(F,{children:[(0,i.jsx)("h2",{children:"Available Orders"}),(0,i.jsx)("p",{children:"Accept orders to add them to your queue"})]}),(0,i.jsx)(Q,{children:(0,i.jsx)(R,{type:"text",placeholder:"Search by customer name or order ID...",value:ec,onChange:e=>eh(e.target.value)})}),"offline"===es?(0,i.jsx)(J,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,i.jsx)("h3",{children:"You are currently offline"}),(0,i.jsx)("p",{children:'Set your status to "Available" to see and accept new orders.'})]})}):ez.length>0?(0,i.jsxs)(J,{children:[(0,i.jsxs)("h2",{children:["Available Orders (",ez.length,")"]}),(0,i.jsx)(G,{children:ez.map(e=>(0,i.jsxs)(K,{children:[(0,i.jsxs)(Z,{children:[(0,i.jsxs)(Y,{children:["Order #",e.orderNumber]}),(0,i.jsx)(X,{$variant:"primary",onClick:()=>ey(e.id),children:"Accept Order"})]}),(0,i.jsxs)(ee,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Customer:"})," ",e.customerName]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Items:"})," ",e.orderDetails]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Order Time:"})," ",new Date(e.createdAt).toLocaleString()]})]})]},e.id))})]}):(0,i.jsx)(J,{children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,i.jsx)("h3",{children:"No available orders"}),(0,i.jsx)("p",{children:ec?"Try adjusting your search filters.":"Check back later for new orders."})]})})]})]})]})}}},e=>{e.O(0,[2207,7646,8347,2619,5572,9903,8441,1255,7358],()=>e(e.s=66039)),_N_E=e.O()}]);