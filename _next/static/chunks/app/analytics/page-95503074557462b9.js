(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{12305:(e,t,r)=>{Promise.resolve().then(r.bind(r,17849))},17849:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(95155),s=r(12115),o=r(47921),i=r(20063),a=r(94437),l=r(40294);function u(){var e;let{data:t,status:r}=(0,o.Tk)(),u=(0,i.useRouter)();return((0,s.useEffect)(()=>{var e,n;return"unauthenticated"===r?void u.push("/auth/signin"):(null==t||null==(e=t.user)?void 0:e.role)!=="customer"&&(null==t||null==(n=t.user)?void 0:n.role)!=="admin"?void u.push("/"):void 0},[t,r,u]),"loading"===r)?(0,n.jsx)(l.p8,{}):(null==t||null==(e=t.user)?void 0:e.id)?(0,n.jsx)(a.A,{businessId:t.user.id}):null}},20063:(e,t,r)=>{"use strict";var n=r(47260);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},40294:(e,t,r)=>{"use strict";r.d(t,{kt:()=>d,lV:()=>h,p8:()=>m});var n=r(95155);r(12115);var s=r(50625);let o=(0,s.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),i=s.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],o,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:r}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(r.colors.secondary[600],";");default:return"color: ".concat(r.colors.primary[600],";")}}),a=s.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),l=s.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),u=s.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),c=s.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),d=e=>{let{size:t="md",color:r="orange",className:s=""}=e;return(0,n.jsx)(i,{$size:t,$color:r,className:s,children:(0,n.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},h=e=>{let{isLoading:t,children:r,onClick:s,type:o="button",className:i="",disabled:l=!1}=e;return(0,n.jsxs)(a,{type:o,onClick:s,disabled:t||l,className:i,children:[t&&(0,n.jsx)(d,{size:"sm",color:"white"}),(0,n.jsx)("span",{children:r})]})},m=e=>{let{isLoading:t,message:r="Loading...",children:s}=e;return(0,n.jsxs)(l,{children:[s,t&&(0,n.jsx)(u,{children:(0,n.jsxs)(c,{children:[(0,n.jsx)(d,{size:"lg"}),(0,n.jsx)("p",{children:r})]})})]})}},47921:(e,t,r)=>{"use strict";r.d(t,{CP:()=>c,Tk:()=>l,Z2:()=>a,cV:()=>u});var n=r(95155),s=r(58347),o=r(12115);let i=(0,o.createContext)({hasNextAuth:!0}),a=()=>(0,o.useContext)(i);function l(){try{let{hasNextAuth:e}=a();if(!e)return{data:null,status:"unauthenticated"};return(0,s.wV)()}catch(e){return{data:null,status:"loading"}}}function u(){let{hasNextAuth:e}=a();return async t=>{if(e)return(0,s.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function c(e){let{children:t}=e,[r,a]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let n=r.headers.get("content-type");if(r.ok&&(null==n?void 0:n.includes("application/json")))try{await r.json(),a(!0)}catch(e){a(!1)}else a(!1)}catch(e){a(!1)}})()},[]),(0,n.jsx)(i.Provider,{value:{hasNextAuth:r},children:r?(0,n.jsx)(s.CP,{children:t}):(0,n.jsx)(n.Fragment,{children:t})})}}},e=>{e.O(0,[2207,1733,7646,8347,9903,4437,8441,1255,7358],()=>e(e.s=12305)),_N_E=e.O()}]);