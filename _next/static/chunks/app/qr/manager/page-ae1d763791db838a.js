(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5956],{6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},14606:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>d,Qg:()=>i,Te:()=>n,UW:()=>c,cf:()=>a});var o=r(22663);let n=e=>{o.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},i=e=>{o.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},a=e=>{(0,o.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},d=e=>o.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),c=e=>{o.Ay.dismiss(e)}},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},39867:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},40294:(e,t,r)=>{"use strict";r.d(t,{kt:()=>h,lV:()=>p,p8:()=>g});var o=r(95155);r(12115);var n=r(50625);let i=(0,n.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),a=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],i,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:r}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(r.colors.secondary[600],";");default:return"color: ".concat(r.colors.primary[600],";")}}),d=n.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),c=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),s=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),l=n.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),h=e=>{let{size:t="md",color:r="orange",className:n=""}=e;return(0,o.jsx)(a,{$size:t,$color:r,className:n,children:(0,o.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},p=e=>{let{isLoading:t,children:r,onClick:n,type:i="button",className:a="",disabled:c=!1}=e;return(0,o.jsxs)(d,{type:i,onClick:n,disabled:t||c,className:a,children:[t&&(0,o.jsx)(h,{size:"sm",color:"white"}),(0,o.jsx)("span",{children:r})]})},g=e=>{let{isLoading:t,message:r="Loading...",children:n}=e;return(0,o.jsxs)(c,{children:[n,t&&(0,o.jsx)(s,{children:(0,o.jsxs)(l,{children:[(0,o.jsx)(h,{size:"lg"}),(0,o.jsx)("p",{children:r})]})})]})}},47921:(e,t,r)=>{"use strict";r.d(t,{CP:()=>l,Tk:()=>c,Z2:()=>d,cV:()=>s});var o=r(95155),n=r(58347),i=r(12115);let a=(0,i.createContext)({hasNextAuth:!0}),d=()=>(0,i.useContext)(a);function c(){try{let{hasNextAuth:e}=d();if(!e)return{data:null,status:"unauthenticated"};return(0,n.wV)()}catch(e){return{data:null,status:"loading"}}}function s(){let{hasNextAuth:e}=d();return async t=>{if(e)return(0,n.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function l(e){let{children:t}=e,[r,d]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let o=r.headers.get("content-type");if(r.ok&&(null==o?void 0:o.includes("application/json")))try{await r.json(),d(!0)}catch(e){d(!1)}else d(!1)}catch(e){d(!1)}})()},[]),(0,o.jsx)(a.Provider,{value:{hasNextAuth:r},children:r?(0,o.jsx)(n.CP,{children:t}):(0,o.jsx)(o.Fragment,{children:t})})}},53865:(e,t,r)=>{Promise.resolve().then(r.bind(r,85220))},54690:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},71360:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},85220:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var o=r(95155),n=r(12115),i=r(20063),a=r(47921),d=r(50625),c=r(35626),s=r(6191),l=r(54690),h=r(39867),p=r(71360),g=r(40294),m=r(52769),u=r(14606),f=r(22663);let y=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-0"})(["min-height:100vh;background:#fafaf9;padding:2rem;"]),x=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-1"})(["max-width:1200px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 1px 3px rgba(0,0,0,0.05);border:1px solid #e7e5e4;"]),b=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-2"})(["margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #e7e5e4;display:flex;justify-content:space-between;align-items:flex-start;"]),w=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-3"})([""]),j=d.Ay.button.withConfig({componentId:"jt-app__sc-2087c8e8-4"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:#f5f5f4;border:none;border-radius:0.5rem;color:#44403c;font-weight:500;cursor:pointer;margin-bottom:1rem;transition:all 0.2s ease;&:hover{background:#e7e5e4;}svg{width:18px;height:18px;}"]),v=d.Ay.h1.withConfig({componentId:"jt-app__sc-2087c8e8-5"})(["font-size:2rem;color:#1c1917;margin:0 0 0.5rem 0;"]),k=d.Ay.p.withConfig({componentId:"jt-app__sc-2087c8e8-6"})(["color:#78716c;margin:0;"]),A=d.Ay.button.withConfig({componentId:"jt-app__sc-2087c8e8-7"})(["padding:0.75rem 1.5rem;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);color:white;border:none;border-radius:0.5rem;font-weight:600;font-size:0.9375rem;cursor:pointer;display:flex;align-items:center;gap:0.5rem;transition:all 0.2s ease;&:hover{opacity:0.9;transform:translateY(-1px);}svg{width:18px;height:18px;}"]),_=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-8"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;"]),C=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-9"})(["padding:1.5rem;background:#fafaf9;border:1px solid #e7e5e4;border-radius:0.75rem;transition:all 0.2s ease;&:hover{border-color:#ed7734;box-shadow:0 2px 8px rgba(237,119,52,0.1);}"]),I=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-10"})(["width:100%;aspect-ratio:1;background:white;border:2px solid #e7e5e4;border-radius:0.5rem;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;overflow:hidden;img{width:100%;height:100%;object-fit:contain;}svg{width:80%;height:80%;color:#1c1917;}"]),M=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-11"})(["margin-bottom:1rem;"]),Q=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-12"})(["font-weight:600;color:#1c1917;margin-bottom:0.25rem;"]),R=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-13"})(["font-size:0.875rem;color:#78716c;"]),D=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-14"})(["display:flex;gap:0.5rem;"]),z=d.Ay.button.withConfig({componentId:"jt-app__sc-2087c8e8-15"})(["flex:1;padding:0.5rem;border:1px solid #e7e5e4;background:",";color:",";border-radius:0.5rem;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s ease;&:hover{background:",";}svg{width:16px;height:16px;}"],e=>"delete"===e.$variant?"#fee2e2":"white",e=>"delete"===e.$variant?"#dc2626":"#44403c",e=>"delete"===e.$variant?"#fecaca":"#f5f5f4"),S=d.Ay.div.withConfig({componentId:"jt-app__sc-2087c8e8-16"})(["text-align:center;padding:4rem 2rem;color:#78716c;svg{width:64px;height:64px;margin:0 auto 1rem;opacity:0.3;}h3{color:#1c1917;margin-bottom:0.5rem;}"]);function T(){let e=(0,i.useRouter)(),{data:t,status:r}=(0,a.Tk)(),[d,T]=(0,n.useState)(!1),[N,q]=(0,n.useState)([]);(0,n.useEffect)(()=>{var o,n;return"unauthenticated"===r?void e.push("/auth/signin"):(null==t||null==(o=t.user)?void 0:o.role)!=="manager"&&(null==t||null==(n=t.user)?void 0:n.role)!=="admin"?void e.push("/manager"):void 0},[r,t,e]);let U=async e=>{try{return await m.toDataURL(e,{width:400,margin:2,color:{dark:"#1c1917",light:"#ffffff"}})}catch(e){throw console.error("QR generation error:",e),e}},W=async()=>{let e=(0,u.Cs)("Generating QR code...");try{var r,o;let n=Date.now().toString(),i=N.length+1,a=(null==t||null==(r=t.user)?void 0:r.businessId)||(null==t||null==(o=t.user)?void 0:o.id)||"default-business",d=JSON.stringify({type:"table",tableId:n,tableNumber:i,businessId:a,createdAt:new Date().toISOString()}),c=await U(d),s={id:n,label:"Table ".concat(i),type:"table",createdAt:new Date().toISOString(),qrDataUrl:c,data:d};q([...N,s]),(0,u.UW)(e),(0,u.Te)("QR code for Table ".concat(i," generated successfully"))}catch(t){(0,u.UW)(e),(0,u.Qg)("Failed to generate QR code"),console.error("Generate error:",t)}},$=async e=>{try{if(!e.qrDataUrl)return void(0,u.Qg)("QR code image not available");let t=document.createElement("a");t.download="".concat(e.label.replace(/\s+/g,"-").toLowerCase(),"-qr.png"),t.href=e.qrDataUrl,document.body.appendChild(t),t.click(),document.body.removeChild(t),(0,u.Te)("".concat(e.label," QR code downloaded"))}catch(e){(0,u.Qg)("Failed to download QR code"),console.error("Download error:",e)}};return"loading"===r||d?(0,o.jsx)(y,{children:(0,o.jsx)(g.p8,{isLoading:!0,message:"Loading QR codes...",children:(0,o.jsx)("div",{})})}):(0,o.jsxs)(y,{children:[(0,o.jsx)(f.l$,{}),(0,o.jsxs)(x,{children:[(0,o.jsxs)(b,{children:[(0,o.jsxs)(w,{children:[(0,o.jsxs)(j,{onClick:()=>e.push("/manager"),children:[(0,o.jsx)(c.A,{}),(0,o.jsx)("span",{children:"Back to Dashboard"})]}),(0,o.jsx)(v,{children:"QR Code Manager"}),(0,o.jsx)(k,{children:"Generate and manage QR codes for tables and locations"})]}),(0,o.jsxs)(A,{onClick:W,children:[(0,o.jsx)(s.A,{}),"Generate QR"]})]}),0===N.length?(0,o.jsxs)(S,{children:[(0,o.jsx)(l.A,{}),(0,o.jsx)("h3",{children:"No QR Codes"}),(0,o.jsx)("p",{children:"Generate your first QR code to get started"})]}):(0,o.jsx)(_,{children:N.map(e=>(0,o.jsxs)(C,{children:[(0,o.jsx)(I,{children:e.qrDataUrl?(0,o.jsx)("img",{src:e.qrDataUrl,alt:e.label}):(0,o.jsx)(l.A,{})}),(0,o.jsxs)(M,{children:[(0,o.jsx)(Q,{children:e.label}),(0,o.jsxs)(R,{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,o.jsxs)(D,{children:[(0,o.jsxs)(z,{$variant:"download",onClick:()=>$(e),children:[(0,o.jsx)(h.A,{}),"Download"]}),(0,o.jsxs)(z,{$variant:"delete",onClick:()=>{var t,r;return t=e.id,r=e.label,void(confirm("Are you sure you want to delete the QR code for ".concat(r,"?"))&&(q(e=>e.filter(e=>e.id!==t)),(0,u.Te)("".concat(r," QR code deleted"))))},children:[(0,o.jsx)(p.A,{}),"Delete"]})]})]},e.id))})]})]})}}},e=>{e.O(0,[2207,8347,5572,2769,8441,1255,7358],()=>e(e.s=53865)),_N_E=e.O()}]);