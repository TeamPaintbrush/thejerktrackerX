(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9777],{7545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ek});var n=r(95155),i=r(12115),o=r(20063),a=r(50625),c=r(1733),d=r(12834),s=r(26617),l=r(26983),p=r(42529),h=r(89559),u=r(57828),m=r(17181),g=r(39867),f=r(54690),y=r(95664),x=r(65229),b=r(32587),w=r(15824),v=r(68974),j=r(55102);let A=(0,b.F3)("Filesystem",{web:()=>r.e(2282).then(r.bind(r,32282)).then(e=>new e.FilesystemWeb)});!function(e=!1){var t,r;typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||e?void 0!==window.cordova&&((t=window).CapacitorUtils.Synapse=new Proxy({},{get:(e,r)=>t.cordova.plugins[r]})):(r=window).CapacitorUtils.Synapse=new Proxy({},{get:(e,t)=>new Proxy({},{get:(e,n)=>(e,i,o)=>{let a=r.Capacitor.Plugins[t];return void 0===a?void o(Error(`Capacitor plugin ${t} not found`)):"function"!=typeof a[n]?void o(Error(`Method ${n} not found in Capacitor plugin ${t}`)):void(async()=>{try{let t=await a[n](e);i(t)}catch(e){o(e)}})()}})}))}();var _=r(24995),k=r(50470),C=r(91750),I=r(97936);let S=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-0"})(["padding:0.5rem;padding-bottom:120px;min-height:100vh;background:linear-gradient(135deg,#fef7ee 0%,#fafaf9 100%);"]),P=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-1"})(["margin-top:0.5rem;margin-bottom:2rem;text-align:center;"]),R=a.Ay.h1.withConfig({componentId:"jt-app__sc-12e5242e-2"})(["font-size:1.5rem;font-weight:700;color:#1f2937;margin:0 0 0.5rem 0;"]),D=a.Ay.p.withConfig({componentId:"jt-app__sc-12e5242e-3"})(["font-size:1rem;color:#6b7280;margin:0;"]),N=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-4"})(["display:flex;background:white;border-radius:12px;padding:4px;margin-bottom:2rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);"]),E=a.Ay.button.withConfig({componentId:"jt-app__sc-12e5242e-5"})(["flex:1;padding:0.75rem;border:none;border-radius:8px;font-size:0.875rem;font-weight:600;cursor:pointer;transition:all 0.2s;background:",";color:",";&:active{transform:scale(0.98);}"],e=>e.$active?"#ed7734":"transparent",e=>e.$active?"white":"#6b7280"),O=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-6"})(["background:white;border-radius:12px;padding:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid rgba(237,119,52,0.1);margin-bottom:1rem;"]);a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-7"})(["text-align:center;margin-bottom:2rem;"]),a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-8"})(["width:200px;height:200px;border:2px solid #e5e7eb;border-radius:12px;margin:0 auto 1rem auto;background:#f9fafb;display:flex;align-items:center;justify-content:center;svg{width:150px;height:150px;color:#6b7280;}"]),a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-9"})(["font-size:0.875rem;color:#6b7280;margin-bottom:1.5rem;"]),a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-10"})(["display:grid;grid-template-columns:repeat(2,1fr);gap:0.75rem;margin-bottom:2rem;"]),(0,a.Ay)(c.P.button).withConfig({componentId:"jt-app__sc-12e5242e-11"})(["background:rgba(237,119,52,0.1);border:1px solid rgba(237,119,52,0.2);border-radius:8px;padding:1rem;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:0.5rem;svg{width:24px;height:24px;color:#ed7734;}span{font-size:0.875rem;font-weight:600;color:#1f2937;}&:active{transform:scale(0.98);}"]);let z=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-12"})(["text-align:center;"]),L=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-13"})(["width:250px;height:250px;border:2px dashed #ed7734;border-radius:12px;margin:0 auto 1rem auto;background:rgba(237,119,52,0.05);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;svg{width:60px;height:60px;color:#ed7734;}"]),M=(0,a.Ay)(c.P.button).withConfig({componentId:"jt-app__sc-12e5242e-14"})(["background:#ed7734;color:white;border:none;border-radius:8px;padding:1rem 2rem;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:0.5rem;margin:0 auto;svg{width:20px;height:20px;}"]),U=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-15"})(["margin-top:2rem;"]),Q=a.Ay.h3.withConfig({componentId:"jt-app__sc-12e5242e-16"})(["font-size:1rem;font-weight:600;color:#1f2937;margin:0 0 1rem 0;"]),T=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-17"})(["display:flex;align-items:center;gap:1rem;padding:0.75rem;border-bottom:1px solid #e5e7eb;&:last-child{border-bottom:none;}"]),q=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-18"})(["width:40px;height:40px;border-radius:8px;background:rgba(237,119,52,0.1);display:flex;align-items:center;justify-content:center;svg{width:20px;height:20px;color:#ed7734;}"]),$=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-19"})(["flex:1;"]),B=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-20"})(["font-size:0.875rem;font-weight:600;color:#1f2937;margin-bottom:0.25rem;"]),F=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-21"})(["font-size:0.75rem;color:#6b7280;"]),H=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-22"})(["display:grid;grid-template-columns:repeat(3,1fr);gap:0.75rem;margin-bottom:1.5rem;"]),J=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-23"})(["background:white;border-radius:8px;padding:1rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid rgba(237,119,52,0.1);text-align:center;"]),V=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-24"})(["width:32px;height:32px;border-radius:6px;margin:0 auto 0.5rem auto;display:flex;align-items:center;justify-content:center;background:",";svg{width:18px;height:18px;color:",";}"],e=>{switch(e.$color){case"primary":return"rgba(237, 119, 52, 0.1)";case"secondary":return"rgba(59, 130, 246, 0.1)";case"success":return"rgba(16, 185, 129, 0.1)";default:return"rgba(156, 163, 175, 0.1)"}},e=>{switch(e.$color){case"primary":return"#ed7734";case"secondary":return"#3b82f6";case"success":return"#10b981";default:return"#9ca3af"}}),Y=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-25"})(["font-size:1.125rem;font-weight:700;color:#1f2937;margin-bottom:0.25rem;"]),X=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-26"})(["font-size:0.75rem;color:#6b7280;"]),G=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-27"})(["display:grid;grid-template-columns:1fr;gap:0.75rem;"]),W=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-28"})(["background:white;border-radius:8px;padding:1rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid rgba(237,119,52,0.1);"]),K=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-29"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:0.75rem;"]),Z=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-30"})(["flex:1;"]),ee=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-31"})(["font-size:0.875rem;font-weight:600;color:#1f2937;margin-bottom:0.25rem;"]),et=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-32"})(["font-size:0.75rem;color:#6b7280;"]),er=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-33"})(["padding:0.25rem 0.5rem;border-radius:12px;font-size:0.75rem;font-weight:500;text-transform:capitalize;",""],e=>{switch(e.$status){case"pending":return"background: #fef3c7; color: #d97706;";case"preparing":return"background: #dbeafe; color: #2563eb;";case"ready":case"completed":return"background: #dcfce7; color: #16a34a;";case"cancelled":return"background: #fee2e2; color: #dc2626;";default:return"background: #f3f4f6; color: #6b7280;"}}),en=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-34"})(["display:flex;justify-content:center;margin:0.75rem 0;padding:0.75rem;background:#f9fafb;border-radius:6px;"]),ei=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-35"})(["width:80px;height:80px;border:1px solid #e5e7eb;border-radius:6px;display:flex;align-items:center;justify-content:center;background:white;padding:4px;svg{width:100%;height:100%;}"]),eo=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-36"})(["display:flex;gap:0.5rem;"]),ea=a.Ay.button.withConfig({componentId:"jt-app__sc-12e5242e-37"})(["flex:1;padding:0.5rem;border:1px solid #ed7734;border-radius:6px;background:",";color:",";font-size:0.75rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.25rem;transition:all 0.2s;svg{width:14px;height:14px;}&:hover{background:",";color:white;}&:active{transform:scale(0.98);}"],e=>e.$primary?"#ed7734":"white",e=>e.$primary?"white":"#ed7734",e=>e.$primary?"#dc6627":"#ed7734"),ec=a.Ay.button.withConfig({componentId:"jt-app__sc-12e5242e-38"})(["background:rgba(237,119,52,0.1);border:1px solid rgba(237,119,52,0.2);border-radius:8px;padding:0.75rem 1rem;color:#ed7734;font-size:0.875rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:0.5rem;transition:all 0.2s;svg{width:16px;height:16px;}&:active{transform:scale(0.98);}"]),ed=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-39"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:white;z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;"]),es=a.Ay.button.withConfig({componentId:"jt-app__sc-12e5242e-40"})(["position:absolute;top:1rem;right:1rem;background:rgba(0,0,0,0.2);border:none;border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#1f2937;z-index:10;touch-action:manipulation;svg{width:24px;height:24px;}&:active{transform:scale(0.95);background:rgba(0,0,0,0.3);}"]),el=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-41"})(["width:300px;height:300px;background:white;border:2px solid #e5e7eb;border-radius:16px;display:flex;align-items:center;justify-content:center;margin-bottom:2rem;box-shadow:0 4px 6px rgba(0,0,0,0.1);padding:1rem;svg{width:100%;height:100%;}"]),ep=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-42"})(["text-align:center;margin-bottom:2rem;"]),eh=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-43"})(["font-size:1.5rem;font-weight:700;color:#1f2937;margin-bottom:0.5rem;"]),eu=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-44"})(["font-size:1rem;color:#6b7280;"]),em=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-45"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:9998;display:flex;align-items:center;justify-content:center;padding:2rem;"]),eg=(0,a.Ay)(c.P.div).withConfig({componentId:"jt-app__sc-12e5242e-46"})(["background:white;border-radius:16px;padding:2rem;max-width:400px;width:100%;box-shadow:0 20px 25px -5px rgba(0,0,0,0.1);"]),ef=a.Ay.h3.withConfig({componentId:"jt-app__sc-12e5242e-47"})(["font-size:1.25rem;font-weight:700;color:#1f2937;margin:0 0 0.5rem 0;"]),ey=a.Ay.p.withConfig({componentId:"jt-app__sc-12e5242e-48"})(["font-size:0.875rem;color:#6b7280;margin:0 0 1.5rem 0;"]),ex=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-49"})(["margin-bottom:1rem;"]),eb=a.Ay.label.withConfig({componentId:"jt-app__sc-12e5242e-50"})(["display:block;font-size:0.875rem;font-weight:600;color:#374151;margin-bottom:0.5rem;"]),ew=a.Ay.input.withConfig({componentId:"jt-app__sc-12e5242e-51"})(["width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;color:#1f2937;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}"]),ev=a.Ay.select.withConfig({componentId:"jt-app__sc-12e5242e-52"})(["width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;color:#1f2937;background:white;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}"]),ej=a.Ay.div.withConfig({componentId:"jt-app__sc-12e5242e-53"})(["display:flex;gap:0.75rem;margin-top:1.5rem;"]),eA=a.Ay.button.withConfig({componentId:"jt-app__sc-12e5242e-54"})(["flex:1;padding:0.75rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s;",""],e=>"primary"===e.$variant?"\n    background: #ed7734;\n    color: white;\n    border: none;\n    \n    &:active {\n      background: #dc6627;\n    }\n  ":"\n    background: white;\n    color: #6b7280;\n    border: 1px solid #d1d5db;\n    \n    &:active {\n      background: #f3f4f6;\n    }\n  ");function e_(){(0,o.useRouter)();let e=(0,o.useSearchParams)(),{user:t}=function(){let[e,t]=i.useState(null);return i.useEffect(()=>{try{let e=localStorage.getItem("mobile_auth_user");e&&t(JSON.parse(e))}catch(e){console.log("Auth check error:",e)}},[]),{user:e}}(),a=e.get("tab"),[c,e_]=(0,i.useState)("orders"===a?"orders":"scan"),[ek,eC]=(0,i.useState)([]),[eI,eS]=(0,i.useState)(!1),[eP,eR]=(0,i.useState)([]),[eD,eN]=(0,i.useState)(null),[eE,eO]=(0,i.useState)(!1),[ez,eL]=(0,i.useState)(null),[eM,eU]=(0,i.useState)(""),[eQ,eT]=(0,i.useState)("");(0,i.useEffect)(()=>{eB(),eq()},[]);let eq=()=>{try{let e=localStorage.getItem("qr_scan_history");if(e){let t=JSON.parse(e);eR(t.slice(0,10))}}catch(e){console.error("Error loading scan history:",e)}},e$=(e,t,r)=>{try{let n=[{id:"".concat(Date.now(),"-").concat(Math.random()),orderId:e,orderNumber:t,type:r,timestamp:Date.now()},...eP].slice(0,10);eR(n),localStorage.setItem("qr_scan_history",JSON.stringify(n))}catch(e){console.error("Error saving scan history:",e)}},eB=async()=>{eS(!0);try{let e="https://thejerktracker0.vercel.app";console.log("\uD83D\uDCE1 Fetching orders from:","".concat(e,"/api/orders/"));let t=await fetch("".concat(e,"/api/orders/"),{method:"GET",headers:{Accept:"application/json"}});if(console.log("\uD83D\uDCE1 Response status:",t.status),!t.ok){let e=await t.text();throw console.error("API Error Response:",e),Error("API returned ".concat(t.status,": ").concat(e))}let r=await t.json();console.log("\uD83D\uDCE6 Received orders:",r.length);let n=r.map(e=>{var t;return{id:e.id,orderNumber:e.orderNumber,status:e.status,createdAt:e.createdAt,total:0,qrCodeId:(null==(t=e.location)?void 0:t.qrCodeId)||"qr-".concat(e.id)}});eC(n),console.log("✅ Loaded ".concat(n.length," orders from Vercel API successfully"))}catch(t){console.error("❌ Failed to load orders from API:",t);let e=t instanceof Error?t.message:"Unknown error";console.error("Error details:",e),alert("⚠️ Could not load orders from API\n\n".concat(e,"\n\nUsing demo data instead.")),eC([{id:"order_001",orderNumber:"ORD-2025-001",status:"ready",createdAt:new Date(Date.now()-18e5),total:24.99},{id:"order_002",orderNumber:"ORD-2025-002",status:"picked-up",createdAt:new Date(Date.now()-9e5),total:18.5},{id:"order_003",orderNumber:"ORD-2025-003",status:"preparing",createdAt:new Date(Date.now()-3e5),total:31.25}])}finally{eS(!1)}},eF=async()=>{try{if(!C.A.isSupported())return void alert("⚠️ QR scanning is only available inside the Android app.");b.Ii.isNativePlatform()&&await _.dn.impact({style:_.kn.Light});let e=await C.A.startScan();if(!(null==e?void 0:e.text)){await _.dn.impact({style:_.kn.Light}),alert("⚠️ Scan cancelled or no QR code detected.");return}b.Ii.isNativePlatform()&&await _.dn.impact({style:_.kn.Medium});try{let t=JSON.parse(e.text);t.orderId&&"pickup_verification"===t.type?ek.find(e=>e.id===t.orderId)?(e$(t.orderId,t.orderNumber,"scan"),eL(t),eO(!0)):alert("⚠️ Order not found\n\nOrder #".concat(t.orderNumber,"\n\nThis order may not be in your current list.")):alert("⚠️ Invalid QR Code\n\nThis QR code is not a valid pickup verification code.")}catch(e){alert("⚠️ Invalid QR Code Format\n\nPlease scan a valid order QR code.")}}catch(t){console.error("Scan error:",t);let e=t instanceof Error?t.message:"Unknown error";e.includes("cancelled")||alert("❌ Scanner Error\n\n".concat(e,"\n\nPlease try again."))}},eH=async()=>{if(!eM.trim()||!eQ.trim())return void alert("⚠️ Missing Information\n\nPlease enter both driver name and delivery company.");try{b.Ii.isNativePlatform()&&await _.dn.impact({style:_.kn.Medium}),await w.I.updateOrder(ez.orderId,{status:"picked_up",driverName:eM.trim(),driverCompany:eQ.trim(),pickedUpAt:new Date}),console.log("\uD83D\uDCF1 Order #".concat(ez.orderNumber," picked up by ").concat(eM," (").concat(eQ,")")),eO(!1),eL(null),eU(""),eT(""),await eB(),alert("✅ Pickup Confirmed\n\nOrder #".concat(ez.orderNumber,"\nDriver: ").concat(eM,"\nCompany: ").concat(eQ,"\n\nRestaurant has been notified."))}catch(e){console.error("Error updating order:",e),alert("❌ Failed to update order\n\nPlease try again.")}},eJ=async e=>{try{let t=ek.find(t=>t.id===e),r=(0,I.v7)(e);b.Ii.isNativePlatform()?(await v.S.share({title:"Order #".concat((null==t?void 0:t.orderNumber)||e),text:"Confirm pickup here: ".concat(r),url:r,dialogTitle:"Share Driver Pickup QR"}),e$(e,(null==t?void 0:t.orderNumber)||e,"share")):navigator.share?(await navigator.share({title:"Order #".concat((null==t?void 0:t.orderNumber)||e),text:"Confirm pickup here: ".concat(r),url:r}),b.Ii.isNativePlatform()&&await _.dn.impact({style:_.kn.Light}),e$(e,(null==t?void 0:t.orderNumber)||e,"share")):(await navigator.clipboard.writeText(r),e$(e,(null==t?void 0:t.orderNumber)||e,"share"),alert("✅ Pickup link copied to clipboard!"))}catch(e){console.error("Share error:",e)}},eV=async e=>{try{let t=ek.find(t=>t.id===e),n=await r.e(2769).then(r.t.bind(r,52769,19)),i=(0,I.v7)(e),o=await n.toDataURL(i,{width:512,margin:2,errorCorrectionLevel:"H",color:{dark:"#ed7734",light:"#ffffff"}});if(b.Ii.isNativePlatform()){let r=o.split(",")[1],n="QR-".concat((null==t?void 0:t.orderNumber)||e,"-").concat(Date.now(),".png");await A.writeFile({path:n,data:r,directory:j.__.Documents}),await _.dn.impact({style:_.kn.Medium}),e$(e,(null==t?void 0:t.orderNumber)||e,"download"),alert("✅ QR Code saved to Photos!\n\nOrder: #".concat((null==t?void 0:t.orderNumber)||e))}else{let r=document.createElement("a");r.download="QR-".concat((null==t?void 0:t.orderNumber)||e,".png"),r.href=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),e$(e,(null==t?void 0:t.orderNumber)||e,"download"),alert("✅ QR code downloaded successfully!")}}catch(e){console.error("Download error:",e),alert("❌ Failed to save QR code. Please try again.")}},eY=async e=>{try{b.Ii.isNativePlatform()&&await _.dn.impact({style:_.kn.Light});let t=ek.find(t=>t.id===e);if(!t)return void alert("❌ Order not found");e$(e,t.orderNumber,"view"),eN(t)}catch(e){console.error("View error:",e),alert("❌ Could not open QR code view\n\nPlease try again.")}};return(0,n.jsxs)(S,{children:[(0,n.jsx)(k.default,{href:"/mobile/dashboard",label:"Dashboard"}),(0,n.jsxs)(P,{children:[(0,n.jsx)(R,{children:"QR Code Manager"}),(0,n.jsx)(D,{children:"Generate and scan QR codes for orders"})]}),(0,n.jsxs)(N,{children:[(0,n.jsx)(E,{$active:"orders"===c,onClick:()=>e_("orders"),children:"Order QRs"}),(0,n.jsx)(E,{$active:"scan"===c,onClick:()=>e_("scan"),children:"Scan"})]}),(0,n.jsx)(O,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},children:"orders"===c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(H,{children:[(0,n.jsxs)(J,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,n.jsx)(V,{$color:"primary",children:(0,n.jsx)(s.A,{})}),(0,n.jsx)(Y,{children:ek.length}),(0,n.jsx)(X,{children:"Total"})]}),(0,n.jsxs)(J,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,n.jsx)(V,{$color:"secondary",children:(0,n.jsx)(l.A,{})}),(0,n.jsx)(Y,{children:ek.filter(e=>["pending","preparing"].includes(e.status)).length}),(0,n.jsx)(X,{children:"Active"})]}),(0,n.jsxs)(J,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,n.jsx)(V,{$color:"success",children:(0,n.jsx)(p.A,{})}),(0,n.jsx)(Y,{children:ek.filter(e=>"ready"===e.status).length}),(0,n.jsx)(X,{children:"Ready"})]})]}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:(0,n.jsxs)(ec,{onClick:()=>{console.log("Refreshing orders..."),eB()},children:[(0,n.jsx)(h.A,{}),"Refresh Orders"]})}),ek.length>0?(0,n.jsx)(G,{children:ek.map((e,t)=>(0,n.jsxs)(W,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[(0,n.jsxs)(K,{children:[(0,n.jsxs)(Z,{children:[(0,n.jsxs)(ee,{children:["#",e.orderNumber]}),(0,n.jsx)(et,{children:e.createdAt.toLocaleString()}),(0,n.jsxs)(et,{children:["Total: $",e.total]})]}),(0,n.jsx)(er,{$status:e.status,children:e.status})]}),(0,n.jsx)(en,{children:(0,n.jsx)(ei,{children:(0,n.jsx)(d.h,{value:(0,I.v7)(e.id),size:72,level:"H",includeMargin:!1})})}),(0,n.jsxs)(eo,{children:[(0,n.jsxs)(ea,{$primary:!0,onClick:()=>eY(e.id),children:[(0,n.jsx)(u.A,{}),"View QR"]}),(0,n.jsxs)(ea,{onClick:()=>eJ(e.id),children:[(0,n.jsx)(m.A,{}),"Share"]}),(0,n.jsxs)(ea,{onClick:()=>eV(e.id),children:[(0,n.jsx)(g.A,{}),"Save"]})]})]},e.id))}):(0,n.jsxs)("div",{style:{textAlign:"center",padding:"2rem 0",color:"#6b7280"},children:[(0,n.jsx)(f.A,{size:48,style:{margin:"0 auto 1rem auto",color:"#d1d5db"}}),(0,n.jsx)("div",{style:{fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem",color:"#374151"},children:"No Orders Found"}),(0,n.jsx)("div",{style:{fontSize:"0.875rem"},children:"Orders with QR codes will appear here"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(z,{children:[(0,n.jsxs)(L,{children:[(0,n.jsx)(y.A,{}),(0,n.jsxs)("div",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:["Position QR code within frame",(0,n.jsx)("br",{}),"Camera will activate automatically"]})]}),(0,n.jsxs)(M,{whileTap:{scale:.95},onClick:eF,children:[(0,n.jsx)(y.A,{}),"Start Scanner"]})]}),(0,n.jsxs)(U,{children:[(0,n.jsx)(Q,{children:"Recent Activity"}),0===eP.length?(0,n.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,n.jsx)(f.A,{style:{margin:"0 auto 0.5rem",opacity:.3}}),(0,n.jsx)("div",{style:{fontSize:"0.875rem"},children:"No recent activity"})]}):eP.map(e=>(0,n.jsxs)(T,{children:[(0,n.jsx)(q,{children:(()=>{switch(e.type){case"view":return(0,n.jsx)(u.A,{});case"share":return(0,n.jsx)(m.A,{});case"download":return(0,n.jsx)(g.A,{});default:return(0,n.jsx)(f.A,{})}})()}),(0,n.jsxs)($,{children:[(0,n.jsxs)(B,{children:[(()=>{switch(e.type){case"view":return"Viewed";case"share":return"Shared";case"download":return"Downloaded";case"scan":return"Scanned";default:return"Accessed"}})()," Order #",e.orderNumber]}),(0,n.jsx)(F,{children:(e=>{let t=Math.floor((Date.now()-e)/1e3);return t<60?"Just now":t<3600?"".concat(Math.floor(t/60)," min ago"):t<86400?"".concat(Math.floor(t/3600)," hr ago"):"".concat(Math.floor(t/86400)," days ago")})(e.timestamp)})]})]},e.id))]})]})},c),eD&&(0,n.jsxs)(ed,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[(0,n.jsx)(es,{onClick:()=>eN(null),children:(0,n.jsx)(x.A,{})}),(0,n.jsxs)(ep,{children:[(0,n.jsxs)(eh,{children:["Order #",eD.orderNumber]}),(0,n.jsxs)(eu,{children:["Status: ",eD.status]})]}),(0,n.jsx)(el,{children:(0,n.jsx)(d.h,{value:(0,I.v7)(eD.id),size:268,level:"H",includeMargin:!1})}),(0,n.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Show this QR code to the driver for scanning"})]}),eE&&ez&&(0,n.jsx)(em,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{eO(!1),eL(null),eU(""),eT("")},children:(0,n.jsxs)(eg,{initial:{scale:.9,y:20},animate:{scale:1,y:0},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(ef,{children:"Order Pickup Confirmation"}),(0,n.jsxs)(ey,{children:["Order #",ez.orderNumber]}),(0,n.jsxs)(ex,{children:[(0,n.jsx)(eb,{children:"Driver Name"}),(0,n.jsx)(ew,{type:"text",placeholder:"Enter driver's name",value:eM,onChange:e=>eU(e.target.value),autoFocus:!0})]}),(0,n.jsxs)(ex,{children:[(0,n.jsx)(eb,{children:"Delivery Company"}),(0,n.jsxs)(ev,{value:eQ,onChange:e=>eT(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Select delivery company"}),(0,n.jsx)("option",{value:"DoorDash",children:"DoorDash"}),(0,n.jsx)("option",{value:"Uber Eats",children:"Uber Eats"}),(0,n.jsx)("option",{value:"GrubHub",children:"GrubHub"}),(0,n.jsx)("option",{value:"Postmates",children:"Postmates"}),(0,n.jsx)("option",{value:"Independent",children:"Independent"}),(0,n.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,n.jsxs)(ej,{children:[(0,n.jsx)(eA,{$variant:"secondary",onClick:()=>{eO(!1),eL(null),eU(""),eT("")},children:"Cancel"}),(0,n.jsx)(eA,{$variant:"primary",onClick:eH,children:"Confirm Pickup"})]})]})})]})}function ek(){return(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(e_,{})})}},15824:(e,t,r)=>{"use strict";r.d(t,{I:()=>g});var n=r(39903);let i="https://rqbyr7htb1.execute-api.us-east-1.amazonaws.com/prod".trim().replace(/\/$/,""),o="w15QRuSday4YHbK0FH3zc77mzY3nikKX6qEY2xZS",a="pSq4vhYdRnB7OUCkfQlo9M3z6rJEaD2F",c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={"Content-Type":"application/json"};return o&&(r["x-api-key"]=o),t&&a&&(r["X-Location-Admin-Key"]=a),{...r,...(e=>{if(!e)return{};if(e instanceof Headers){let t={};return e.forEach((e,r)=>{t[r]=e}),t}return Array.isArray(e)?e.reduce((e,t)=>{let[r,n]=t;return e[r]=n,e},{}):{...e}})(e)}};async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=await fetch(e.startsWith("http")?e:i?"".concat(i).concat(e):e,{...t,headers:c(t.headers,r)});if(!n.ok)throw Error(await n.text().catch(()=>n.statusText)||"Request failed with status ".concat(n.status));if(204!==n.status)return n.json()}let s=e=>{if(e)return e instanceof Date?e:new Date(e)},l=e=>{var t;return{...e,createdAt:null!=(t=s(e.createdAt))?t:new Date,pickedUpAt:s(e.pickedUpAt),deliveredAt:s(e.deliveredAt)}},p=e=>{var t,r,n,i;return{...e,createdAt:null!=(n=s(e.createdAt))?n:new Date,updatedAt:s(e.updatedAt),billing:{...e.billing,activatedAt:s(null==(t=e.billing)?void 0:t.activatedAt),deactivatedAt:s(null==(r=e.billing)?void 0:r.deactivatedAt)},qrCodes:e.qrCodes?{...e.qrCodes,generated:null!=(i=s(e.qrCodes.generated))?i:new Date,lastUsed:s(e.qrCodes.lastUsed)}:e.qrCodes,verification:e.verification?{...e.verification,verifiedAt:s(e.verification.verifiedAt)}:e.verification}},h=e=>{var t;return{...e,createdAt:null!=(t=s(e.createdAt))?t:new Date,updatedAt:s(e.updatedAt)}};async function u(e,t){return l(await d("/api/orders/".concat(e),{method:"PATCH",body:JSON.stringify(t)}))}async function m(e,t){let r={status:t};return"picked_up"===t&&(r.pickedUpAt=new Date),"delivered"===t&&(r.deliveredAt=new Date),u(e,r)}let g={getAllOrders:async function(){return(await d("/api/orders/")).map(l)},getOrderById:async function(e){let t=await d("/api/orders/".concat(e));return t?l(t):null},createOrder:async function(e){if(i)try{let t=await d("/api/orders",{method:"POST",body:JSON.stringify(e)});return l(t)}catch(e){console.warn("Lambda API failed, falling back to direct DynamoDB:",e)}return console.log("\uD83D\uDCE1 Using direct DynamoDB for order creation"),await n.DynamoDBService.createOrder(e)},updateOrder:u,updateOrderStatus:m,getLocationsByBusinessId:async function(e){if(i)try{return((await d("/api/locations?businessId=".concat(encodeURIComponent(e)))).locations||[]).map(p)}catch(e){console.warn("Lambda API failed, falling back to direct DynamoDB:",e)}return console.log("\uD83D\uDCE1 Using direct DynamoDB for location fetching"),await n.DynamoDBService.getLocationsByBusinessId(e)},createLocation:async function(e){let t=await d("/api/locations",{method:"POST",body:JSON.stringify(e)},!0);return t.location?p(t.location):null},updateLocation:async function(e,t){return await d("/api/locations/".concat(e),{method:"PUT",body:JSON.stringify(t)},!0),!0},deleteLocation:async function(e){return await d("/api/locations/".concat(e),{method:"DELETE"},!0),!0},getMenuItems:async function(e,t,r){if(i)try{let n=new URLSearchParams({businessId:e});return t&&n.set("locationId",t),r&&n.set("search",r),((await d("/api/mobile/menu?".concat(n.toString()))).menuItems||[]).map(h)}catch(e){console.warn("Lambda API failed, falling back to direct DynamoDB:",e)}console.log("\uD83D\uDCE1 Using direct DynamoDB for menu fetching");let o=await n.DynamoDBService.getMenuItems(e);if(t&&(o=o.filter(e=>e.locationId===t)),r){let e=r.toLowerCase();o=o.filter(t=>{var r;return t.name.toLowerCase().includes(e)||(null==(r=t.description)?void 0:r.toLowerCase().includes(e))})}return o.map(h)}}},17181:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},26617:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},26983:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},39867:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},42529:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},50470:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(95155);r(12115);var i=r(20063),o=r(50625),a=r(35626);let c=o.Ay.button.withConfig({componentId:"jt-app__sc-95ba5970-0"})(["display:flex;align-items:center;gap:0.5rem;background:white;border:1px solid #e5e7eb;border-radius:0.75rem;padding:0.75rem 1rem;color:#374151;font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s ease;min-width:44px;min-height:44px;box-shadow:0 2px 4px rgba(0,0,0,0.05);&:hover{background:#f9fafb;border-color:#d1d5db;transform:translateY(-1px);box-shadow:0 4px 8px rgba(0,0,0,0.1);}&:active{transform:translateY(0);background:#f3f4f6;}@media (min-width:769px){display:none;}"]),d=(0,o.Ay)(a.A).withConfig({componentId:"jt-app__sc-95ba5970-1"})(["width:18px;height:18px;"]);function s(e){let{label:t="Back",href:r,className:o,onClick:a}=e,s=(0,i.useRouter)();return(0,n.jsxs)(c,{onClick:()=>{a?a():r?s.push(r):s.back()},className:o,children:[(0,n.jsx)(d,{}),t]})}(0,o.Ay)(s).withConfig({componentId:"jt-app__sc-95ba5970-2"})(["position:fixed;top:calc(env(safe-area-inset-top) + 1rem);left:1rem;z-index:100;background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);border:1px solid rgba(229,231,235,0.8);"]),(0,o.Ay)(s).withConfig({componentId:"jt-app__sc-95ba5970-3"})(["margin-bottom:1rem;"])},54690:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},55102:(e,t,r)=>{"use strict";var n,i;r.d(t,{Wi:()=>i,__:()=>n}),function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Library="LIBRARY",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE",e.ExternalCache="EXTERNAL_CACHE",e.LibraryNoCloud="LIBRARY_NO_CLOUD",e.Temporary="TEMPORARY"}(n||(n={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(i||(i={}))},57828:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},89158:(e,t,r)=>{Promise.resolve().then(r.bind(r,7545))},89559:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},91750:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(32587),i=r(39226),o=r(71223),a=r(47480);class c{isSupported(){return n.Ii.isNativePlatform()}async requestPermission(){if(!this.isSupported())return console.log("QR Scanner not supported on this platform"),!1;try{let e=await o.Camera.requestPermissions({permissions:["camera"]}),t="granted"===e.camera||"limited"===e.camera;return this.hasPermission=t,t}catch(e){return console.error("Error requesting camera permission:",e),!1}}async startScan(){if(!this.isSupported())return console.log("QR Scanner not supported"),null;if(!this.hasPermission&&!await this.requestPermission())return console.log("Camera permission not granted"),null;if(this.isScanning)return console.log("Already scanning"),null;try{this.isScanning=!0;let t=await a.zT.scanBarcode({hint:a.Gm.QR_CODE,scanInstructions:"Align QR code within the frame",scanButton:!0,scanText:"Cancel"});if(this.isScanning=!1,null==t?void 0:t.ScanResult){var e;return{text:t.ScanResult,format:String(null!=(e=t.format)?e:"QR_CODE")}}return null}catch(e){return console.error("Error scanning QR code:",e),this.isScanning=!1,null}}async stopScan(){if(this.isScanning)try{this.isScanning=!1}catch(e){console.error("Error stopping scan:",e)}}isCurrentlyScanning(){return this.isScanning}hideAppContent(){}showAppContent(){}parseOrderUrl(e){try{if(e.startsWith("http")){let t=new URL(e).pathname.split("/"),r=t.indexOf("qr-tracking");if(-1!==r&&t[r+1])return t[r+1]}if(e.match(/^ORD-\d{4}-\d{3}$/)||e.match(/^[A-Z0-9]{8,}$/))return e;return null}catch(e){return console.error("Error parsing QR content:",e),null}}async scanAndNavigate(e){try{let t=await this.startScan();if(!t)return!1;let r=this.parseOrderUrl(t.text);if(r)return e.push("/mobile/qr-tracking/".concat(r)),!0;return console.log("Invalid QR code:",t.text),!1}catch(e){return console.error("Error in scanAndNavigate:",e),!1}}async getPermissionStatus(){if(!this.isSupported())return"denied";try{let e=await o.Camera.checkPermissions();if("granted"===e.camera||"limited"===e.camera)return this.hasPermission=!0,"granted";if("denied"===e.camera)return this.hasPermission=!1,"denied";return"prompt"}catch(e){return console.error("Error checking permission:",e),"denied"}}async openSettings(){try{await i.q.openSettings()}catch(e){console.error("Error opening settings:",e)}}constructor(){this.isScanning=!1,this.hasPermission=!1}}let d=new c},97936:(e,t,r)=>{"use strict";r.d(t,{j2:()=>c,v7:()=>d,wN:()=>a});var n=r(95704);let i="https://thejerktracker0.vercel.app";function o(e){if(e)return e.replace(/\/$/,"")}function a(){var e,t,r;let a=o("https://thejerktracker0.vercel.app".trim()||(null==(r=n.env.NEXT_PUBLIC_APP_URL)?void 0:r.trim())||(n.env.NEXT_PUBLIC_VERCEL_URL?"https://".concat(n.env.NEXT_PUBLIC_VERCEL_URL):void 0));return a||((null==(e=window.location)?void 0:e.origin)&&null!=(t=o(window.location.origin))?t:i)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a();if(!e)return t;if(/^https?:\/\//i.test(e))return e;let r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)}function d(e){let t=encodeURIComponent(e);return c("/orders/".concat(t))}}},e=>{e.O(0,[5604,2207,1733,7646,4968,2834,4776,9903,8441,1255,7358],()=>e(e.s=89158)),_N_E=e.O()}]);