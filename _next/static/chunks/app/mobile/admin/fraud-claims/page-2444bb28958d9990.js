(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8602],{35820:(e,i,r)=>{Promise.resolve().then(r.bind(r,37310))},37310:(e,i,r)=>{"use strict";r.r(i),r.d(i,{default:()=>G});var t=r(95155),n=r(12115),o=r(20063),a=r(50625),s=r(1733),d=r(26497),l=r(32587),c=r(24995),p=r(65523),m=r(72923),f=r(86651),u=r(17910),g=r(66955),h=r(42348),x=r(42529),y=r(52056);let b=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-0"})(["padding:1rem;padding-bottom:120px;min-height:100vh;background:linear-gradient(135deg,#fef7ee 0%,#fafaf9 100%);"]),j=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-1"})(["text-align:center;margin-bottom:1.5rem;padding-top:1rem;"]),v=a.Ay.h1.withConfig({componentId:"jt-app__sc-f8ea4123-2"})(["font-size:1.75rem;font-weight:700;color:#1f2937;margin:0 0 0.5rem 0;display:flex;align-items:center;justify-content:center;gap:0.5rem;"]),_=a.Ay.p.withConfig({componentId:"jt-app__sc-f8ea4123-3"})(["font-size:0.875rem;color:#6b7280;margin:0;"]),w=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-4"})(["display:grid;grid-template-columns:repeat(2,1fr);gap:0.75rem;margin-bottom:1.5rem;"]),C=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-5"})(["background:white;border-radius:12px;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.1);border-left:4px solid ",";"],e=>e.$color),A=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-6"})(["font-size:2rem;font-weight:700;color:#1f2937;margin-bottom:0.25rem;"]),I=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-7"})(["font-size:0.75rem;color:#6b7280;text-transform:uppercase;letter-spacing:0.5px;"]),k=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-8"})(["display:flex;gap:0.75rem;margin-bottom:1rem;"]),z=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-9"})(["flex:1;position:relative;display:flex;align-items:center;"]),$=(0,a.Ay)(f.A).withConfig({componentId:"jt-app__sc-f8ea4123-10"})(["position:absolute;left:0.75rem;color:#9ca3af;"]),N=a.Ay.input.withConfig({componentId:"jt-app__sc-f8ea4123-11"})(["width:100%;padding:0.75rem 0.75rem 0.75rem 2.5rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.875rem;&:focus{outline:none;border-color:#f97316;}"]),S=(0,a.Ay)(s.P.button).withConfig({componentId:"jt-app__sc-f8ea4123-12"})(["padding:0.75rem;background:white;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;font-weight:600;color:#374151;&:active{background:#f3f4f6;}"]),R=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-13"})(["display:flex;flex-direction:column;gap:1rem;"]),T=(0,a.Ay)(s.P.div).withConfig({componentId:"jt-app__sc-f8ea4123-14"})(["background:white;border-radius:12px;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.1);border-left:4px solid ",";"],e=>"critical"===e.$priority?"#dc2626":"high"===e.$priority?"#f59e0b":"medium"===e.$priority?"#3b82f6":"#6b7280"),P=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-15"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:0.75rem;"]),F=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-16"})(["flex:1;"]),L=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-17"})(["font-size:0.875rem;font-weight:700;color:#1f2937;margin-bottom:0.25rem;"]),E=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-18"})(["padding:0.25rem 0.75rem;border-radius:12px;font-size:0.75rem;font-weight:600;text-transform:uppercase;white-space:nowrap;background:",";color:",";"],e=>"pending"===e.$status?"#fef3c7":"under_review"===e.$status?"#dbeafe":"resolved_fraud"===e.$status?"#fee2e2":"resolved_legitimate"===e.$status?"#d1fae5":"#f3f4f6",e=>"pending"===e.$status?"#92400e":"under_review"===e.$status?"#1e40af":"resolved_fraud"===e.$status?"#991b1b":"resolved_legitimate"===e.$status?"#065f46":"#374151"),O=a.Ay.p.withConfig({componentId:"jt-app__sc-f8ea4123-19"})(["font-size:0.875rem;color:#6b7280;margin:0.5rem 0;line-height:1.5;"]),D=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-20"})(["display:grid;grid-template-columns:repeat(2,1fr);gap:0.5rem;margin-top:1rem;"]),U=a.Ay.button.withConfig({componentId:"jt-app__sc-f8ea4123-21"})(["padding:0.75rem;border-radius:8px;border:none;font-size:0.875rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s;"," &:active{transform:scale(0.98);}"],e=>{switch(e.$variant){case"review":return"background: #dbeafe; color: #1e40af;";case"resolve":return"background: #d1fae5; color: #065f46;";case"dismiss":return"background: #fee2e2; color: #991b1b;"}}),Y=(0,a.Ay)(s.P.div).withConfig({componentId:"jt-app__sc-f8ea4123-22"})(["position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:10000;padding:1rem;"]),q=(0,a.Ay)(s.P.div).withConfig({componentId:"jt-app__sc-f8ea4123-23"})(["background:white;border-radius:16px;padding:1.5rem;max-width:500px;width:100%;max-height:80vh;overflow-y:auto;"]),B=a.Ay.h2.withConfig({componentId:"jt-app__sc-f8ea4123-24"})(["font-size:1.25rem;font-weight:700;color:#1f2937;margin:0 0 1rem 0;"]),H=a.Ay.textarea.withConfig({componentId:"jt-app__sc-f8ea4123-25"})(["width:100%;padding:0.75rem;border:2px solid #e5e7eb;border-radius:8px;font-size:0.875rem;min-height:100px;font-family:inherit;margin-bottom:1rem;&:focus{outline:none;border-color:#f97316;}"]),J=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-26"})(["display:flex;gap:0.75rem;"]),Q=a.Ay.button.withConfig({componentId:"jt-app__sc-f8ea4123-27"})(["flex:1;padding:0.875rem;border-radius:8px;border:none;font-size:1rem;font-weight:600;cursor:pointer;",""],e=>e.$primary?"\n    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);\n    color: white;\n  ":"\n    background: #f3f4f6;\n    color: #374151;\n  "),W=a.Ay.div.withConfig({componentId:"jt-app__sc-f8ea4123-28"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#6b7280;"]);function G(){(0,o.useRouter)();let[e,i]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0),[s,f]=(0,n.useState)(""),[G,K]=(0,n.useState)("all"),[M,V]=(0,n.useState)(null),[X,Z]=(0,n.useState)(null),[ee,ei]=(0,n.useState)(""),[er,et]=(0,n.useState)(!1),en=(0,n.useCallback)(async()=>{try{a(!0);let e=new URLSearchParams;"all"!==G&&e.append("status",G);let r=await fetch("/api/fraud-claims?".concat(e.toString()));if(!r.ok)throw Error("Failed to fetch claims");let t=await r.json();i(t)}catch(e){console.error("Error fetching fraud claims:",e)}finally{a(!1)}},[G]);(0,n.useEffect)(()=>{en()},[en]);let eo=async()=>{if(!M||!X||!ee.trim())return void alert("Please provide resolution notes");et(!0);try{let e={fraud:"resolved_fraud",legitimate:"resolved_legitimate",dismiss:"dismissed"};if(!(await fetch("/api/fraud-claims/".concat(M.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e[X],resolutionNotes:ee})})).ok)throw Error("Failed to resolve claim");await m.B.sendNotificationToUser(M.customerId,{title:"\uD83D\uDEE1️ Fraud Claim Resolved",body:"fraud"===X?"Your fraud claim has been confirmed. Action has been taken.":"legitimate"===X?"Your fraud claim has been reviewed and marked as legitimate.":"Your fraud claim has been dismissed.",data:{type:"fraud_claim_resolved",claimId:M.id,claimNumber:M.claimNumber,status:e[X]}}),alert("Fraud claim resolved successfully!"),V(null),Z(null),ei(""),en()}catch(e){console.error("Error resolving claim:",e),alert("Failed to resolve claim. Please try again.")}finally{et(!1)}},ea=e.filter(e=>{if(!s)return!0;let i=s.toLowerCase();return e.claimNumber.toLowerCase().includes(i)||e.orderNumber.toLowerCase().includes(i)||e.customerName.toLowerCase().includes(i)}),es={total:e.length,pending:e.filter(e=>"pending"===e.status).length,underReview:e.filter(e=>"under_review"===e.status).length,resolved:e.filter(e=>"resolved_fraud"===e.status||"resolved_legitimate"===e.status||"dismissed"===e.status).length},ed=e=>{switch(e){case"customer_never_received":return"Never Received";case"driver_dispute":return"Driver Dispute";case"suspicious_activity":return"Suspicious";case"wrong_delivery":return"Wrong Delivery";case"quality_issue":return"Quality Issue";default:return e}};return(0,t.jsx)(p.default,{children:(0,t.jsxs)(b,{children:[(0,t.jsxs)(j,{children:[(0,t.jsxs)(v,{children:[(0,t.jsx)(u.A,{size:28,color:"#dc2626"}),"Fraud Claims"]}),(0,t.jsx)(_,{children:"Review and resolve disputes"})]}),(0,t.jsxs)(w,{children:[(0,t.jsxs)(C,{$color:"#6b7280",children:[(0,t.jsx)(A,{children:es.total}),(0,t.jsx)(I,{children:"Total"})]}),(0,t.jsxs)(C,{$color:"#f59e0b",children:[(0,t.jsx)(A,{children:es.pending}),(0,t.jsx)(I,{children:"Pending"})]}),(0,t.jsxs)(C,{$color:"#3b82f6",children:[(0,t.jsx)(A,{children:es.underReview}),(0,t.jsx)(I,{children:"Reviewing"})]}),(0,t.jsxs)(C,{$color:"#10b981",children:[(0,t.jsx)(A,{children:es.resolved}),(0,t.jsx)(I,{children:"Resolved"})]})]}),(0,t.jsxs)(k,{children:[(0,t.jsxs)(z,{children:[(0,t.jsx)($,{size:18}),(0,t.jsx)(N,{type:"text",placeholder:"Search claims...",value:s,onChange:e=>f(e.target.value)})]}),(0,t.jsx)(S,{onClick:()=>{let e=["all","pending","under_review","resolved_fraud"],i=e.indexOf(G);K(e[(i+1)%e.length])},children:(0,t.jsx)(g.A,{size:18})})]}),r?(0,t.jsxs)(W,{children:[(0,t.jsx)(h.A,{size:40,className:"spinning"}),(0,t.jsx)("p",{style:{marginTop:"1rem"},children:"Loading claims..."})]}):(0,t.jsx)(R,{children:(0,t.jsx)(d.N,{children:ea.map(e=>(0,t.jsxs)(T,{$priority:e.priority,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[(0,t.jsxs)(P,{children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(L,{children:e.claimNumber}),(0,t.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:[ed(e.claimType)," • Order #",e.orderNumber]})]}),(0,t.jsx)(E,{$status:e.status,children:(e=>{switch(e){case"pending":return"Pending";case"under_review":return"Under Review";case"resolved_fraud":return"Fraud";case"resolved_legitimate":return"Legitimate";case"dismissed":return"Dismissed";default:return e}})(e.status)})]}),(0,t.jsx)(O,{children:e.description}),(0,t.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.5rem"},children:["Customer: ",e.customerName," • $",e.orderTotal.toFixed(2)]}),"pending"===e.status&&(0,t.jsxs)(D,{children:[(0,t.jsxs)(U,{$variant:"review",onClick:async()=>{l.Ii.isNativePlatform()&&await c.dn.impact({style:c.kn.Light}),V(e),Z("legitimate")},children:[(0,t.jsx)(x.A,{size:16}),"Legitimate"]}),(0,t.jsxs)(U,{$variant:"resolve",onClick:async()=>{l.Ii.isNativePlatform()&&await c.dn.impact({style:c.kn.Light}),V(e),Z("fraud")},children:[(0,t.jsx)(y.A,{size:16}),"Fraud"]})]}),e.resolutionNotes&&(0,t.jsxs)("div",{style:{marginTop:"0.75rem",padding:"0.75rem",background:"#f9fafb",borderRadius:"8px",fontSize:"0.75rem"},children:[(0,t.jsx)("strong",{children:"Resolution:"})," ",e.resolutionNotes]})]},e.id))})}),(0,t.jsx)(d.N,{children:M&&X&&(0,t.jsx)(Y,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>{V(null),Z(null)},children:(0,t.jsxs)(q,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)(B,{children:["Resolve Claim: ",M.claimNumber]}),(0,t.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"#f9fafb",borderRadius:"8px"},children:[(0,t.jsxs)("div",{style:{fontSize:"0.875rem",color:"#374151"},children:[(0,t.jsx)("strong",{children:"Type:"})," ",ed(M.claimType)]}),(0,t.jsxs)("div",{style:{fontSize:"0.875rem",color:"#374151",marginTop:"0.25rem"},children:[(0,t.jsx)("strong",{children:"Customer:"})," ",M.customerName]}),(0,t.jsxs)("div",{style:{fontSize:"0.875rem",color:"#374151",marginTop:"0.25rem"},children:[(0,t.jsx)("strong",{children:"Order Total:"})," $",M.orderTotal.toFixed(2)]})]}),(0,t.jsx)(H,{placeholder:"Enter resolution notes (required)...",value:ee,onChange:e=>ei(e.target.value)}),(0,t.jsxs)(J,{children:[(0,t.jsx)(Q,{onClick:()=>{V(null),Z(null),ei("")},children:"Cancel"}),(0,t.jsx)(Q,{$primary:!0,onClick:eo,disabled:er||!ee.trim(),children:er?"Resolving...":"fraud"===X?"Confirm Fraud":"Confirm Legitimate"})]})]})})})]})})}}},e=>{e.O(0,[2207,1733,2619,4968,9199,5523,8441,1255,7358],()=>e(e.s=35820)),_N_E=e.O()}]);