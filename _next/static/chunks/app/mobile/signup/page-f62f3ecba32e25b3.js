(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322,5857],{6132:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},19825:()=>{},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},23664:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},26989:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},28541:(e,t,r)=>{Promise.resolve().then(r.bind(r,62178))},42529:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52583:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("scan-line",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]])},57828:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},62178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var s=r(95155),a=r(12115),o=r(20063),i=r(50625),n=r(20508),l=r(23664),d=r(99708),c=r(70532),h=r(57828),u=r(6132),m=r(42529),p=r(65523),g=r(97971);let f=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-0"})(["min-height:100vh;background:linear-gradient(135deg,#fef7ee 0%,#fafaf9 100%);padding:2rem 1rem;"]),y=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-1"})(["max-width:400px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 4px 6px rgba(0,0,0,0.1);"]),b=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-2"})(["width:64px;height:64px;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);border-radius:1rem;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:1.5rem;margin:0 auto 1.5rem;"]),w=i.Ay.h1.withConfig({componentId:"jt-app__sc-486dee0e-3"})(["font-size:1.75rem;font-weight:700;color:#1f2937;margin-bottom:0.5rem;text-align:center;"]),x=i.Ay.p.withConfig({componentId:"jt-app__sc-486dee0e-4"})(["color:#6b7280;text-align:center;margin-bottom:2rem;"]),A=i.Ay.form.withConfig({componentId:"jt-app__sc-486dee0e-5"})(["display:flex;flex-direction:column;gap:1.25rem;"]),k=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-6"})(["position:relative;"]),j=i.Ay.label.withConfig({componentId:"jt-app__sc-486dee0e-7"})(["display:block;font-size:0.875rem;font-weight:500;color:#374151;margin-bottom:0.5rem;"]),_=i.Ay.input.withConfig({componentId:"jt-app__sc-486dee0e-8"})(["width:100%;padding:0.875rem 1rem 0.875rem 3rem;border:2px solid #e5e7eb;border-radius:0.5rem;font-size:1rem;transition:all 0.2s;box-sizing:border-box;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}&::placeholder{color:#9ca3af;}"]),v=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-9"})(["position:absolute;left:1rem;bottom:0.875rem;color:#6b7280;"]),S=i.Ay.button.withConfig({componentId:"jt-app__sc-486dee0e-10"})(["position:absolute;right:1rem;bottom:0.875rem;background:none;border:none;color:#6b7280;cursor:pointer;padding:0;&:hover{color:#374151;}"]),I=i.Ay.button.withConfig({componentId:"jt-app__sc-486dee0e-11"})(["width:100%;padding:1rem;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);color:white;border:none;border-radius:0.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s;&:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px rgba(237,119,52,0.3);}&:disabled{opacity:0.5;cursor:not-allowed;}"]),C=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-12"})(["background:#fef2f2;color:#dc2626;padding:0.875rem;border-radius:0.5rem;border:1px solid #fecaca;display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;"]),z=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-13"})(["background:#f0fdf4;color:#16a34a;padding:0.875rem;border-radius:0.5rem;border:1px solid #bbf7d0;display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;"]),E=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-14"})(["margin-top:1.5rem;text-align:center;color:#6b7280;font-size:0.875rem;a{color:#ed7734;text-decoration:none;font-weight:600;&:hover{text-decoration:underline;}}"]),M=i.Ay.div.withConfig({componentId:"jt-app__sc-486dee0e-15"})(["display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;margin-bottom:0.5rem;"]),U=i.Ay.button.withConfig({componentId:"jt-app__sc-486dee0e-16"})(["padding:0.75rem;border:2px solid ",";background:",";border-radius:0.5rem;font-size:0.875rem;font-weight:500;color:",";cursor:pointer;transition:all 0.2s;&:hover{border-color:#ed7734;}"],e=>e.$selected?"#ed7734":"#e5e7eb",e=>e.$selected?"#fef7ee":"white",e=>e.$selected?"#ed7734":"#6b7280");function L(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:"",role:"customer"}),[i,L]=(0,a.useState)(!1),[P,D]=(0,a.useState)(!1),[R,T]=(0,a.useState)(""),[q,F]=(0,a.useState)(""),[O,B]=(0,a.useState)(!1),N=async r=>{if(r.preventDefault(),T(""),F(""),!t.name||!t.email||!t.password||!t.confirmPassword)return void T("All fields are required");if(t.password.length<6)return void T("Password must be at least 6 characters");if(t.password!==t.confirmPassword)return void T("Passwords do not match");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return void T("Invalid email format");B(!0);try{let r=await g.F.signUp(t.email,t.password,t.name,t.role);if(r.success){let r=g.F.getCurrentUser(),s=g.F.getDefaultRoute((null==r?void 0:r.role)||"customer");F("\uD83C\uDF89 Welcome to The JERK Tracker, ".concat(t.name,"! Taking you to your dashboard...")),setTimeout(()=>{e.push(s)},2e3)}else T(r.error||"Failed to create account")}catch(e){T("An unexpected error occurred")}finally{B(!1)}};return(0,s.jsx)(p.default,{children:(0,s.jsx)(f,{children:(0,s.jsxs)(y,{children:[(0,s.jsx)(b,{children:"JT"}),(0,s.jsx)(w,{children:"Create Account"}),(0,s.jsx)(x,{children:"Join The JERK Tracker today"}),(0,s.jsxs)(A,{onSubmit:N,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(j,{children:"I am a:"}),(0,s.jsxs)(M,{children:[(0,s.jsx)(U,{type:"button",$selected:"customer"===t.role,onClick:()=>r({...t,role:"customer"}),children:"Customer"}),(0,s.jsx)(U,{type:"button",$selected:"driver"===t.role,onClick:()=>r({...t,role:"driver"}),children:"Driver"})]})]}),(0,s.jsxs)(k,{children:[(0,s.jsx)(j,{children:"Full Name"}),(0,s.jsx)(v,{children:(0,s.jsx)(n.A,{size:20})}),(0,s.jsx)(_,{type:"text",placeholder:"John Doe",value:t.name,onChange:e=>r({...t,name:e.target.value}),disabled:O})]}),(0,s.jsxs)(k,{children:[(0,s.jsx)(j,{children:"Email"}),(0,s.jsx)(v,{children:(0,s.jsx)(l.A,{size:20})}),(0,s.jsx)(_,{type:"email",placeholder:"john@example.com",value:t.email,onChange:e=>r({...t,email:e.target.value}),disabled:O})]}),(0,s.jsxs)(k,{children:[(0,s.jsx)(j,{children:"Password"}),(0,s.jsx)(v,{children:(0,s.jsx)(d.A,{size:20})}),(0,s.jsx)(_,{type:i?"text":"password",placeholder:"At least 6 characters",value:t.password,onChange:e=>r({...t,password:e.target.value}),disabled:O}),(0,s.jsx)(S,{type:"button",onClick:()=>L(!i),children:i?(0,s.jsx)(c.A,{size:20}):(0,s.jsx)(h.A,{size:20})})]}),(0,s.jsxs)(k,{children:[(0,s.jsx)(j,{children:"Confirm Password"}),(0,s.jsx)(v,{children:(0,s.jsx)(d.A,{size:20})}),(0,s.jsx)(_,{type:P?"text":"password",placeholder:"Re-enter password",value:t.confirmPassword,onChange:e=>r({...t,confirmPassword:e.target.value}),disabled:O}),(0,s.jsx)(S,{type:"button",onClick:()=>D(!P),children:P?(0,s.jsx)(c.A,{size:20}):(0,s.jsx)(h.A,{size:20})})]}),R&&(0,s.jsxs)(C,{children:[(0,s.jsx)(u.A,{size:20}),R]}),q&&(0,s.jsxs)(z,{children:[(0,s.jsx)(m.A,{size:20}),q]}),(0,s.jsx)(I,{type:"submit",disabled:O,children:O?"Creating Account...":"Create Account"})]}),(0,s.jsxs)(E,{children:["Already have an account? ",(0,s.jsx)("a",{href:"/mobile/login",children:"Sign in"})]})]})})})}},65993:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},70532:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},80111:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]])},81494:(e,t,r)=>{"use strict";r.d(t,{h:()=>s});let s=(0,r(32587).F3)("PushNotifications",{})},87066:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},97971:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var s=r(39903),a=r(47620);class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}async signIn(e,t){console.log("\uD83D\uDD10 MobileAuth.signIn called with:",e);let r={API_BASE_URL:"https://rqbyr7htb1.execute-api.us-east-1.amazonaws.com/prod",API_KEY:"w15QRuSday4YHbK0FH3zc77mzY3nikKX6qEY2xZS",LOCATION_ADMIN_KEY:"pSq4vhYdRnB7OUCkfQlo9M3z6rJEaD2F"};if(!r.API_BASE_URL){console.log("\uD83D\uDCC4 Loading config from public file...");try{let e=await fetch("/config.json");e.ok&&(r=await e.json(),console.log("✅ Config loaded from file:",r))}catch(e){console.log("❌ Failed to load config file:",e)}}console.log("\uD83D\uDD0D Environment check:",r),this.setLoading(!0),this.setError(null);try{let o=(r.API_BASE_URL||"").trim().replace(/\/$/,"");if(console.log("\uD83D\uDCE1 API_BASE_URL resolved to:",o),o){let s="".concat(o,"/auth/login");console.log("\uD83D\uDE80 Login URL:",s);let a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r.API_KEY||""},body:JSON.stringify({email:e,password:t})});console.log("\uD83D\uDCE1 Response status:",a.status,a.statusText);let i=await a.json();if(console.log("\uD83D\uDCC4 Response data:",i),a.ok&&i.success)return await this.setAuthenticated(i.user),{success:!0};return this.setError(i.error||"Invalid email or password"),{success:!1,error:i.error||"Invalid email or password"}}{console.log("\uD83D\uDCE1 Using direct DynamoDB authentication (Lambda API not configured)");let r=await s.DynamoDBService.getUserByEmail(e);if(!r||!r.password)return this.setError("User not found"),{success:!1,error:"User not found"};if(!await a.Ay.compare(t,r.password))return this.setError("Invalid email or password"),{success:!1,error:"Invalid email or password"};{let e={id:r.id,email:r.email,name:r.name,role:r.role,businessId:r.businessId};return await this.setAuthenticated(e),{success:!0}}}}catch(t){let e=t instanceof Error?t.message:"Authentication failed";return console.log("❌ MobileAuth.signIn error:",e),this.setError(e),{success:!1,error:e}}finally{this.setLoading(!1)}}getTestAccount(e,t){let r=[{id:"test_admin",email:"admin@jerktrackerx.com",password:"admin123",name:"Admin User",role:"admin"},{id:"test_manager",email:"manager@jerktrackerx.com",password:"manager123",name:"Manager User",role:"manager"},{id:"test_driver",email:"driver@jerktrackerx.com",password:"driver123",name:"Driver User",role:"driver"},{id:"test_customer",email:"customer@jerktrackerx.com",password:"customer123",name:"Customer User",role:"customer"}].find(r=>r.email===e&&r.password===t);return r?{id:r.id,email:r.email,name:r.name,role:r.role,businessId:"test_business",phone:"+1234567890",createdAt:new Date,updatedAt:new Date}:null}async signUp(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"customer";console.log("\uD83D\uDCDD MobileAuth.signUp called with:",e,r,o);let i={API_BASE_URL:"https://rqbyr7htb1.execute-api.us-east-1.amazonaws.com/prod",API_KEY:"w15QRuSday4YHbK0FH3zc77mzY3nikKX6qEY2xZS"};if(!i.API_BASE_URL){console.log("\uD83D\uDCC4 Loading config from public file...");try{let e=await fetch("/config.json");e.ok&&(i=await e.json(),console.log("✅ Config loaded from file:",i))}catch(e){console.log("❌ Failed to load config file:",e)}}this.setLoading(!0),this.setError(null);try{let n=(i.API_BASE_URL||"").trim().replace(/\/$/,"");if(n){let s="".concat(n,"/auth/signup");console.log("\uD83D\uDE80 Signup URL:",s);let a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":i.API_KEY||""},body:JSON.stringify({email:e,password:t,name:r,role:o})});console.log("\uD83D\uDCE1 Response status:",a.status,a.statusText);let l=await a.json();if(console.log("\uD83D\uDCC4 Response data:",l),a.ok&&l.success)return await this.setAuthenticated(l.user),{success:!0};return this.setError(l.error||"Sign up failed"),{success:!1,error:l.error||"Sign up failed"}}{console.log("\uD83D\uDCE1 Using direct DynamoDB signup (Lambda API not configured)");let i=await a.Ay.hash(t,12),n=await s.DynamoDBService.createUser({email:e,password:i,name:r,role:o}),l={id:n.id,email:n.email,name:n.name,role:n.role,businessId:n.businessId};return await this.setAuthenticated(l),{success:!0}}}catch(t){console.error("❌ Signup error:",t);let e=t instanceof Error?t.message:"Sign up failed";return this.setError(e),{success:!1,error:e}}finally{this.setLoading(!1)}}async signOut(){this.authState={isAuthenticated:!1,user:null,loading:!1,error:null},localStorage.removeItem("mobile_auth_user"),localStorage.removeItem("mobile_auth_token"),this.notifyListeners()}getAuthState(){return{...this.authState}}isAuthenticated(){return this.authState.isAuthenticated}getCurrentUser(){return this.authState.user}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}loadAuthState(){try{let e=localStorage.getItem("mobile_auth_user"),t=localStorage.getItem("mobile_auth_token");if(e&&t){let t=JSON.parse(e);this.authState={isAuthenticated:!0,user:t,loading:!1,error:null},this.syncUserData(t.email)}}catch(e){console.error("Failed to load auth state:",e)}}async syncUserData(e){try{let t="https://rqbyr7htb1.execute-api.us-east-1.amazonaws.com/prod".trim().replace(/\/$/,"");if(!t)return void console.warn("Lambda API not configured, skipping sync");let r=await fetch("".concat(t,"/auth/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(r.ok){let e=await r.json();if(e.success&&e.user){let t=e.user;localStorage.setItem("mobile_auth_user",JSON.stringify(t)),this.authState={...this.authState,user:t},this.notifyListeners(),console.log("✅ User data synced from DynamoDB")}}}catch(e){console.warn("Failed to sync user data:",e)}}async setAuthenticated(e){let t="mock_token_"+Date.now();this.authState={isAuthenticated:!0,user:e,loading:!1,error:null},localStorage.setItem("mobile_auth_user",JSON.stringify(e)),localStorage.setItem("mobile_auth_token",t),this.notifyListeners()}async refreshUserData(){let e=this.getCurrentUser();(null==e?void 0:e.email)&&await this.syncUserData(e.email)}setLoading(e){this.authState={...this.authState,loading:e},this.notifyListeners()}setError(e){this.authState={...this.authState,error:e},this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>e({...this.authState}))}getDefaultRoute(e){switch(e){case"admin":case"customer":return"/mobile/dashboard";case"manager":case"driver":return"/mobile/orders";default:return"/mobile"}}constructor(){this.authState={isAuthenticated:!1,user:null,loading:!1,error:null},this.listeners=[],this.loadAuthState()}}let i=o.getInstance()},99708:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[2207,7646,2619,4968,2987,9903,5523,8441,1255,7358],()=>e(e.s=28541)),_N_E=e.O()}]);