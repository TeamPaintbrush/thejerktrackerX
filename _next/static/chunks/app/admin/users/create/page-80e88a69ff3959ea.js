(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6538],{14606:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>o,Qg:()=>s,Te:()=>a,UW:()=>l,cf:()=>n});var i=r(22663);let a=e=>{i.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},s=e=>{i.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},n=e=>{(0,i.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},o=e=>i.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),l=e=>{i.Ay.dismiss(e)}},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},40294:(e,t,r)=>{"use strict";r.d(t,{kt:()=>m,lV:()=>h,p8:()=>u});var i=r(95155);r(12115);var a=r(50625);let s=(0,a.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),n=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],s,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:r}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(r.colors.secondary[600],";");default:return"color: ".concat(r.colors.primary[600],";")}}),o=a.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),l=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),d=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),c=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),m=e=>{let{size:t="md",color:r="orange",className:a=""}=e;return(0,i.jsx)(n,{$size:t,$color:r,className:a,children:(0,i.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},h=e=>{let{isLoading:t,children:r,onClick:a,type:s="button",className:n="",disabled:l=!1}=e;return(0,i.jsxs)(o,{type:s,onClick:a,disabled:t||l,className:n,children:[t&&(0,i.jsx)(m,{size:"sm",color:"white"}),(0,i.jsx)("span",{children:r})]})},u=e=>{let{isLoading:t,message:r="Loading...",children:a}=e;return(0,i.jsxs)(l,{children:[a,t&&(0,i.jsx)(d,{children:(0,i.jsxs)(c,{children:[(0,i.jsx)(m,{size:"lg"}),(0,i.jsx)("p",{children:r})]})})]})}},46046:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},47921:(e,t,r)=>{"use strict";r.d(t,{CP:()=>c,Tk:()=>l,Z2:()=>o,cV:()=>d});var i=r(95155),a=r(58347),s=r(12115);let n=(0,s.createContext)({hasNextAuth:!0}),o=()=>(0,s.useContext)(n);function l(){try{let{hasNextAuth:e}=o();if(!e)return{data:null,status:"unauthenticated"};return(0,a.wV)()}catch(e){return{data:null,status:"loading"}}}function d(){let{hasNextAuth:e}=o();return async t=>{if(e)return(0,a.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function c(e){let{children:t}=e,[r,o]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let i=r.headers.get("content-type");if(r.ok&&(null==i?void 0:i.includes("application/json")))try{await r.json(),o(!0)}catch(e){o(!1)}else o(!1)}catch(e){o(!1)}})()},[]),(0,i.jsx)(n.Provider,{value:{hasNextAuth:r},children:r?(0,i.jsx)(a.CP,{children:t}):(0,i.jsx)(i.Fragment,{children:t})})}},60732:(e,t,r)=>{Promise.resolve().then(r.bind(r,98679))},65229:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},98679:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var i=r(95155),a=r(12115),s=r(20063),n=r(47921),o=r(50625),l=r(35626),d=r(65229),c=r(46046),m=r(40294),h=r(39903),u=r(14606),p=r(22663);class g{static isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static isValidPhone(e){return/^(\+1|1)?[-.\s]?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}$/.test(e)}static isValidPassword(e){return!(e.length<8)&&!!/[A-Z]/.test(e)&&!!/[a-z]/.test(e)&&!!/[0-9]/.test(e)}static isValidPrice(e){let t="string"==typeof e?parseFloat(e):e;if(isNaN(t)||t<0)return!1;let r=t.toString().split(".")[1];return!r||!(r.length>2)}static isRequired(e){return null!=e&&("string"!=typeof e||e.trim().length>0)}static hasMinLength(e,t){return e.trim().length>=t}static hasMaxLength(e,t){return e.trim().length<=t}static isValidOrderNumber(e){return this.hasMinLength(e,3)&&this.hasMaxLength(e,50)}static validateUserForm(e){let t={};return this.isRequired(e.name)?this.hasMinLength(e.name,2)?this.hasMaxLength(e.name,100)||(t.name="Name must be less than 100 characters"):t.name="Name must be at least 2 characters":t.name="Name is required",this.isRequired(e.email)?this.isValidEmail(e.email)||(t.email="Please enter a valid email address"):t.email="Email is required",e.password&&!this.isValidPassword(e.password)&&(t.password="Password must be at least 8 characters with 1 uppercase, 1 lowercase, and 1 number"),this.isRequired(e.role)?["admin","manager","driver","customer"].includes(e.role)||(t.role="Invalid role selected"):t.role="Role is required",{isValid:0===Object.keys(t).length,errors:t}}static validateMenuItemForm(e){let t={};return this.isRequired(e.name)?this.hasMinLength(e.name,2)?this.hasMaxLength(e.name,100)||(t.name="Item name must be less than 100 characters"):t.name="Item name must be at least 2 characters":t.name="Item name is required",e.description&&!this.hasMaxLength(e.description,500)&&(t.description="Description must be less than 500 characters"),this.isRequired(e.price)?this.isValidPrice(e.price)?0>=parseFloat(e.price.toString())?t.price="Price must be greater than 0":parseFloat(e.price.toString())>1e4&&(t.price="Price cannot exceed $10,000"):t.price="Please enter a valid price (e.g., 9.99)":t.price="Price is required",{isValid:0===Object.keys(t).length,errors:t}}static validateOrderForm(e){let t={};return this.isRequired(e.orderNumber)?this.isValidOrderNumber(e.orderNumber)||(t.orderNumber="Order number must be between 3 and 50 characters"):t.orderNumber="Order number is required",this.isRequired(e.customerName)?this.hasMinLength(e.customerName,2)?this.hasMaxLength(e.customerName,100)||(t.customerName="Customer name must be less than 100 characters"):t.customerName="Customer name must be at least 2 characters":t.customerName="Customer name is required",e.customerEmail&&!this.isValidEmail(e.customerEmail)&&(t.customerEmail="Please enter a valid email address"),this.isRequired(e.orderDetails)?this.hasMinLength(e.orderDetails,3)||(t.orderDetails="Order details must be at least 3 characters"):t.orderDetails="Order details are required",{isValid:0===Object.keys(t).length,errors:t}}}let f=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-0"})(["min-height:100vh;background:#fafaf9;padding:2rem;"]),x=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-1"})(["max-width:800px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 1px 3px rgba(0,0,0,0.05);border:1px solid #e7e5e4;"]),y=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-2"})(["margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #e7e5e4;"]),b=o.Ay.button.withConfig({componentId:"jt-app__sc-2c55f7ae-3"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:#f5f5f4;border:none;border-radius:0.5rem;color:#44403c;font-weight:500;cursor:pointer;margin-bottom:1rem;transition:all 0.2s ease;&:hover{background:#e7e5e4;}svg{width:18px;height:18px;}"]),j=o.Ay.h1.withConfig({componentId:"jt-app__sc-2c55f7ae-4"})(["font-size:2rem;color:#1c1917;margin:0 0 0.5rem 0;"]),w=o.Ay.p.withConfig({componentId:"jt-app__sc-2c55f7ae-5"})(["color:#78716c;margin:0;"]),v=o.Ay.form.withConfig({componentId:"jt-app__sc-2c55f7ae-6"})(["display:flex;flex-direction:column;gap:1.5rem;"]),C=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-7"})(["display:flex;flex-direction:column;gap:0.5rem;"]),_=o.Ay.label.withConfig({componentId:"jt-app__sc-2c55f7ae-8"})(["font-weight:600;color:#1c1917;font-size:0.9375rem;"]),A=o.Ay.input.withConfig({componentId:"jt-app__sc-2c55f7ae-9"})(["padding:0.75rem 1rem;border:1px solid #e7e5e4;border-radius:0.5rem;font-size:0.9375rem;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),k=o.Ay.select.withConfig({componentId:"jt-app__sc-2c55f7ae-10"})(["padding:0.75rem 1rem;border:1px solid #e7e5e4;border-radius:0.5rem;font-size:0.9375rem;background:white;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),I=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-11"})(["display:flex;gap:1rem;margin-top:1rem;"]),N=o.Ay.button.withConfig({componentId:"jt-app__sc-2c55f7ae-12"})(["flex:1;padding:0.875rem 1.5rem;border:none;border-radius:0.5rem;font-weight:600;font-size:0.9375rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s ease;background:",";color:",";&:hover{opacity:",";background:",";transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;}svg{width:18px;height:18px;}"],e=>"primary"===e.$variant?"linear-gradient(135deg, #ed7734 0%, #de5d20 100%)":"#f5f5f4",e=>"primary"===e.$variant?"white":"#44403c",e=>"primary"===e.$variant?.9:1,e=>"secondary"===e.$variant?"#e7e5e4":void 0),q=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-13"})(["padding:1rem;background:#fee2e2;border:1px solid #fecaca;border-radius:0.5rem;color:#dc2626;font-size:0.9375rem;"]),M=o.Ay.span.withConfig({componentId:"jt-app__sc-2c55f7ae-14"})(["color:#dc2626;font-size:0.875rem;margin-top:0.25rem;"]),V=o.Ay.div.withConfig({componentId:"jt-app__sc-2c55f7ae-15"})(["display:flex;flex-direction:column;gap:0.25rem;"]);function z(){let e=(0,s.useRouter)(),{data:t,status:r}=(0,n.Tk)(),[o,z]=(0,a.useState)(!1),[P,L]=(0,a.useState)(""),[E,F]=(0,a.useState)({}),[O,R]=(0,a.useState)({name:"",email:"",password:"",role:"customer"});(0,a.useEffect)(()=>{var i;return"unauthenticated"===r?void e.push("/auth/signin"):(null==t||null==(i=t.user)?void 0:i.role)!=="admin"?void e.push("/admin"):void 0},[r,t,e]);let S=async t=>{t.preventDefault(),L(""),F({});let r=g.validateUserForm(O);if(!r.isValid){F(r.errors);let e=Object.values(r.errors)[0];(0,u.Qg)(e);return}z(!0);let i=(0,u.Cs)("Creating user...");try{let t=await h.DynamoDBService.createUser({name:O.name,email:O.email,password:O.password,role:O.role,platform:"web"});(0,u.UW)(i),(0,u.Te)('User "'.concat(t.name,'" created successfully!')),setTimeout(()=>e.push("/admin/users"),1e3)}catch(t){(0,u.UW)(i);let e=t.message||"Failed to create user";L(e),(0,u.Qg)(e)}finally{z(!1)}};return"loading"===r?(0,i.jsx)(f,{children:(0,i.jsx)(m.p8,{isLoading:!0,message:"Loading...",children:(0,i.jsx)("div",{})})}):(0,i.jsxs)(f,{children:[(0,i.jsx)(p.l$,{}),(0,i.jsxs)(x,{children:[(0,i.jsxs)(y,{children:[(0,i.jsxs)(b,{onClick:()=>e.push("/admin/users"),children:[(0,i.jsx)(l.A,{}),(0,i.jsx)("span",{children:"Back to Users"})]}),(0,i.jsx)(j,{children:"Create New User"}),(0,i.jsx)(w,{children:"Add a new user to the system"})]}),P&&(0,i.jsx)(q,{children:P}),(0,i.jsxs)(v,{onSubmit:S,children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(_,{htmlFor:"name",children:"Full Name"}),(0,i.jsxs)(V,{children:[(0,i.jsx)(A,{id:"name",type:"text",value:O.name,onChange:e=>{R({...O,name:e.target.value}),E.name&&F({...E,name:""})},placeholder:"John Doe",required:!0}),E.name&&(0,i.jsx)(M,{children:E.name})]})]}),(0,i.jsxs)(C,{children:[(0,i.jsx)(_,{htmlFor:"email",children:"Email Address"}),(0,i.jsxs)(V,{children:[(0,i.jsx)(A,{id:"email",type:"email",value:O.email,onChange:e=>{R({...O,email:e.target.value}),E.email&&F({...E,email:""})},placeholder:"john@example.com",required:!0}),E.email&&(0,i.jsx)(M,{children:E.email})]})]}),(0,i.jsxs)(C,{children:[(0,i.jsx)(_,{htmlFor:"password",children:"Password"}),(0,i.jsxs)(V,{children:[(0,i.jsx)(A,{id:"password",type:"password",value:O.password,onChange:e=>{R({...O,password:e.target.value}),E.password&&F({...E,password:""})},placeholder:"Min. 8 characters",minLength:8,required:!0}),E.password&&(0,i.jsx)(M,{children:E.password})]})]}),(0,i.jsxs)(C,{children:[(0,i.jsx)(_,{htmlFor:"role",children:"Role"}),(0,i.jsxs)(V,{children:[(0,i.jsxs)(k,{id:"role",value:O.role,onChange:e=>{R({...O,role:e.target.value}),E.role&&F({...E,role:""})},required:!0,children:[(0,i.jsx)("option",{value:"customer",children:"Customer"}),(0,i.jsx)("option",{value:"driver",children:"Driver"}),(0,i.jsx)("option",{value:"manager",children:"Manager"}),(0,i.jsx)("option",{value:"admin",children:"Admin"})]}),E.role&&(0,i.jsx)(M,{children:E.role})]})]}),(0,i.jsxs)(I,{children:[(0,i.jsxs)(N,{type:"button",$variant:"secondary",onClick:()=>e.push("/admin/users"),children:[(0,i.jsx)(d.A,{}),"Cancel"]}),(0,i.jsxs)(N,{type:"submit",$variant:"primary",disabled:o,children:[(0,i.jsx)(c.A,{}),o?"Creating...":"Create User"]})]})]})]})]})}}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=60732)),_N_E=e.O()}]);