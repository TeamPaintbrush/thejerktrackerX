(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9836],{4117:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>R});var n=i(95155),r=i(12115),o=i(20063),a=i(47921),s=i(50625),d=i(35626),c=i(6191),l=i(91761);let p=(0,i(71847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var m=i(71360),h=i(40294),u=i(39903),f=i(14606),g=i(22663);let x=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-0"})(["min-height:100vh;background:#fafaf9;padding:2rem;"]),y=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-1"})(["max-width:1200px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 1px 3px rgba(0,0,0,0.05);border:1px solid #e7e5e4;"]),j=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-2"})(["margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #e7e5e4;display:flex;justify-content:space-between;align-items:flex-start;"]),b=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-3"})([""]),v=s.Ay.button.withConfig({componentId:"jt-app__sc-59f54665-4"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:#f5f5f4;border:none;border-radius:0.5rem;color:#44403c;font-weight:500;cursor:pointer;margin-bottom:1rem;transition:all 0.2s ease;&:hover{background:#e7e5e4;}svg{width:18px;height:18px;}"]),w=s.Ay.h1.withConfig({componentId:"jt-app__sc-59f54665-5"})(["font-size:2rem;color:#1c1917;margin:0 0 0.5rem 0;"]),_=s.Ay.p.withConfig({componentId:"jt-app__sc-59f54665-6"})(["color:#78716c;margin:0;"]),C=s.Ay.button.withConfig({componentId:"jt-app__sc-59f54665-7"})(["padding:0.75rem 1.5rem;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);color:white;border:none;border-radius:0.5rem;font-weight:600;font-size:0.9375rem;cursor:pointer;display:flex;align-items:center;gap:0.5rem;transition:all 0.2s ease;&:hover{opacity:0.9;transform:translateY(-1px);}svg{width:18px;height:18px;}"]),A=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-8"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;"]),k=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-9"})(["padding:1.5rem;background:#fafaf9;border:1px solid #e7e5e4;border-radius:0.75rem;transition:all 0.2s ease;&:hover{border-color:#ed7734;box-shadow:0 2px 8px rgba(237,119,52,0.1);}"]),I=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-10"})(["display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;"]),M=s.Ay.h3.withConfig({componentId:"jt-app__sc-59f54665-11"})(["font-size:1.125rem;color:#1c1917;margin:0;"]),z=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-12"})(["display:flex;align-items:center;gap:0.25rem;font-size:1.125rem;font-weight:700;color:#ed7734;svg{width:16px;height:16px;}"]),$=s.Ay.p.withConfig({componentId:"jt-app__sc-59f54665-13"})(["color:#78716c;margin:0 0 1rem 0;font-size:0.9375rem;"]),S=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-14"})(["display:flex;gap:0.5rem;"]),D=s.Ay.button.withConfig({componentId:"jt-app__sc-59f54665-15"})(["flex:1;padding:0.5rem;border:1px solid #e7e5e4;background:",";color:",";border-radius:0.5rem;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s ease;&:hover{background:",";}svg{width:16px;height:16px;}"],e=>"delete"===e.$variant?"#fee2e2":"white",e=>"delete"===e.$variant?"#dc2626":"#44403c",e=>"delete"===e.$variant?"#fecaca":"#f5f5f4"),F=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-16"})(["text-align:center;padding:4rem 2rem;color:#78716c;h3{color:#1c1917;margin-bottom:0.5rem;}"]),T=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-17"})(["display:",";position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;z-index:1000;padding:1rem;"],e=>e.$isOpen?"flex":"none"),W=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-18"})(["background:white;border-radius:1rem;padding:2rem;max-width:500px;width:100%;max-height:90vh;overflow-y:auto;"]),E=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-19"})(["margin-bottom:1.5rem;"]),N=s.Ay.h2.withConfig({componentId:"jt-app__sc-59f54665-20"})(["font-size:1.5rem;color:#1c1917;margin:0;"]),P=s.Ay.form.withConfig({componentId:"jt-app__sc-59f54665-21"})(["display:flex;flex-direction:column;gap:1rem;"]),U=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-22"})(["display:flex;flex-direction:column;"]),B=s.Ay.label.withConfig({componentId:"jt-app__sc-59f54665-23"})(["font-size:0.875rem;font-weight:500;color:#44403c;margin-bottom:0.5rem;"]),Q=s.Ay.input.withConfig({componentId:"jt-app__sc-59f54665-24"})(["width:100%;padding:0.75rem;border:1px solid #e7e5e4;border-radius:0.5rem;font-size:0.9375rem;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),H=s.Ay.textarea.withConfig({componentId:"jt-app__sc-59f54665-25"})(["width:100%;padding:0.75rem;border:1px solid #e7e5e4;border-radius:0.5rem;font-size:0.9375rem;resize:vertical;min-height:80px;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),V=s.Ay.input.withConfig({componentId:"jt-app__sc-59f54665-26"})(["width:18px;height:18px;cursor:pointer;"]),q=s.Ay.label.withConfig({componentId:"jt-app__sc-59f54665-27"})(["display:flex;align-items:center;gap:0.5rem;font-size:0.9375rem;color:#44403c;cursor:pointer;"]),O=s.Ay.div.withConfig({componentId:"jt-app__sc-59f54665-28"})(["display:flex;gap:0.5rem;margin-top:1.5rem;"]),L=s.Ay.button.withConfig({componentId:"jt-app__sc-59f54665-29"})(["flex:1;padding:0.75rem 1.5rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;background:",";color:",";&:hover{opacity:",";background:",";}&:disabled{opacity:0.5;cursor:not-allowed;}"],e=>"primary"===e.$variant?"linear-gradient(135deg, #ed7734 0%, #de5d20 100%)":"#f5f5f4",e=>"primary"===e.$variant?"white":"#44403c",e=>"primary"===e.$variant?.9:1,e=>"secondary"===e.$variant?"#e7e5e4":"");function R(){let e=(0,o.useRouter)(),{data:t,status:i}=(0,a.Tk)(),[s,R]=(0,r.useState)(!0),[G,J]=(0,r.useState)([]),[Y,Z]=(0,r.useState)(!1),[K,X]=(0,r.useState)(null),[ee,et]=(0,r.useState)({name:"",description:"",price:"",available:!0});(0,r.useEffect)(()=>{var n;return"unauthenticated"===i?void e.push("/auth/signin"):(null==t||null==(n=t.user)?void 0:n.role)!=="admin"?void e.push("/admin"):void ei()},[i,t,e]);let ei=async()=>{try{var e,i;R(!0);let n=(null==t||null==(e=t.user)?void 0:e.businessId)||(null==t||null==(i=t.user)?void 0:i.id)||"default-business",r=(await u.DynamoDBService.getMenuItems(n)).map(e=>({id:e.id,name:e.name,description:e.description||"",price:e.price,available:!1!==e.available}));J(r)}catch(e){console.error("Error loading menu items:",e),(0,f.Qg)("Failed to load menu items")}finally{R(!1)}},en=async e=>{if(!confirm("Are you sure you want to delete this menu item?"))return;let t=(0,f.Cs)("Deleting menu item...");try{if(await u.DynamoDBService.deleteMenuItem(e))(0,f.UW)(t),(0,f.Te)("Menu item deleted successfully!"),await ei();else throw Error("Failed to delete menu item")}catch(e){(0,f.UW)(t),(0,f.Qg)(e.message||"Failed to delete menu item")}},er=()=>{Z(!1),X(null),et({name:"",description:"",price:"",available:!0})},eo=async e=>{if(e.preventDefault(),!ee.name.trim())return void(0,f.Qg)("Please enter a menu item name");if(!ee.price||0>=parseFloat(ee.price))return void(0,f.Qg)("Please enter a valid price");if(parseFloat(ee.price)>1e4)return void(0,f.Qg)("Price cannot exceed $10,000");let i=(0,f.Cs)(K?"Updating menu item...":"Creating menu item...");try{var n,r;let e=(null==t||null==(n=t.user)?void 0:n.businessId)||(null==t||null==(r=t.user)?void 0:r.id)||"default-business",o=parseFloat(ee.price);K?(await u.DynamoDBService.updateMenuItem(K.id,{name:ee.name.trim(),description:ee.description.trim(),price:o}),(0,f.UW)(i),(0,f.Te)("Menu item updated successfully!")):(await u.DynamoDBService.createMenuItem({businessId:e,name:ee.name.trim(),description:ee.description.trim(),price:o,category:"main"}),(0,f.UW)(i),(0,f.Te)("Menu item created successfully!")),er(),await ei()}catch(e){(0,f.UW)(i),(0,f.Qg)(e.message||"Failed to save menu item")}};return"loading"===i||s?(0,n.jsx)(x,{children:(0,n.jsx)(h.p8,{isLoading:!0,message:"Loading menu...",children:(0,n.jsx)("div",{})})}):(0,n.jsxs)(x,{children:[(0,n.jsx)(g.l$,{}),(0,n.jsxs)(y,{children:[(0,n.jsxs)(j,{children:[(0,n.jsxs)(b,{children:[(0,n.jsxs)(v,{onClick:()=>e.push("/admin"),children:[(0,n.jsx)(d.A,{}),(0,n.jsx)("span",{children:"Back to Dashboard"})]}),(0,n.jsx)(w,{children:"Menu Management"}),(0,n.jsx)(_,{children:"Manage menu items and pricing"})]}),(0,n.jsxs)(C,{onClick:()=>{X(null),et({name:"",description:"",price:"",available:!0}),Z(!0)},children:[(0,n.jsx)(c.A,{}),"Add Item"]})]}),0===G.length?(0,n.jsxs)(F,{children:[(0,n.jsx)("h3",{children:"No Menu Items"}),(0,n.jsx)("p",{children:"Start by adding your first menu item"})]}):(0,n.jsx)(A,{children:G.map(e=>(0,n.jsxs)(k,{children:[(0,n.jsxs)(I,{children:[(0,n.jsx)(M,{children:e.name}),(0,n.jsxs)(z,{children:[(0,n.jsx)(l.A,{}),e.price.toFixed(2)]})]}),(0,n.jsx)($,{children:e.description}),(0,n.jsxs)(S,{children:[(0,n.jsxs)(D,{$variant:"edit",onClick:()=>{X(e),et({name:e.name,description:e.description,price:e.price.toString(),available:e.available}),Z(!0)},children:[(0,n.jsx)(p,{}),"Edit"]}),(0,n.jsxs)(D,{$variant:"delete",onClick:()=>en(e.id),children:[(0,n.jsx)(m.A,{}),"Delete"]})]})]},e.id))})]}),(0,n.jsx)(T,{$isOpen:Y,onClick:er,children:(0,n.jsxs)(W,{onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(E,{children:(0,n.jsx)(N,{children:K?"Edit Menu Item":"Add Menu Item"})}),(0,n.jsxs)(P,{onSubmit:eo,children:[(0,n.jsxs)(U,{children:[(0,n.jsx)(B,{htmlFor:"name",children:"Item Name *"}),(0,n.jsx)(Q,{id:"name",type:"text",value:ee.name,onChange:e=>et({...ee,name:e.target.value}),placeholder:"e.g., Jerk Chicken",required:!0})]}),(0,n.jsxs)(U,{children:[(0,n.jsx)(B,{htmlFor:"description",children:"Description"}),(0,n.jsx)(H,{id:"description",value:ee.description,onChange:e=>et({...ee,description:e.target.value}),placeholder:"Brief description of the item..."})]}),(0,n.jsxs)(U,{children:[(0,n.jsx)(B,{htmlFor:"price",children:"Price ($) *"}),(0,n.jsx)(Q,{id:"price",type:"number",step:"0.01",min:"0",value:ee.price,onChange:e=>et({...ee,price:e.target.value}),placeholder:"0.00",required:!0})]}),(0,n.jsx)(U,{children:(0,n.jsxs)(q,{children:[(0,n.jsx)(V,{type:"checkbox",checked:ee.available,onChange:e=>et({...ee,available:e.target.checked})}),"Available for ordering"]})}),(0,n.jsxs)(O,{children:[(0,n.jsx)(L,{type:"button",$variant:"secondary",onClick:er,children:"Cancel"}),(0,n.jsx)(L,{type:"submit",$variant:"primary",children:K?"Update Item":"Create Item"})]})]})]})})]})}},6191:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n=(0,i(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11971:(e,t,i)=>{Promise.resolve().then(i.bind(i,4117))},14606:(e,t,i)=>{"use strict";i.d(t,{Cs:()=>s,Qg:()=>o,Te:()=>r,UW:()=>d,cf:()=>a});var n=i(22663);let r=e=>{n.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},o=e=>{n.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},a=e=>{(0,n.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},s=e=>n.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),d=e=>{n.Ay.dismiss(e)}},35626:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n=(0,i(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},40294:(e,t,i)=>{"use strict";i.d(t,{kt:()=>p,lV:()=>m,p8:()=>h});var n=i(95155);i(12115);var r=i(50625);let o=(0,r.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),a=r.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],o,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:i}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(i.colors.secondary[600],";");default:return"color: ".concat(i.colors.primary[600],";")}}),s=r.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),d=r.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),c=r.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),l=r.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),p=e=>{let{size:t="md",color:i="orange",className:r=""}=e;return(0,n.jsx)(a,{$size:t,$color:i,className:r,children:(0,n.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},m=e=>{let{isLoading:t,children:i,onClick:r,type:o="button",className:a="",disabled:d=!1}=e;return(0,n.jsxs)(s,{type:o,onClick:r,disabled:t||d,className:a,children:[t&&(0,n.jsx)(p,{size:"sm",color:"white"}),(0,n.jsx)("span",{children:i})]})},h=e=>{let{isLoading:t,message:i="Loading...",children:r}=e;return(0,n.jsxs)(d,{children:[r,t&&(0,n.jsx)(c,{children:(0,n.jsxs)(l,{children:[(0,n.jsx)(p,{size:"lg"}),(0,n.jsx)("p",{children:i})]})})]})}},47921:(e,t,i)=>{"use strict";i.d(t,{CP:()=>l,Tk:()=>d,Z2:()=>s,cV:()=>c});var n=i(95155),r=i(58347),o=i(12115);let a=(0,o.createContext)({hasNextAuth:!0}),s=()=>(0,o.useContext)(a);function d(){try{let{hasNextAuth:e}=s();if(!e)return{data:null,status:"unauthenticated"};return(0,r.wV)()}catch(e){return{data:null,status:"loading"}}}function c(){let{hasNextAuth:e}=s();return async t=>{if(e)return(0,r.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function l(e){let{children:t}=e,[i,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),i=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let n=i.headers.get("content-type");if(i.ok&&(null==n?void 0:n.includes("application/json")))try{await i.json(),s(!0)}catch(e){s(!1)}else s(!1)}catch(e){s(!1)}})()},[]),(0,n.jsx)(a.Provider,{value:{hasNextAuth:i},children:i?(0,n.jsx)(r.CP,{children:t}):(0,n.jsx)(n.Fragment,{children:t})})}},71360:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n=(0,i(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},91761:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});let n=(0,i(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=11971)),_N_E=e.O()}]);