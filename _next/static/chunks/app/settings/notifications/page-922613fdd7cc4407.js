(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9045],{14606:(e,t,i)=>{"use strict";i.d(t,{Cs:()=>n,Qg:()=>a,Te:()=>s,UW:()=>c,cf:()=>o});var r=i(22663);let s=e=>{r.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},a=e=>{r.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},o=e=>{(0,r.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},n=e=>r.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),c=e=>{r.Ay.dismiss(e)}},23664:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},26617:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},31330:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(39903);class s{static getLocalStorageKey(e){return"".concat(this.LOCAL_STORAGE_PREFIX).concat(e)}static loadFromLocalStorage(e){if(!window.localStorage)return null;try{let t=window.localStorage.getItem(this.getLocalStorageKey(e));if(!t)return null;let i=JSON.parse(t);return{...i,createdAt:i.createdAt?new Date(i.createdAt):new Date,updatedAt:i.updatedAt?new Date(i.updatedAt):new Date}}catch(e){return console.warn("[SettingsService] Failed to read settings from localStorage:",e),null}}static saveToLocalStorage(e,t){if(window.localStorage)try{window.localStorage.setItem(this.getLocalStorageKey(e),JSON.stringify(t))}catch(e){console.warn("[SettingsService] Failed to persist settings to localStorage:",e)}}static removeFromLocalStorage(e){if(window.localStorage)try{window.localStorage.removeItem(this.getLocalStorageKey(e))}catch(e){console.warn("[SettingsService] Failed to remove settings from localStorage:",e)}}static async getUserSettings(e){try{let t="".concat(this.SETTINGS_PREFIX).concat(e);if(this.memoryCache.has(t))return console.log("[SettingsService] Returning from cache:",e),this.memoryCache.get(t);let i=this.loadFromLocalStorage(e);if(i)return this.memoryCache.set(t,i),console.log("[SettingsService] Returning from localStorage:",e),i;let s=await r.DynamoDBService.getUserByEmail(e);if(s&&s.settings){let i=s.settings;return this.memoryCache.set(t,i),this.saveToLocalStorage(e,i),i}return null}catch(e){return console.error("[SettingsService] Error getting user settings:",e),null}}static createDefaultSettings(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"User";return{userId:e,profile:{name:i,email:t,phone:"",role:"customer",bio:"",location:""},notifications:{email:!0,push:!0,sms:!1,orderUpdates:!0,promotions:!1,newsletter:!1},security:{twoFactorEnabled:!1,sessionTimeout:30,biometricEnabled:!1},privacy:{locationEnabled:!1,dataCollection:!0},preferences:{language:"en",timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD"},createdAt:new Date,updatedAt:new Date}}static async updateUserSettings(e,t){try{let i=await this.getUserSettings(e);i||(i=this.createDefaultSettings(e,e));let s={...i,...t,userId:e,updatedAt:new Date},a="".concat(this.SETTINGS_PREFIX).concat(e);this.memoryCache.set(a,s),this.saveToLocalStorage(e,s);try{let t=await r.DynamoDBService.getUserByEmail(e);t&&await r.DynamoDBService.updateUser(t.id,{settings:s})}catch(e){console.log("[SettingsService] Database update failed, using memory cache:",e)}return console.log("[SettingsService] Settings updated:",e),s}catch(e){return console.error("[SettingsService] Error updating settings:",e),null}}static async updateProfile(e,t){let i=await this.getUserSettings(e);return i?this.updateUserSettings(e,{profile:{...i.profile,...t}}):null}static async updateNotifications(e,t){let i=await this.getUserSettings(e);return i?this.updateUserSettings(e,{notifications:{...i.notifications,...t}}):null}static async updateSecurity(e,t){let i=await this.getUserSettings(e);return i?this.updateUserSettings(e,{security:{...i.security,...t}}):null}static async updatePrivacy(e,t){let i=await this.getUserSettings(e);return i?this.updateUserSettings(e,{privacy:{...i.privacy,...t}}):null}static async updatePreferences(e,t){let i=await this.getUserSettings(e);return i?this.updateUserSettings(e,{preferences:{...i.preferences,...t}}):null}static clearCache(e){if(e){let t="".concat(this.SETTINGS_PREFIX).concat(e);this.memoryCache.delete(t),this.removeFromLocalStorage(e)}else if(this.memoryCache.clear(),window.localStorage)for(let e=window.localStorage.length-1;e>=0;e-=1){let t=window.localStorage.key(e);t&&t.startsWith(this.LOCAL_STORAGE_PREFIX)&&window.localStorage.removeItem(t)}}static async initializeSettings(e,t,i,r){let s=await this.getUserSettings(e);return s||((s=this.createDefaultSettings(e,t,i)).platform=r,await this.updateUserSettings(e,s)),s}}s.SETTINGS_PREFIX="settings_",s.memoryCache=new Map,s.LOCAL_STORAGE_PREFIX="mobile_settings_";let a=s},33891:(e,t,i)=>{Promise.resolve().then(i.bind(i,40826))},35626:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37586:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},39347:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},40826:(e,t,i)=>{"use strict";i.d(t,{default:()=>M});var r=i(95155),s=i(12115),a=i(50625),o=i(85998),n=i(52508),c=i(23664),l=i(37586),d=i(26617),h=i(46398),g=i(39347),p=i(31330),m=i(39903),u=i(47921),f=i(14606),y=i(22663),x=i(66585);let w=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-0"})(["background:white;border-radius:1rem;padding:2rem;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);"]),j=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-1"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #f5f5f4;"]),b=a.Ay.h2.withConfig({componentId:"jt-app__sc-a0eb94d4-2"})(["font-size:1.5rem;font-weight:700;color:#1c1917;display:flex;align-items:center;gap:0.5rem;margin:0;"]),S=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-3"})(["width:3rem;height:3rem;background:linear-gradient(135deg,#10b981 0%,#059669 100%);border-radius:0.75rem;display:flex;align-items:center;justify-content:center;color:white;"]),A=a.Ay.p.withConfig({componentId:"jt-app__sc-a0eb94d4-4"})(["color:#78716c;font-size:0.875rem;margin:0;"]),v=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-5"})(["margin-bottom:2rem;"]),_=a.Ay.h3.withConfig({componentId:"jt-app__sc-a0eb94d4-6"})(["font-size:1.125rem;font-weight:600;color:#44403c;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;"]),k=a.Ay.p.withConfig({componentId:"jt-app__sc-a0eb94d4-7"})(["font-size:0.875rem;color:#a8a29e;margin-bottom:1.5rem;"]),C=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-8"})(["background:#fafaf9;border:1px solid #e7e5e4;border-radius:0.75rem;padding:1rem 1.25rem;display:flex;align-items:center;justify-content:space-between;margin-bottom:0.75rem;transition:all 0.2s ease;&:hover{border-color:#d6d3d1;background:#f5f5f4;}"]),I=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-9"})(["display:flex;align-items:center;gap:1rem;flex:1;"]),E=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-10"})(["width:2.5rem;height:2.5rem;background:","15;border-radius:0.5rem;display:flex;align-items:center;justify-content:center;color:",";"],e=>e.color,e=>e.color),U=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-11"})(["flex:1;"]),D=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-12"})(["font-weight:600;color:#1c1917;margin-bottom:0.25rem;"]),N=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-13"})(["font-size:0.875rem;color:#78716c;"]),T=a.Ay.button.withConfig({componentId:"jt-app__sc-a0eb94d4-14"})(["position:relative;width:2.75rem;height:1.5rem;border-radius:9999px;border:none;cursor:pointer;transition:background-color 0.2s ease;background-color:",";&::after{content:'';position:absolute;top:0.125rem;left:",";width:1.25rem;height:1.25rem;background:white;border-radius:9999px;transition:left 0.2s ease;box-shadow:0 2px 4px rgba(0,0,0,0.1);}"],e=>e.enabled?"#ed7734":"#d6d3d1",e=>e.enabled?"calc(100% - 1.375rem)":"0.125rem"),z=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-15"})(["display:flex;align-items:center;justify-content:center;padding:3rem;"]),F=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-16"})(["width:3rem;height:3rem;border:3px solid #f5f5f4;border-top-color:#ed7734;border-radius:50%;animation:spin 0.8s linear infinite;@keyframes spin{to{transform:rotate(360deg);}}"]),L=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-17"})(["position:fixed;bottom:1.5rem;right:1.5rem;background:white;border:1px solid #e7e5e4;border-radius:0.75rem;padding:1rem 1.25rem;box-shadow:0 4px 12px rgba(0,0,0,0.1);display:flex;align-items:center;gap:0.75rem;z-index:50;"]),P=a.Ay.div.withConfig({componentId:"jt-app__sc-a0eb94d4-18"})(["width:1rem;height:1rem;border:2px solid #f5f5f4;border-top-color:#ed7734;border-radius:50%;animation:spin 0.6s linear infinite;@keyframes spin{to{transform:rotate(360deg);}}"]),R=a.Ay.span.withConfig({componentId:"jt-app__sc-a0eb94d4-19"})(["font-size:0.875rem;color:#57534e;font-weight:500;"]);function M(){let{data:e}=(0,u.Tk)(),[t,i]=(0,s.useState)(null),[a,M]=(0,s.useState)(!0),[O,B]=(0,s.useState)(!1),[G,W]=(0,s.useState)({email:!0,push:!0,sms:!1,orderUpdates:!0,promotions:!1,newsletter:!1});(0,s.useEffect)(()=>{X()},[]);let X=async()=>{try{var t;if(!(null==e||null==(t=e.user)?void 0:t.id))return void M(!1);let r=await m.DynamoDBService.getUserById(e.user.id);if(r&&r.settings)i(r.settings),W(r.settings.notifications);else{let t=p.A.createDefaultSettings(e.user.id,e.user.email||"",e.user.name||"");i(t),W(t.notifications)}}catch(e){(0,f.Qg)("Failed to load notification settings"),console.error("Failed to load notifications:",e)}finally{M(!1)}},q=async i=>{var r;if(!(null==e||null==(r=e.user)?void 0:r.id))return;let s={...G,[i]:!G[i]};W(s),B(!0);try{await m.DynamoDBService.updateUserSettings(e.user.id,{...t,notifications:s,updatedAt:new Date}),(0,f.cf)("Notification preferences updated")}catch(e){(0,f.Qg)("Failed to save notification settings"),console.error("Failed to save:",e),W(G)}finally{B(!1)}};return a?(0,r.jsxs)(w,{children:[(0,r.jsx)(x.A,{}),(0,r.jsx)(z,{children:(0,r.jsx)(F,{})})]}):(0,r.jsxs)(w,{children:[(0,r.jsx)(y.l$,{}),(0,r.jsx)(x.A,{}),(0,r.jsx)(j,{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,r.jsx)(S,{children:(0,r.jsx)(o.A,{size:24})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(b,{children:"Notification Settings"}),(0,r.jsx)(A,{children:"Configure how you receive notifications"})]})]})}),(0,r.jsxs)(v,{children:[(0,r.jsxs)(_,{children:[(0,r.jsx)(n.A,{size:20}),"Notification Channels"]}),(0,r.jsx)(k,{children:"Choose how you want to be notified"}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#3b82f6",children:(0,r.jsx)(o.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"Push Notifications"}),(0,r.jsx)(N,{children:"Receive notifications on this device"})]})]}),(0,r.jsx)(T,{enabled:G.push,onClick:()=>q("push")})]}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#f97316",children:(0,r.jsx)(c.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"Email Notifications"}),(0,r.jsx)(N,{children:"Receive updates via email"})]})]}),(0,r.jsx)(T,{enabled:G.email,onClick:()=>q("email")})]}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#10b981",children:(0,r.jsx)(l.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"SMS Notifications"}),(0,r.jsx)(N,{children:"Receive text messages for important updates"})]})]}),(0,r.jsx)(T,{enabled:G.sms,onClick:()=>q("sms")})]})]}),(0,r.jsxs)(v,{children:[(0,r.jsxs)(_,{children:[(0,r.jsx)(d.A,{size:20}),"Notification Types"]}),(0,r.jsx)(k,{children:"Select which notifications you want to receive"}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#3b82f6",children:(0,r.jsx)(h.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"Order Updates"}),(0,r.jsx)(N,{children:"Status changes, delivery updates, and confirmations"})]})]}),(0,r.jsx)(T,{enabled:G.orderUpdates,onClick:()=>q("orderUpdates")})]}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#eab308",children:(0,r.jsx)(g.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"Promotions"}),(0,r.jsx)(N,{children:"Special offers, discounts, and promotions"})]})]}),(0,r.jsx)(T,{enabled:G.promotions,onClick:()=>q("promotions")})]}),(0,r.jsxs)(C,{children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(E,{color:"#f97316",children:(0,r.jsx)(c.A,{size:20})}),(0,r.jsxs)(U,{children:[(0,r.jsx)(D,{children:"Newsletter"}),(0,r.jsx)(N,{children:"Weekly updates and company news"})]})]}),(0,r.jsx)(T,{enabled:G.newsletter,onClick:()=>q("newsletter")})]})]}),O&&(0,r.jsxs)(L,{children:[(0,r.jsx)(P,{}),(0,r.jsx)(R,{children:"Saving..."})]})]})}},46398:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},47921:(e,t,i)=>{"use strict";i.d(t,{CP:()=>d,Tk:()=>c,Z2:()=>n,cV:()=>l});var r=i(95155),s=i(58347),a=i(12115);let o=(0,a.createContext)({hasNextAuth:!0}),n=()=>(0,a.useContext)(o);function c(){try{let{hasNextAuth:e}=n();if(!e)return{data:null,status:"unauthenticated"};return(0,s.wV)()}catch(e){return{data:null,status:"loading"}}}function l(){let{hasNextAuth:e}=n();return async t=>{if(e)return(0,s.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function d(e){let{children:t}=e,[i,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),i=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let r=i.headers.get("content-type");if(i.ok&&(null==r?void 0:r.includes("application/json")))try{await i.json(),n(!0)}catch(e){n(!1)}else n(!1)}catch(e){n(!1)}})()},[]),(0,r.jsx)(o.Provider,{value:{hasNextAuth:i},children:i?(0,r.jsx)(s.CP,{children:t}):(0,r.jsx)(r.Fragment,{children:t})})}},52508:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},66585:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var r=i(95155),s=i(35626),a=i(20063);function o(){let e=(0,a.useRouter)();return(0,r.jsxs)("button",{onClick:()=>e.push("/settings"),className:"inline-flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,r.jsx)(s.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Back to Settings"})]})}},85998:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=33891)),_N_E=e.O()}]);