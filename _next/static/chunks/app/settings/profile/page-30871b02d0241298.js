(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1412],{14606:(e,t,a)=>{"use strict";a.d(t,{Cs:()=>s,Qg:()=>o,Te:()=>r,UW:()=>l,cf:()=>n});var i=a(22663);let r=e=>{i.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},o=e=>{i.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},n=e=>{(0,i.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},s=e=>i.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),l=e=>{i.Ay.dismiss(e)}},20508:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21873:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},23664:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},26253:(e,t,a)=>{"use strict";a.d(t,{default:()=>B});var i=a(95155),r=a(12115),o=a(50625),n=a(20508),s=a(90799),l=a(65229),c=a(46046),d=a(23664),p=a(69141),g=a(21873);let h=(0,a(71847).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=a(31330),m=a(39903),f=a(47921),y=a(14606),x=a(22663),w=a(66585);let v=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-0"})(["background:white;border-radius:1rem;padding:2rem;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);"]),S=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-1"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #f5f5f4;"]),b=o.Ay.h2.withConfig({componentId:"jt-app__sc-51e80c24-2"})(["font-size:1.5rem;font-weight:700;color:#1c1917;display:flex;align-items:center;gap:0.5rem;margin:0;"]),j=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-3"})(["width:3rem;height:3rem;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);border-radius:0.75rem;display:flex;align-items:center;justify-content:center;color:white;"]),A=o.Ay.p.withConfig({componentId:"jt-app__sc-51e80c24-4"})(["color:#78716c;font-size:0.875rem;margin:0;"]),_=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-5"})(["margin-bottom:2rem;"]),C=o.Ay.h3.withConfig({componentId:"jt-app__sc-51e80c24-6"})(["font-size:1.125rem;font-weight:600;color:#44403c;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;"]),k=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-7"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:1.5rem;"]),I=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-8"})(["display:flex;flex-direction:column;gap:0.5rem;"]),E=o.Ay.label.withConfig({componentId:"jt-app__sc-51e80c24-9"})(["font-size:0.875rem;font-weight:500;color:#57534e;display:flex;align-items:center;gap:0.5rem;"]),z=o.Ay.input.withConfig({componentId:"jt-app__sc-51e80c24-10"})(["width:100%;padding:0.625rem 0.875rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;transition:all 0.2s ease;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}&:disabled{background:#f5f5f4;color:#a8a29e;cursor:not-allowed;}"]),D=o.Ay.textarea.withConfig({componentId:"jt-app__sc-51e80c24-11"})(["width:100%;padding:0.625rem 0.875rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;resize:vertical;min-height:100px;font-family:inherit;transition:all 0.2s ease;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}&:disabled{background:#f5f5f4;color:#a8a29e;cursor:not-allowed;}"]),T=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-12"})(["background:linear-gradient(135deg,#dbeafe 0%,#bfdbfe 100%);border:1px solid #93c5fd;border-radius:0.75rem;padding:1rem;display:flex;align-items:start;gap:0.75rem;"]),U=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-13"})(["flex:1;"]),F=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-14"})(["font-weight:600;color:#1e3a8a;margin-bottom:0.25rem;"]),L=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-15"})(["font-size:0.875rem;color:#1e40af;"]),P=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-16"})(["display:flex;gap:0.75rem;justify-content:flex-end;"]),N=o.Ay.button.withConfig({componentId:"jt-app__sc-51e80c24-17"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.625rem 1.25rem;border-radius:0.5rem;font-weight:600;font-size:0.875rem;cursor:pointer;transition:all 0.2s ease;border:none;"," "," "," &:disabled{opacity:0.5;cursor:not-allowed;transform:none !important;}"],e=>"primary"===e.variant&&"\n    background: linear-gradient(135deg, #ed7734 0%, #de5d20 100%);\n    color: white;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(237, 119, 52, 0.3);\n    }\n  ",e=>"secondary"===e.variant&&"\n    background: #f5f5f4;\n    color: #57534e;\n\n    &:hover {\n      background: #e7e5e4;\n    }\n  ",e=>"success"===e.variant&&"\n    background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n    color: white;\n\n    &:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);\n    }\n  "),M=o.Ay.p.withConfig({componentId:"jt-app__sc-51e80c24-18"})(["font-size:0.75rem;color:#a8a29e;margin:0.25rem 0 0 0;"]),R=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-19"})(["display:flex;align-items:center;justify-content:center;padding:3rem;"]),O=o.Ay.div.withConfig({componentId:"jt-app__sc-51e80c24-20"})(["width:3rem;height:3rem;border:3px solid #f5f5f4;border-top-color:#ed7734;border-radius:50%;animation:spin 0.8s linear infinite;@keyframes spin{to{transform:rotate(360deg);}}"]);function B(){let{data:e}=(0,f.Tk)(),[t,a]=(0,r.useState)(null),[o,B]=(0,r.useState)(!0),[G,W]=(0,r.useState)(!1),[Y,X]=(0,r.useState)(!1),[V,H]=(0,r.useState)({name:"",email:"",phone:"",bio:"",location:"",role:"customer"});(0,r.useEffect)(()=>{K()},[]);let K=async()=>{try{var t,i,r;if(!(null==e||null==(t=e.user)?void 0:t.id))return void B(!1);let o=await m.DynamoDBService.getUserById(e.user.id);if(o){let e=o.settings||u.A.createDefaultSettings(o.id,o.email,o.name);a(e),H({name:o.name||"",email:o.email||"",phone:o.phone||"",bio:(null==(i=e.profile)?void 0:i.bio)||"",location:(null==(r=e.profile)?void 0:r.location)||"",role:o.role})}}catch(e){(0,y.Qg)("Failed to load profile"),console.error("Failed to load profile:",e)}finally{B(!1)}},q=async()=>{var a;if(!(null==e||null==(a=e.user)?void 0:a.id))return;let i=(0,y.Cs)("Saving profile changes...");W(!0);try{let a={name:V.name,phone:V.phone,settings:{...t,profile:{...null==t?void 0:t.profile,...V,updatedAt:new Date},updatedAt:new Date}};await m.DynamoDBService.updateUser(e.user.id,a),(0,y.UW)(i),(0,y.Te)("Profile updated successfully!"),X(!1),await K()}catch(e){(0,y.UW)(i),(0,y.Qg)("Failed to save profile"),console.error("Failed to save profile:",e)}finally{W(!1)}};return o?(0,i.jsxs)(v,{children:[(0,i.jsx)(w.A,{}),(0,i.jsx)(R,{children:(0,i.jsx)(O,{})})]}):(0,i.jsxs)(v,{children:[(0,i.jsx)(x.l$,{}),(0,i.jsx)(w.A,{}),(0,i.jsxs)(S,{children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)(j,{children:(0,i.jsx)(n.A,{size:24})}),(0,i.jsxs)("div",{children:[(0,i.jsx)(b,{children:"Profile Settings"}),(0,i.jsx)(A,{children:"Manage your account information"})]})]}),Y?(0,i.jsxs)(P,{children:[(0,i.jsxs)(N,{variant:"secondary",onClick:()=>{(null==t?void 0:t.profile)&&H({name:t.profile.name||"",email:t.profile.email||"",phone:t.profile.phone||"",bio:t.profile.bio||"",location:t.profile.location||"",role:t.profile.role||"customer"}),X(!1)},children:[(0,i.jsx)(l.A,{size:16}),"Cancel"]}),(0,i.jsxs)(N,{variant:"success",onClick:q,disabled:G,children:[(0,i.jsx)(c.A,{size:16}),G?"Saving...":"Save Changes"]})]}):(0,i.jsxs)(N,{variant:"primary",onClick:()=>X(!0),children:[(0,i.jsx)(s.A,{size:16}),"Edit Profile"]})]}),(0,i.jsxs)(_,{children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(n.A,{size:20}),"Personal Information"]}),(0,i.jsxs)(k,{children:[(0,i.jsxs)(I,{children:[(0,i.jsxs)(E,{children:[(0,i.jsx)(n.A,{size:14}),"Full Name"]}),(0,i.jsx)(z,{type:"text",value:V.name,onChange:e=>H({...V,name:e.target.value}),disabled:!Y,placeholder:"Enter your full name"})]}),(0,i.jsxs)(I,{children:[(0,i.jsxs)(E,{children:[(0,i.jsx)(d.A,{size:14}),"Email Address"]}),(0,i.jsx)(z,{type:"email",value:V.email,disabled:!0}),(0,i.jsx)(M,{children:"Email cannot be changed"})]}),(0,i.jsxs)(I,{children:[(0,i.jsxs)(E,{children:[(0,i.jsx)(p.A,{size:14}),"Phone Number"]}),(0,i.jsx)(z,{type:"tel",value:V.phone,onChange:e=>H({...V,phone:e.target.value}),disabled:!Y,placeholder:"(555) 123-4567"})]}),(0,i.jsxs)(I,{children:[(0,i.jsxs)(E,{children:[(0,i.jsx)(g.A,{size:14}),"Location"]}),(0,i.jsx)(z,{type:"text",value:V.location,onChange:e=>H({...V,location:e.target.value}),disabled:!Y,placeholder:"City, State"})]})]}),(0,i.jsxs)(I,{children:[(0,i.jsxs)(E,{children:[(0,i.jsx)(h,{size:14}),"Bio"]}),(0,i.jsx)(D,{value:V.bio,onChange:e=>H({...V,bio:e.target.value}),disabled:!Y,placeholder:"Tell us about yourself..."})]})]}),(0,i.jsxs)(T,{children:[(0,i.jsx)(n.A,{size:20,style:{color:"#1e3a8a",flexShrink:0}}),(0,i.jsxs)(U,{children:[(0,i.jsx)(F,{children:"Account Role"}),(0,i.jsxs)(L,{children:["Your current role: ",(0,i.jsx)("strong",{style:{textTransform:"capitalize"},children:V.role})]})]})]})]})}},31330:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var i=a(39903);class r{static getLocalStorageKey(e){return"".concat(this.LOCAL_STORAGE_PREFIX).concat(e)}static loadFromLocalStorage(e){if(!window.localStorage)return null;try{let t=window.localStorage.getItem(this.getLocalStorageKey(e));if(!t)return null;let a=JSON.parse(t);return{...a,createdAt:a.createdAt?new Date(a.createdAt):new Date,updatedAt:a.updatedAt?new Date(a.updatedAt):new Date}}catch(e){return console.warn("[SettingsService] Failed to read settings from localStorage:",e),null}}static saveToLocalStorage(e,t){if(window.localStorage)try{window.localStorage.setItem(this.getLocalStorageKey(e),JSON.stringify(t))}catch(e){console.warn("[SettingsService] Failed to persist settings to localStorage:",e)}}static removeFromLocalStorage(e){if(window.localStorage)try{window.localStorage.removeItem(this.getLocalStorageKey(e))}catch(e){console.warn("[SettingsService] Failed to remove settings from localStorage:",e)}}static async getUserSettings(e){try{let t="".concat(this.SETTINGS_PREFIX).concat(e);if(this.memoryCache.has(t))return console.log("[SettingsService] Returning from cache:",e),this.memoryCache.get(t);let a=this.loadFromLocalStorage(e);if(a)return this.memoryCache.set(t,a),console.log("[SettingsService] Returning from localStorage:",e),a;let r=await i.DynamoDBService.getUserByEmail(e);if(r&&r.settings){let a=r.settings;return this.memoryCache.set(t,a),this.saveToLocalStorage(e,a),a}return null}catch(e){return console.error("[SettingsService] Error getting user settings:",e),null}}static createDefaultSettings(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"User";return{userId:e,profile:{name:a,email:t,phone:"",role:"customer",bio:"",location:""},notifications:{email:!0,push:!0,sms:!1,orderUpdates:!0,promotions:!1,newsletter:!1},security:{twoFactorEnabled:!1,sessionTimeout:30,biometricEnabled:!1},privacy:{locationEnabled:!1,dataCollection:!0},preferences:{language:"en",timezone:"America/New_York",dateFormat:"MM/DD/YYYY",timeFormat:"12h",currency:"USD"},createdAt:new Date,updatedAt:new Date}}static async updateUserSettings(e,t){try{let a=await this.getUserSettings(e);a||(a=this.createDefaultSettings(e,e));let r={...a,...t,userId:e,updatedAt:new Date},o="".concat(this.SETTINGS_PREFIX).concat(e);this.memoryCache.set(o,r),this.saveToLocalStorage(e,r);try{let t=await i.DynamoDBService.getUserByEmail(e);t&&await i.DynamoDBService.updateUser(t.id,{settings:r})}catch(e){console.log("[SettingsService] Database update failed, using memory cache:",e)}return console.log("[SettingsService] Settings updated:",e),r}catch(e){return console.error("[SettingsService] Error updating settings:",e),null}}static async updateProfile(e,t){let a=await this.getUserSettings(e);return a?this.updateUserSettings(e,{profile:{...a.profile,...t}}):null}static async updateNotifications(e,t){let a=await this.getUserSettings(e);return a?this.updateUserSettings(e,{notifications:{...a.notifications,...t}}):null}static async updateSecurity(e,t){let a=await this.getUserSettings(e);return a?this.updateUserSettings(e,{security:{...a.security,...t}}):null}static async updatePrivacy(e,t){let a=await this.getUserSettings(e);return a?this.updateUserSettings(e,{privacy:{...a.privacy,...t}}):null}static async updatePreferences(e,t){let a=await this.getUserSettings(e);return a?this.updateUserSettings(e,{preferences:{...a.preferences,...t}}):null}static clearCache(e){if(e){let t="".concat(this.SETTINGS_PREFIX).concat(e);this.memoryCache.delete(t),this.removeFromLocalStorage(e)}else if(this.memoryCache.clear(),window.localStorage)for(let e=window.localStorage.length-1;e>=0;e-=1){let t=window.localStorage.key(e);t&&t.startsWith(this.LOCAL_STORAGE_PREFIX)&&window.localStorage.removeItem(t)}}static async initializeSettings(e,t,a,i){let r=await this.getUserSettings(e);return r||((r=this.createDefaultSettings(e,t,a)).platform=i,await this.updateUserSettings(e,r)),r}}r.SETTINGS_PREFIX="settings_",r.memoryCache=new Map,r.LOCAL_STORAGE_PREFIX="mobile_settings_";let o=r},35626:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46046:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},47921:(e,t,a)=>{"use strict";a.d(t,{CP:()=>d,Tk:()=>l,Z2:()=>s,cV:()=>c});var i=a(95155),r=a(58347),o=a(12115);let n=(0,o.createContext)({hasNextAuth:!0}),s=()=>(0,o.useContext)(n);function l(){try{let{hasNextAuth:e}=s();if(!e)return{data:null,status:"unauthenticated"};return(0,r.wV)()}catch(e){return{data:null,status:"loading"}}}function c(){let{hasNextAuth:e}=s();return async t=>{if(e)return(0,r.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function d(e){let{children:t}=e,[a,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),a=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let i=a.headers.get("content-type");if(a.ok&&(null==i?void 0:i.includes("application/json")))try{await a.json(),s(!0)}catch(e){s(!1)}else s(!1)}catch(e){s(!1)}})()},[]),(0,i.jsx)(n.Provider,{value:{hasNextAuth:a},children:a?(0,i.jsx)(r.CP,{children:t}):(0,i.jsx)(i.Fragment,{children:t})})}},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},66585:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(95155),r=a(35626),o=a(20063);function n(){let e=(0,o.useRouter)();return(0,i.jsxs)("button",{onClick:()=>e.push("/settings"),className:"inline-flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,i.jsx)(r.A,{className:"w-4 h-4"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Back to Settings"})]})}},69141:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},90799:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(71847).A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},97349:(e,t,a)=>{Promise.resolve().then(a.bind(a,26253))}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=97349)),_N_E=e.O()}]);