(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7311],{14606:(e,t,r)=>{"use strict";r.d(t,{Cs:()=>s,Qg:()=>n,Te:()=>a,UW:()=>d,cf:()=>o});var i=r(22663);let a=e=>{i.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},n=e=>{i.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},o=e=>{(0,i.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},s=e=>i.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),d=e=>{i.Ay.dismiss(e)}},26983:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},40294:(e,t,r)=>{"use strict";r.d(t,{kt:()=>p,lV:()=>m,p8:()=>u});var i=r(95155);r(12115);var a=r(50625);let n=(0,a.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),o=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],n,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:r}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(r.colors.secondary[600],";");default:return"color: ".concat(r.colors.primary[600],";")}}),s=a.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),d=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),c=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),l=a.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),p=e=>{let{size:t="md",color:r="orange",className:a=""}=e;return(0,i.jsx)(o,{$size:t,$color:r,className:a,children:(0,i.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},m=e=>{let{isLoading:t,children:r,onClick:a,type:n="button",className:o="",disabled:d=!1}=e;return(0,i.jsxs)(s,{type:n,onClick:a,disabled:t||d,className:o,children:[t&&(0,i.jsx)(p,{size:"sm",color:"white"}),(0,i.jsx)("span",{children:r})]})},u=e=>{let{isLoading:t,message:r="Loading...",children:a}=e;return(0,i.jsxs)(d,{children:[a,t&&(0,i.jsx)(c,{children:(0,i.jsxs)(l,{children:[(0,i.jsx)(p,{size:"lg"}),(0,i.jsx)("p",{children:r})]})})]})}},42529:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},47921:(e,t,r)=>{"use strict";r.d(t,{CP:()=>l,Tk:()=>d,Z2:()=>s,cV:()=>c});var i=r(95155),a=r(58347),n=r(12115);let o=(0,n.createContext)({hasNextAuth:!0}),s=()=>(0,n.useContext)(o);function d(){try{let{hasNextAuth:e}=s();if(!e)return{data:null,status:"unauthenticated"};return(0,a.wV)()}catch(e){return{data:null,status:"loading"}}}function c(){let{hasNextAuth:e}=s();return async t=>{if(e)return(0,a.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function l(e){let{children:t}=e,[r,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),r=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let i=r.headers.get("content-type");if(r.ok&&(null==i?void 0:i.includes("application/json")))try{await r.json(),s(!0)}catch(e){s(!1)}else s(!1)}catch(e){s(!1)}})()},[]),(0,i.jsx)(o.Provider,{value:{hasNextAuth:r},children:r?(0,i.jsx)(a.CP,{children:t}):(0,i.jsx)(i.Fragment,{children:t})})}},52056:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},58396:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var i=r(95155),a=r(12115),n=r(20063),o=r(47921),s=r(50625),d=r(26983),c=r(42529),l=r(78874),p=r(52056),m=r(35626),u=r(71847);let h=(0,u.A)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),g=(0,u.A)("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);var f=r(40294),y=r(14606),x=r(22663),j=r(39903);let b=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-0"})(["min-height:100vh;background:linear-gradient(135deg,#dc2626 0%,#991b1b 100%);padding:2rem;"]),v=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-1"})(["max-width:1200px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 20px 60px rgba(0,0,0,0.1);"]),w=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-2"})(["margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #e7e5e4;"]),A=s.Ay.button.withConfig({componentId:"jt-app__sc-a2d35892-3"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:#f5f5f4;border:none;border-radius:0.5rem;color:#44403c;font-weight:500;cursor:pointer;margin-bottom:1rem;transition:all 0.2s ease;&:hover{background:#e7e5e4;}svg{width:18px;height:18px;}"]),k=s.Ay.h1.withConfig({componentId:"jt-app__sc-a2d35892-4"})(["font-size:2rem;color:#1c1917;margin:0 0 0.5rem 0;display:flex;align-items:center;gap:0.75rem;svg{color:#dc2626;}"]),_=s.Ay.p.withConfig({componentId:"jt-app__sc-a2d35892-5"})(["color:#78716c;margin:0;"]),C=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-6"})(["display:grid;gap:1rem;"]),I=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-7"})(["padding:1.5rem;background:#fafaf9;border:1px solid #e7e5e4;border-radius:0.75rem;transition:all 0.2s ease;&:hover{border-color:#dc2626;box-shadow:0 2px 8px rgba(220,38,38,0.1);}"]),z=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-8"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;"]),N=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-9"})(["font-weight:700;color:#1c1917;font-size:1rem;"]),T=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-10"})(["padding:0.25rem 0.75rem;border-radius:0.5rem;font-size:0.875rem;font-weight:600;display:flex;align-items:center;gap:0.5rem;background:",";color:",";svg{width:16px;height:16px;}"],e=>{switch(e.$status){case"pending":return"#fef3c7";case"approved":return"#dcfce7";case"rejected":return"#fee2e2";default:return"#f3f4f6"}},e=>{switch(e.$status){case"pending":return"#d97706";case"approved":return"#16a34a";case"rejected":return"#dc2626";default:return"#6b7280"}}),S=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-11"})(["font-size:0.875rem;color:#78716c;div{margin-bottom:0.5rem;&:last-child{margin-bottom:0;}}strong{color:#44403c;}"]),F=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-12"})(["display:flex;gap:0.5rem;margin-top:1rem;padding-top:1rem;border-top:1px solid #e7e5e4;"]),W=s.Ay.button.withConfig({componentId:"jt-app__sc-a2d35892-13"})(["flex:1;padding:0.5rem 1rem;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s ease;background:",";color:white;&:hover{opacity:0.9;transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-started;}svg{width:16px;height:16px;}"],e=>"approve"===e.$variant?"linear-gradient(135deg, #16a34a 0%, #15803d 100%)":"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)"),D=s.Ay.div.withConfig({componentId:"jt-app__sc-a2d35892-14"})(["text-align:center;padding:3rem 1.5rem;color:#78716c;svg{width:64px;height:64px;margin-bottom:1rem;color:#d6d3d1;}h3{font-size:1.25rem;font-weight:600;color:#44403c;margin:0 0 0.5rem 0;}p{margin:0;}"]),E=s.Ay.button.withConfig({componentId:"jt-app__sc-a2d35892-15"})(["padding:0.75rem 1.5rem;background:linear-gradient(135deg,#dc2626 0%,#991b1b 100%);color:white;border:none;border-radius:0.5rem;font-weight:600;cursor:pointer;margin-top:1rem;transition:all 0.2s ease;&:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(220,38,38,0.3);}"]);function M(){let e=(0,n.useRouter)(),{data:t,status:r}=(0,o.Tk)(),[s,u]=(0,a.useState)([]),[M,$]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if("unauthenticated"===r)return void e.push("/auth/signin");B()},[r,e]);let B=async()=>{try{var e;$(!0);let r=(null==t||null==(e=t.user)?void 0:e.businessId)||"default",i=(await j.DynamoDBService.getFraudClaims(r)).map(e=>({id:e.id,orderNumber:e.orderNumber,status:e.status,reason:e.claimType.replace(/_/g," "),submittedAt:e.createdAt.toISOString(),description:e.description}));u(i)}catch(e){console.error("Error loading fraud claims:",e),(0,y.Qg)("Failed to load fraud claims")}finally{$(!1)}},L=async e=>{if(!confirm("Are you sure you want to approve this fraud claim?"))return;let r=(0,y.Cs)("Approving claim...");try{var i;await j.DynamoDBService.resolveFraudClaim(e,{status:"resolved_fraud",resolutionNotes:"Claim approved - fraud confirmed",resolvedBy:(null==t||null==(i=t.user)?void 0:i.id)||"admin",actionTaken:"Customer refunded, driver flagged"}),(0,y.UW)(r),(0,y.Te)("Fraud claim approved successfully"),await B()}catch(e){(0,y.UW)(r),(0,y.Qg)("Failed to approve claim"),console.error("Error approving claim:",e)}},V=async e=>{if(!confirm("Are you sure you want to reject this fraud claim?"))return;let r=(0,y.Cs)("Rejecting claim...");try{var i;await j.DynamoDBService.resolveFraudClaim(e,{status:"resolved_legitimate",resolutionNotes:"Claim rejected - no fraud detected",resolvedBy:(null==t||null==(i=t.user)?void 0:i.id)||"admin",actionTaken:"Claim dismissed, order was legitimate"}),(0,y.UW)(r),(0,y.Te)("Fraud claim rejected"),await B()}catch(e){(0,y.UW)(r),(0,y.Qg)("Failed to reject claim"),console.error("Error rejecting claim:",e)}};return"loading"===r||M?(0,i.jsx)(b,{children:(0,i.jsx)(f.p8,{isLoading:!0,message:"Loading fraud claims...",children:(0,i.jsx)("div",{})})}):(0,i.jsxs)(b,{children:[(0,i.jsx)(x.l$,{}),(0,i.jsxs)(v,{children:[(0,i.jsxs)(w,{children:[(0,i.jsxs)(A,{onClick:()=>e.back(),children:[(0,i.jsx)(m.A,{}),(0,i.jsx)("span",{children:"Back"})]}),(0,i.jsxs)(k,{children:[(0,i.jsx)(p.A,{}),"Fraud Claims"]}),(0,i.jsx)(_,{children:"View and manage fraud claims for orders"})]}),s.length>0?(0,i.jsx)(C,{children:s.map(e=>(0,i.jsxs)(I,{children:[(0,i.jsxs)(z,{children:[(0,i.jsxs)(N,{children:["Claim #",e.id]}),(0,i.jsxs)(T,{$status:e.status,children:[(e=>{switch(e){case"pending":return(0,i.jsx)(d.A,{});case"approved":return(0,i.jsx)(c.A,{});case"rejected":return(0,i.jsx)(l.A,{});default:return(0,i.jsx)(p.A,{})}})(e.status),e.status]})]}),(0,i.jsxs)(S,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Order:"})," #",e.orderNumber]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Reason:"})," ",e.reason]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Submitted:"})," ",new Date(e.submittedAt).toLocaleDateString()]})]}),"pending"===e.status&&(0,i.jsxs)(F,{children:[(0,i.jsxs)(W,{$variant:"approve",onClick:()=>L(e.id),children:[(0,i.jsx)(h,{}),"Approve"]}),(0,i.jsxs)(W,{$variant:"reject",onClick:()=>V(e.id),children:[(0,i.jsx)(g,{}),"Reject"]})]})]},e.id))}):(0,i.jsxs)(D,{children:[(0,i.jsx)(p.A,{}),(0,i.jsx)("h3",{children:"No Claims Filed"}),(0,i.jsx)("p",{children:"There are no fraud claims to display."}),(0,i.jsx)(E,{onClick:()=>e.push("/fraud-claims/create"),children:"File New Claim"})]})]})]})}},59669:(e,t,r)=>{Promise.resolve().then(r.bind(r,58396))},78874:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});let i=(0,r(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=59669)),_N_E=e.O()}]);