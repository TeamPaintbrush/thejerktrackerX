(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{3263:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>N});var r=i(95155),o=i(12115),n=i(20063),a=i(47921),s=i(50625),c=i(35626),l=i(91761),d=i(10512),p=i(40294),h=i(39903),f=i(14606),u=i(22663);let m=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-0"})(["min-height:100vh;background:#fafaf9;padding:2rem;"]),g=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-1"})(["max-width:1200px;margin:0 auto;background:white;border-radius:1rem;padding:2rem;box-shadow:0 1px 3px rgba(0,0,0,0.05);border:1px solid #e7e5e4;"]),b=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-2"})(["margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #e7e5e4;"]),y=s.Ay.button.withConfig({componentId:"jt-app__sc-5fafb2cb-3"})(["display:inline-flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;background:#f5f5f4;border:none;border-radius:0.5rem;color:#44403c;font-weight:500;cursor:pointer;margin-bottom:1rem;transition:all 0.2s ease;&:hover{background:#e7e5e4;}svg{width:18px;height:18px;}"]),x=s.Ay.h1.withConfig({componentId:"jt-app__sc-5fafb2cb-4"})(["font-size:2rem;color:#1c1917;margin:0 0 0.5rem 0;"]),j=s.Ay.p.withConfig({componentId:"jt-app__sc-5fafb2cb-5"})(["color:#78716c;margin:0;"]),w=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-6"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem;"]),v=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-7"})(["padding:1.5rem;background:#fafaf9;border:1px solid #e7e5e4;border-radius:0.75rem;transition:all 0.2s ease;&:hover{border-color:#ed7734;box-shadow:0 2px 8px rgba(237,119,52,0.1);}"]),_=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-8"})(["display:flex;justify-content:space-between;align-items:start;margin-bottom:1rem;"]),A=s.Ay.h3.withConfig({componentId:"jt-app__sc-5fafb2cb-9"})(["font-size:1.125rem;color:#1c1917;margin:0;"]),k=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-10"})(["display:flex;align-items:center;gap:0.25rem;font-size:1.125rem;font-weight:700;color:#ed7734;svg{width:16px;height:16px;}"]),C=s.Ay.p.withConfig({componentId:"jt-app__sc-5fafb2cb-11"})(["color:#78716c;margin:0 0 1rem 0;font-size:0.9375rem;"]),I=s.Ay.div.withConfig({componentId:"jt-app__sc-5fafb2cb-12"})(["padding:0.25rem 0.75rem;border-radius:0.5rem;font-size:0.875rem;font-weight:600;display:inline-block;margin-bottom:1rem;background:",";color:",";"],e=>e.$available?"#dcfce7":"#fee2e2",e=>e.$available?"#16a34a":"#dc2626"),z=s.Ay.button.withConfig({componentId:"jt-app__sc-5fafb2cb-13"})(["width:100%;padding:0.75rem;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);color:white;border:none;border-radius:0.5rem;font-weight:600;font-size:0.9375rem;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:0.5rem;transition:all 0.2s ease;&:hover:not(:disabled){opacity:0.9;transform:translateY(-1px);}&:disabled{opacity:0.5;cursor:not-allowed;}svg{width:18px;height:18px;}"]);function N(){let e=(0,n.useRouter)(),{data:t,status:i}=(0,a.Tk)(),[s,N]=(0,o.useState)(!0),[S,T]=(0,o.useState)([]);(0,o.useEffect)(()=>{var r;return"unauthenticated"===i?void e.push("/auth/signin"):(null==t||null==(r=t.user)?void 0:r.role)!=="customer"?void e.push("/customer"):void E()},[i,t,e]);let E=async()=>{try{var e,i;N(!0);let r=(null==t||null==(e=t.user)?void 0:e.businessId)||(null==t||null==(i=t.user)?void 0:i.id)||"default-business",o=(await h.DynamoDBService.getMenuItems(r)).map(e=>({id:e.id,name:e.name,description:e.description||"",price:e.price,available:!1!==e.available}));T(o)}catch(e){console.error("Error loading menu:",e),(0,f.Qg)("Failed to load menu items")}finally{N(!1)}};return"loading"===i||s?(0,r.jsx)(m,{children:(0,r.jsx)(p.p8,{isLoading:!0,message:"Loading menu...",children:(0,r.jsx)("div",{})})}):(0,r.jsxs)(m,{children:[(0,r.jsx)(u.l$,{}),(0,r.jsxs)(g,{children:[(0,r.jsxs)(b,{children:[(0,r.jsxs)(y,{onClick:()=>e.push("/customer"),children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("span",{children:"Back to Dashboard"})]}),(0,r.jsx)(x,{children:"Our Menu"}),(0,r.jsx)(j,{children:"Browse our delicious Caribbean dishes"})]}),(0,r.jsx)(w,{children:S.map(t=>(0,r.jsxs)(v,{children:[(0,r.jsxs)(_,{children:[(0,r.jsx)(A,{children:t.name}),(0,r.jsxs)(k,{children:[(0,r.jsx)(l.A,{}),t.price.toFixed(2)]})]}),(0,r.jsx)(C,{children:t.description}),(0,r.jsx)(I,{$available:t.available,children:t.available?"Available":"Out of Stock"}),(0,r.jsxs)(z,{disabled:!t.available,onClick:()=>{e.push("/orders/create?item=".concat(t.id))},children:[(0,r.jsx)(d.A,{}),t.available?"Order Now":"Unavailable"]})]},t.id))})]})]})}},10512:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},14606:(e,t,i)=>{"use strict";i.d(t,{Cs:()=>s,Qg:()=>n,Te:()=>o,UW:()=>c,cf:()=>a});var r=i(22663);let o=e=>{r.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},n=e=>{r.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},a=e=>{(0,r.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},s=e=>r.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),c=e=>{r.Ay.dismiss(e)}},35626:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},40294:(e,t,i)=>{"use strict";i.d(t,{kt:()=>p,lV:()=>h,p8:()=>f});var r=i(95155);i(12115);var o=i(50625);let n=(0,o.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),a=o.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],n,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:i}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(i.colors.secondary[600],";");default:return"color: ".concat(i.colors.primary[600],";")}}),s=o.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),c=o.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),l=o.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),d=o.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),p=e=>{let{size:t="md",color:i="orange",className:o=""}=e;return(0,r.jsx)(a,{$size:t,$color:i,className:o,children:(0,r.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},h=e=>{let{isLoading:t,children:i,onClick:o,type:n="button",className:a="",disabled:c=!1}=e;return(0,r.jsxs)(s,{type:n,onClick:o,disabled:t||c,className:a,children:[t&&(0,r.jsx)(p,{size:"sm",color:"white"}),(0,r.jsx)("span",{children:i})]})},f=e=>{let{isLoading:t,message:i="Loading...",children:o}=e;return(0,r.jsxs)(c,{children:[o,t&&(0,r.jsx)(l,{children:(0,r.jsxs)(d,{children:[(0,r.jsx)(p,{size:"lg"}),(0,r.jsx)("p",{children:i})]})})]})}},47921:(e,t,i)=>{"use strict";i.d(t,{CP:()=>d,Tk:()=>c,Z2:()=>s,cV:()=>l});var r=i(95155),o=i(58347),n=i(12115);let a=(0,n.createContext)({hasNextAuth:!0}),s=()=>(0,n.useContext)(a);function c(){try{let{hasNextAuth:e}=s();if(!e)return{data:null,status:"unauthenticated"};return(0,o.wV)()}catch(e){return{data:null,status:"loading"}}}function l(){let{hasNextAuth:e}=s();return async t=>{if(e)return(0,o.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function d(e){let{children:t}=e,[i,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),i=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let r=i.headers.get("content-type");if(i.ok&&(null==r?void 0:r.includes("application/json")))try{await i.json(),s(!0)}catch(e){s(!1)}else s(!1)}catch(e){s(!1)}})()},[]),(0,r.jsx)(a.Provider,{value:{hasNextAuth:i},children:i?(0,r.jsx)(o.CP,{children:t}):(0,r.jsx)(r.Fragment,{children:t})})}},74940:(e,t,i)=>{Promise.resolve().then(i.bind(i,3263))},91761:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{e.O(0,[2207,7646,8347,5572,9903,8441,1255,7358],()=>e(e.s=74940)),_N_E=e.O()}]);