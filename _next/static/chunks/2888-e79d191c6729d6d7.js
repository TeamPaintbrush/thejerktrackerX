"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2888],{14606:(e,t,o)=>{o.d(t,{Cs:()=>d,Qg:()=>n,Te:()=>i,UW:()=>s,cf:()=>a});var r=o(22663);let i=e=>{r.Ay.success(e,{duration:4e3,position:"top-right",style:{background:"#16a34a",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#16a34a"}})},n=e=>{r.Ay.error(e,{duration:5e3,position:"top-right",style:{background:"#dc2626",color:"#fff",fontWeight:600},iconTheme:{primary:"#fff",secondary:"#dc2626"}})},a=e=>{(0,r.Ay)(e,{duration:4e3,position:"top-right",icon:"ℹ️",style:{background:"#3b82f6",color:"#fff",fontWeight:600}})},d=e=>r.Ay.loading(e,{position:"top-right",style:{background:"#f59e0b",color:"#fff",fontWeight:600}}),s=e=>{r.Ay.dismiss(e)}},21554:(e,t,o)=>{o.d(t,{$n:()=>d,DZ:()=>s,EY:()=>c,Zp:()=>a,kH:()=>i,mc:()=>n,so:()=>l,xA:()=>m});var r=o(50625);let i=(0,r.DU)(['*{box-sizing:border-box;margin:0;padding:0;}html{font-family:\'Inter\',-apple-system,BlinkMacSystemFont,\'Segoe UI\',Roboto,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;}html,body{width:100%;max-width:100vw;overflow-x:hidden;height:100%;min-height:100vh;min-height:-webkit-fill-available;}body{background:linear-gradient(135deg,#fef7ee 0%,#fafaf9 100%);color:#1c1917;line-height:1.5;font-size:1rem;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;touch-action:manipulation;}a{color:inherit;text-decoration:none;transition:all 200ms ease;&:hover{opacity:0.8;}}button{font-family:inherit;cursor:pointer;border:none;background:none;transition:all 200ms ease;&:hover:not(:disabled){transform:translateY(-1px);}&:active:not(:disabled){transform:translateY(0);}&:disabled{cursor:not-allowed;opacity:0.5;}}input,textarea,select{font-family:inherit;transition:all 200ms ease;}*:focus-visible{outline:2px solid #ed7734;outline-offset:3px;border-radius:4px;}::-webkit-scrollbar{width:10px;}::-webkit-scrollbar-track{background:linear-gradient(180deg,#fef7ee 0%,#f5f5f4 100%);}::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ed7734 0%,#f19558 100%);border-radius:9999px;border:2px solid #fef7ee;&:hover{background:linear-gradient(180deg,#de5d20 0%,#ed7734 100%);}}@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}@keyframes slideInBottom{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}@keyframes shimmer{0%{transform:translateX(-100%);}100%{transform:translateX(100%);}}@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.7;}}@keyframes glow{0%,100%{box-shadow:0 0 20px rgba(237,119,52,0.3);}50%{box-shadow:0 0 30px rgba(237,119,52,0.5);}}@media (max-width:768px){html{height:-webkit-fill-available;}body{min-height:-webkit-fill-available;font-size:0.9rem;}*{max-width:100vw;}div,section,main,article,aside,header,footer,nav{max-width:100%;overflow-x:hidden;}.container,[class*="container"]{padding-left:1rem !important;padding-right:1rem !important;max-width:100% !important;}img,video,canvas,svg{max-width:100%;height:auto;}table{width:100%;display:block;overflow-x:auto;white-space:nowrap;}input,textarea,select,button{max-width:100%;font-size:1rem;}button,a,[role="button"],input[type="submit"],input[type="button"]{min-height:44px;min-width:44px;padding:0.75rem 1rem;}.flex,[class*="flex"]{flex-direction:column !important;align-items:stretch !important;}.grid,[class*="grid"]{grid-template-columns:1fr !important;gap:1rem !important;}}@media (orientation:portrait) and (max-width:768px){.main-content,main,[role="main"]{padding:1rem;max-width:100vw;min-height:calc(100vh - 120px);}nav,.navigation{flex-direction:column;width:100%;}.card,[class*="card"]{margin:0.5rem 0;border-radius:0.5rem;box-shadow:0 2px 4px rgba(0,0,0,0.1);}}@supports (padding:max(0px)){body{padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);}}']),n=r.Ay.div.withConfig({componentId:"jt-app__sc-3eec28f9-0"})(["max-width:",";margin:0 auto;padding:0 ",";@media (max-width:768px){max-width:100%;padding:0 1rem;box-sizing:border-box;}@media (min-width:","){padding:0 ",";}@media (min-width:","){padding:0 ",";}"],e=>e.$maxWidth||"1280px",e=>e.theme.spacing.md,e=>e.theme.breakpoints.sm,e=>e.theme.spacing.lg,e=>e.theme.breakpoints.lg,e=>e.theme.spacing.xl),a=r.Ay.div.withConfig({componentId:"jt-app__sc-3eec28f9-1"})(["background:",";border-radius:",";box-shadow:",";padding:",";border:1px solid ",";transition:",";&:hover{box-shadow:",";}"],e=>e.theme.colors.surface,e=>e.theme.borderRadius[e.$borderRadius||"xl"],e=>e.theme.shadows[e.$shadow||"soft"],e=>e.$padding||e.theme.spacing.lg,e=>e.theme.colors.border.light,e=>e.theme.transitions.normal,e=>e.theme.shadows.medium),d=r.Ay.button.withConfig({componentId:"jt-app__sc-3eec28f9-2"})(["display:inline-flex;align-items:center;justify-content:center;font-weight:",";border-radius:",";transition:",";cursor:pointer;text-decoration:none;border:none;width:",";"," "," &:disabled{opacity:0.5;cursor:not-allowed;pointer-events:none;}"],e=>e.theme.typography.fontWeight.medium,e=>e.theme.borderRadius.lg,e=>e.theme.transitions.normal,e=>e.$fullWidth?"100%":"auto",e=>{switch(e.$size){case"sm":return"\n          padding: ".concat(e.theme.spacing.sm," ").concat(e.theme.spacing.md,";\n          font-size: ").concat(e.theme.typography.fontSize.sm,";\n        ");case"lg":return"\n          padding: ".concat(e.theme.spacing.lg," ").concat(e.theme.spacing.xl,";\n          font-size: ").concat(e.theme.typography.fontSize.lg,";\n        ");default:return"\n          padding: ".concat(e.theme.spacing.md," ").concat(e.theme.spacing.lg,";\n          font-size: ").concat(e.theme.typography.fontSize.base,";\n        ")}},e=>{switch(e.$variant){case"primary":return"\n          background: ".concat(e.theme.colors.primary[500],";\n          color: ").concat(e.theme.colors.text.inverse,";\n          box-shadow: ").concat(e.theme.shadows.soft,";\n\n          &:hover {\n            background: ").concat(e.theme.colors.primary[600],";\n            box-shadow: ").concat(e.theme.shadows.medium,";\n          }\n\n          &:active {\n            background: ").concat(e.theme.colors.primary[700],";\n          }\n        ");case"secondary":return"\n          background: ".concat(e.theme.colors.secondary[100],";\n          color: ").concat(e.theme.colors.text.primary,";\n\n          &:hover {\n            background: ").concat(e.theme.colors.secondary[200],";\n          }\n\n          &:active {\n            background: ").concat(e.theme.colors.secondary[300],";\n          }\n        ");case"outline":return"\n          background: transparent;\n          color: ".concat(e.theme.colors.primary[600],";\n          border: 1px solid ").concat(e.theme.colors.primary[300],";\n\n          &:hover {\n            background: ").concat(e.theme.colors.primary[50],";\n            border-color: ").concat(e.theme.colors.primary[400],";\n          }\n        ");case"ghost":return"\n          background: transparent;\n          color: ".concat(e.theme.colors.text.primary,";\n\n          &:hover {\n            background: ").concat(e.theme.colors.secondary[100],";\n          }\n        ");default:return"\n          background: ".concat(e.theme.colors.primary[500],";\n          color: ").concat(e.theme.colors.text.inverse,";\n          box-shadow: ").concat(e.theme.shadows.soft,";\n\n          &:hover {\n            background: ").concat(e.theme.colors.primary[600],";\n            box-shadow: ").concat(e.theme.shadows.medium,";\n          }\n        ")}});r.Ay.input.withConfig({componentId:"jt-app__sc-3eec28f9-3"})(["width:100%;padding:",";border:1px solid ",";border-radius:",";font-size:",";background:",";transition:",";&:focus{outline:none;border-color:",";box-shadow:0 0 0 3px ",";}&::placeholder{color:",";}"],e=>e.theme.spacing.md,e=>e.$hasError?e.theme.colors.error:e.theme.colors.border.medium,e=>e.theme.borderRadius.md,e=>e.theme.typography.fontSize.base,e=>e.theme.colors.surface,e=>e.theme.transitions.normal,e=>e.theme.colors.primary[500],e=>e.theme.colors.primary[100],e=>e.theme.colors.text.muted),r.Ay.label.withConfig({componentId:"jt-app__sc-3eec28f9-4"})(["display:block;font-weight:",";color:",";margin-bottom:",";font-size:",";"],e=>e.theme.typography.fontWeight.medium,e=>e.theme.colors.text.primary,e=>e.theme.spacing.sm,e=>e.theme.typography.fontSize.sm);let s=r.Ay.h1.withConfig({componentId:"jt-app__sc-3eec28f9-5"})(["font-size:",";font-weight:",";color:",";margin-bottom:",";line-height:",";"],e=>e.theme.typography.fontSize[e.$size||"2xl"],e=>e.theme.typography.fontWeight[e.$weight||"bold"],e=>e.$color||e.theme.colors.text.primary,e=>e.$mb||e.theme.spacing.md,e=>e.theme.typography.lineHeight.tight),c=r.Ay.p.withConfig({componentId:"jt-app__sc-3eec28f9-6"})(["font-size:",";font-weight:",";color:",";margin-bottom:",";line-height:",";"],e=>e.theme.typography.fontSize[e.$size||"base"],e=>e.theme.typography.fontWeight[e.$weight||"normal"],e=>e.$color||e.theme.colors.text.secondary,e=>e.$mb||"0",e=>e.theme.typography.lineHeight.normal),l=r.Ay.div.withConfig({componentId:"jt-app__sc-3eec28f9-7"})(["display:flex;flex-direction:",";align-items:",";justify-content:",";gap:",";flex-wrap:",";@media (max-width:768px){flex-direction:column;align-items:stretch;gap:1rem;}"],e=>e.$direction||"row",e=>e.$align||"stretch",e=>e.$justify||"flex-start",e=>e.$gap||"0",e=>e.$wrap?"wrap":"nowrap"),m=r.Ay.div.withConfig({componentId:"jt-app__sc-3eec28f9-8"})(["display:grid;grid-template-columns:",";gap:",";@media (max-width:768px){grid-template-columns:1fr;gap:1rem;}"],e=>e.$minWidth?"repeat(auto-fit, minmax(".concat(e.$minWidth,", 1fr))"):"repeat(".concat(e.$columns||1,", 1fr)"),e=>e.$gap||e.theme.spacing.md)},40294:(e,t,o)=>{o.d(t,{kt:()=>m,lV:()=>p,p8:()=>h});var r=o(95155);o(12115);var i=o(50625);let n=(0,i.i7)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),a=i.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-0"})(["animation:"," 1s linear infinite;"," ",""],n,e=>{let{$size:t}=e;switch(t){case"sm":return"width: 1rem; height: 1rem;";case"lg":return"width: 2rem; height: 2rem;";default:return"width: 1.5rem; height: 1.5rem;"}},e=>{let{$color:t,theme:o}=e;switch(t){case"white":return"color: white;";case"gray":return"color: ".concat(o.colors.secondary[600],";");default:return"color: ".concat(o.colors.primary[600],";")}}),d=i.Ay.button.withConfig({componentId:"jt-app__sc-50765fb0-1"})(["display:flex;align-items:center;justify-content:center;gap:0.5rem;&:disabled{opacity:0.5;cursor:not-allowed;}"]),s=i.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-2"})(["position:relative;"]),c=i.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-3"})(["position:absolute;inset:0;background:rgba(255,255,255,0.75);display:flex;align-items:center;justify-content:center;z-index:10;border-radius:",";"],e=>{let{theme:t}=e;return t.borderRadius.lg}),l=i.Ay.div.withConfig({componentId:"jt-app__sc-50765fb0-4"})(["text-align:center;p{margin-top:0.5rem;font-size:",";color:",";}"],e=>{let{theme:t}=e;return t.typography.fontSize.sm},e=>{let{theme:t}=e;return t.colors.text.secondary}),m=e=>{let{size:t="md",color:o="orange",className:i=""}=e;return(0,r.jsx)(a,{$size:t,$color:o,className:i,children:(0,r.jsxs)("svg",{width:"100%",height:"100%",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{style:{opacity:.25},cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{style:{opacity:.75},fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},p=e=>{let{isLoading:t,children:o,onClick:i,type:n="button",className:a="",disabled:s=!1}=e;return(0,r.jsxs)(d,{type:n,onClick:i,disabled:t||s,className:a,children:[t&&(0,r.jsx)(m,{size:"sm",color:"white"}),(0,r.jsx)("span",{children:o})]})},h=e=>{let{isLoading:t,message:o="Loading...",children:i}=e;return(0,r.jsxs)(s,{children:[i,t&&(0,r.jsx)(c,{children:(0,r.jsxs)(l,{children:[(0,r.jsx)(m,{size:"lg"}),(0,r.jsx)("p",{children:o})]})})]})}},47921:(e,t,o)=>{o.d(t,{CP:()=>l,Tk:()=>s,Z2:()=>d,cV:()=>c});var r=o(95155),i=o(58347),n=o(12115);let a=(0,n.createContext)({hasNextAuth:!0}),d=()=>(0,n.useContext)(a);function s(){try{let{hasNextAuth:e}=d();if(!e)return{data:null,status:"unauthenticated"};return(0,i.wV)()}catch(e){return{data:null,status:"loading"}}}function c(){let{hasNextAuth:e}=d();return async t=>{if(e)return(0,i.signOut)(t);localStorage.removeItem("mobile-auth-session"),localStorage.removeItem("mobile-auth-user"),window.location.href="/mobile/login"}}function l(e){let{children:t}=e,[o,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),o=await fetch("/api/auth/session",{method:"GET",headers:{Accept:"application/json"},signal:e.signal});clearTimeout(t);let r=o.headers.get("content-type");if(o.ok&&(null==r?void 0:r.includes("application/json")))try{await o.json(),d(!0)}catch(e){d(!1)}else d(!1)}catch(e){d(!1)}})()},[]),(0,r.jsx)(a.Provider,{value:{hasNextAuth:o},children:o?(0,r.jsx)(i.CP,{children:t}):(0,r.jsx)(r.Fragment,{children:t})})}},55993:(e,t,o)=>{o.d(t,{A:()=>ea});var r=o(95155),i=o(12115),n=o(50625),a=o(40294),d=o(21554),s=o(86651),c=o(39347),l=o(26983),m=o(8198),p=o(6191),h=o(83361),f=o(39903);let u=(0,n.Ay)(d.Zp).withConfig({componentId:"jt-app__sc-1fda0d7d-0"})(["background:white;border:1px solid #e7e5e4;margin-bottom:1.5rem;"]),g=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-1"})(["padding:1.5rem 1.5rem 0 1.5rem;border-bottom:1px solid #f5f5f4;"]),b=n.Ay.h3.withConfig({componentId:"jt-app__sc-1fda0d7d-2"})(["font-size:1.125rem;font-weight:600;color:#1c1917;margin:0 0 1rem 0;"]),y=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-3"})(["position:relative;margin-bottom:1rem;"]),x=(0,n.Ay)(s.A).withConfig({componentId:"jt-app__sc-1fda0d7d-4"})(["position:absolute;left:0.75rem;top:50%;transform:translateY(-50%);color:#a8a29e;width:16px;height:16px;"]),w=n.Ay.input.withConfig({componentId:"jt-app__sc-1fda0d7d-5"})(["width:100%;padding:0.5rem 0.75rem 0.5rem 2.5rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;transition:all 0.2s ease;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}&::placeholder{color:#a8a29e;}"]),v=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-6"})(["display:flex;gap:0.5rem;margin-bottom:1.5rem;overflow-x:auto;padding-bottom:0.5rem;&::-webkit-scrollbar{height:4px;}&::-webkit-scrollbar-track{background:#f5f5f4;border-radius:2px;}&::-webkit-scrollbar-thumb{background:#d6d3d1;border-radius:2px;}"]),j=n.Ay.button.withConfig({componentId:"jt-app__sc-1fda0d7d-7"})(["display:flex;align-items:center;gap:0.5rem;padding:0.5rem 1rem;border:1px solid ",";border-radius:9999px;background:",";color:",";font-size:0.875rem;font-weight:500;cursor:pointer;transition:all 0.2s ease;white-space:nowrap;&:hover{border-color:#ed7734;background:#ed773410;}"],e=>e.$active?"#ed7734":"#d6d3d1",e=>e.$active?"#ed773410":"white",e=>e.$active?"#ed7734":"#57534e"),_=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-8"})(["padding:0 1.5rem 1.5rem 1.5rem;max-height:400px;overflow-y:auto;&::-webkit-scrollbar{width:6px;}&::-webkit-scrollbar-track{background:#f5f5f4;border-radius:3px;}&::-webkit-scrollbar-thumb{background:#d6d3d1;border-radius:3px;}"]),C=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-9"})(["display:grid;grid-template-columns:1fr;gap:0.75rem;@media (min-width:768px){grid-template-columns:repeat(2,1fr);}@media (min-width:1024px){grid-template-columns:repeat(3,1fr);}"]),I=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-10"})(["border:1px solid ",";border-radius:0.5rem;padding:1rem;cursor:pointer;transition:all 0.2s ease;background:",";position:relative;&:hover{border-color:#ed7734;box-shadow:0 2px 8px rgba(0,0,0,0.1);}"],e=>e.selected?"#ed7734":"#e7e5e4",e=>e.selected?"#ed773405":"white"),k=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-11"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:0.5rem;"]),A=n.Ay.h4.withConfig({componentId:"jt-app__sc-1fda0d7d-12"})(["font-size:0.875rem;font-weight:600;color:#1c1917;margin:0;line-height:1.25;"]),z=n.Ay.span.withConfig({componentId:"jt-app__sc-1fda0d7d-13"})(["font-size:0.875rem;font-weight:600;color:#ed7734;"]),S=n.Ay.p.withConfig({componentId:"jt-app__sc-1fda0d7d-14"})(["font-size:0.75rem;color:#78716c;margin:0 0 0.75rem 0;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;"]),E=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-15"})(["display:flex;align-items:center;justify-content:space-between;gap:0.5rem;"]),$=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-16"})(["display:flex;align-items:center;gap:0.5rem;"]),P=n.Ay.span.withConfig({componentId:"jt-app__sc-1fda0d7d-17"})(["display:flex;align-items:center;gap:0.25rem;font-size:0.75rem;color:#78716c;"]),T=n.Ay.span.withConfig({componentId:"jt-app__sc-1fda0d7d-18"})(["position:absolute;top:-0.5rem;right:-0.5rem;background:#ed7734;color:white;border-radius:9999px;padding:0.25rem;font-size:0.75rem;display:flex;align-items:center;justify-content:center;"]),L=(0,n.Ay)(d.$n).withConfig({componentId:"jt-app__sc-1fda0d7d-19"})(["position:absolute;bottom:1rem;right:1rem;width:2rem;height:2rem;padding:0;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#ed7734;border:none;opacity:0;transition:opacity 0.2s ease;",":hover &{opacity:1;}svg{width:1rem;height:1rem;}"],I),N=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-20"})(["text-align:center;padding:2rem;color:#78716c;"]),D=n.Ay.div.withConfig({componentId:"jt-app__sc-1fda0d7d-21"})(["display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;background:#f5f5f4;border-top:1px solid #e7e5e4;font-size:0.875rem;color:#44403c;"]),R=n.Ay.span.withConfig({componentId:"jt-app__sc-1fda0d7d-22"})(["font-weight:500;"]),q=n.Ay.button.withConfig({componentId:"jt-app__sc-1fda0d7d-23"})(["color:#ed7734;background:none;border:none;font-size:0.875rem;font-weight:500;cursor:pointer;&:hover{text-decoration:underline;}"]),M=e=>{let{selectedItems:t,onItemSelect:o,onItemRemove:n,onClearAll:a,businessId:d,includePresets:s=!0}=e,[M,F]=(0,i.useState)("popular"),[V,O]=(0,i.useState)(""),[U,B]=(0,i.useState)(h.IT),[W,Y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(d){Y(!0);try{let e=await f.DynamoDBService.getMenuItems(d),t=(0,h.J4)(e,s);B(t)}catch(e){console.error("Error loading menu items:",e),B(h.IT)}finally{Y(!1)}}else B(h.IT)})()},[d,s]);let Q=(0,i.useMemo)(()=>{let e=U.filter(e=>!e.availability||!1!==e.availability.isAvailable);return V.trim()?(0,h.s5)(e,V):"popular"===M?(0,h.N)(e):(0,h.$Y)(e,M)},[M,V,U]),X=e=>t.some(t=>t.id===e),G=t.reduce((e,t)=>e+t.quantity,0),H=t.reduce((e,t)=>e+t.price*t.quantity,0),Z=[{id:"popular",name:"Popular",icon:"⭐"},...h.Oz];return W?(0,r.jsx)(u,{children:(0,r.jsx)(g,{children:(0,r.jsx)(b,{children:"Loading menu items..."})})}):(0,r.jsxs)(u,{children:[(0,r.jsxs)(g,{children:[(0,r.jsx)(b,{children:"Select Food Items"}),(0,r.jsxs)(y,{children:[(0,r.jsx)(x,{}),(0,r.jsx)(w,{type:"text",placeholder:"Search for dishes...",value:V,onChange:e=>O(e.target.value)})]}),(0,r.jsx)(v,{children:Z.map(e=>(0,r.jsxs)(j,{$active:M===e.id,onClick:()=>{F(e.id),O("")},children:[(0,r.jsx)("span",{children:e.icon}),e.name]},e.id))})]}),(0,r.jsx)(_,{children:0===Q.length?(0,r.jsx)(N,{children:V?'No items found for "'.concat(V,'"'):"No items available in this category"}):(0,r.jsx)(C,{children:Q.map(e=>(0,r.jsxs)(I,{selected:X(e.id),onClick:()=>o(e),children:[e.popular&&(0,r.jsx)(T,{children:(0,r.jsx)(c.A,{size:12})}),(0,r.jsxs)(k,{children:[(0,r.jsx)(A,{children:e.name}),(0,r.jsx)(z,{children:(0,h.$g)(e.price)})]}),(0,r.jsx)(S,{children:e.description}),(0,r.jsx)(E,{children:(0,r.jsxs)($,{children:[e.preparationTime&&(0,r.jsxs)(P,{children:[(0,r.jsx)(l.A,{size:12}),e.preparationTime,"m"]}),e.spiceLevel&&(0,r.jsxs)(P,{children:[(0,r.jsx)(m.A,{size:12}),(0,h.z_)(e.spiceLevel)]})]})}),X(e.id)&&(0,r.jsx)(L,{onClick:t=>{t.stopPropagation(),n(e.id)},children:(0,r.jsx)(p.A,{style:{transform:"rotate(45deg)"}})})]},e.id))})}),G>0&&(0,r.jsxs)(D,{children:[(0,r.jsxs)(R,{children:[G," item",1!==G?"s":""," selected • ",(0,h.$g)(H)]}),(0,r.jsx)(q,{onClick:a,children:"Clear All"})]})]})};var F=o(96259),V=o(14606);let O=(0,n.Ay)(d.Zp).withConfig({componentId:"jt-app__sc-db33f0e-0"})(["background:white;padding:1.5rem;border:1px solid #e7e5e4;"]),U=n.Ay.form.withConfig({componentId:"jt-app__sc-db33f0e-1"})(["display:flex;flex-direction:column;gap:1.5rem;"]),B=(0,n.Ay)(d.xA).withConfig({componentId:"jt-app__sc-db33f0e-2"})(["grid-template-columns:1fr;gap:1.5rem;@media (min-width:768px){grid-template-columns:repeat(2,1fr);}"]),W=n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-3"})(["display:flex;flex-direction:column;"]),Y=n.Ay.label.withConfig({componentId:"jt-app__sc-db33f0e-4"})(["font-size:0.875rem;font-weight:500;color:#44403c;margin-bottom:0.5rem;"]),Q=n.Ay.input.withConfig({componentId:"jt-app__sc-db33f0e-5"})(["width:100%;padding:0.75rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;transition:all 0.2s ease;background:",";color:",";&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}&::placeholder{color:#a8a29e;}"],e=>e.disabled?"#f5f5f4":"white",e=>e.disabled?"#a8a29e":"#1c1917"),X=n.Ay.textarea.withConfig({componentId:"jt-app__sc-db33f0e-6"})(["width:100%;padding:0.75rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;transition:all 0.2s ease;background:",";color:",";resize:vertical;min-height:80px;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}&::placeholder{color:#a8a29e;}"],e=>e.disabled?"#f5f5f4":"white",e=>e.disabled?"#a8a29e":"#1c1917"),G=n.Ay.select.withConfig({componentId:"jt-app__sc-db33f0e-7"})(["width:100%;padding:0.75rem;border:1px solid #d6d3d1;border-radius:0.5rem;font-size:0.875rem;transition:all 0.2s ease;background:white;color:#1c1917;cursor:pointer;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),H=n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-8"})(["margin-bottom:1.5rem;"]),Z=(0,n.Ay)(a.lV).withConfig({componentId:"jt-app__sc-db33f0e-9"})(["width:100%;padding:0.75rem 1.5rem;background:linear-gradient(135deg,#ed7734 0%,#de5d20 100%);color:white;border:none;border-radius:0.5rem;font-weight:500;transition:all 0.2s ease;cursor:pointer;&:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px rgba(237,119,52,0.3);}&:disabled{opacity:0.7;cursor:not-allowed;transform:none;}"]),K=n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-10"})(["display:flex;border:1px solid #d6d3d1;border-radius:0.5rem;overflow:hidden;margin-bottom:1.5rem;"]),J=n.Ay.button.withConfig({componentId:"jt-app__sc-db33f0e-11"})(["flex:1;padding:0.75rem 1rem;border:none;background:",";color:",";font-weight:500;cursor:pointer;transition:all 0.2s ease;&:hover{background:",";}"],e=>e.$active?"#ed7734":"white",e=>e.$active?"white":"#57534e",e=>e.$active?"#de5d20":"#f5f5f4"),ee=n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-12"})(["background:#f5f5f4;border:1px solid #e7e5e4;border-radius:0.5rem;padding:1rem;margin-bottom:1.5rem;"]),et=n.Ay.h4.withConfig({componentId:"jt-app__sc-db33f0e-13"})(["font-size:0.875rem;font-weight:600;color:#44403c;margin:0 0 0.75rem 0;"]);n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-14"})(["background:",";border:1px solid ",";border-radius:0.5rem;padding:1rem;margin-bottom:1.5rem;display:flex;align-items:center;gap:0.75rem;"],e=>{switch(e.$status){case"verified":return"#dcfce7";case"pending":return"#fef3c7";case"failed":return"#fee2e2";default:return"#f3f4f6"}},e=>{switch(e.$status){case"verified":return"#16a34a";case"pending":return"#f59e0b";case"failed":return"#dc2626";default:return"#6b7280"}}),n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-15"})(["font-size:1.25rem;&::before{content:",";}"],e=>{switch(e.$status){case"verified":return'"✅"';case"pending":return'"⏳"';case"failed":return'"❌"';case"loading":return'"⏺️"';default:return'"❓"'}}),n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-16"})(["flex:1;.title{font-weight:600;margin-bottom:0.25rem;color:#1f2937;}.details{font-size:0.875rem;color:#6b7280;margin:0;}"]);let eo=n.Ay.div.withConfig({componentId:"jt-app__sc-db33f0e-17"})(["display:flex;justify-content:space-between;align-items:center;padding:0.5rem 0;border-bottom:1px solid #e7e5e4;&:last-child{border-bottom:none;font-weight:600;color:#1c1917;}"]),er=n.Ay.span.withConfig({componentId:"jt-app__sc-db33f0e-18"})(["font-size:0.875rem;color:#44403c;"]),ei=n.Ay.span.withConfig({componentId:"jt-app__sc-db33f0e-19"})(["font-size:0.875rem;color:#57534e;font-weight:500;"]);async function en(){try{let e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip||"unknown"}catch(e){return console.error("Failed to get IP address:",e),"unknown"}}let ea=e=>{let{onOrderCreated:t,qrCodeId:o,businessId:n,userSession:a}=e,[d,s]=(0,i.useState)(""),[c,l]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[u,g]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1),[x,w]=(0,i.useState)("preset"),[v,j]=(0,i.useState)([]),[_,C]=(0,i.useState)([]),[I,k]=(0,i.useState)("");(0,i.useEffect)(()=>{(null==a?void 0:a.user)&&(a.user.name&&!c&&l(a.user.name),a.user.email&&!m&&p(a.user.email))},[a]),(0,i.useEffect)(()=>{if("preset"===x&&v.length>0){let e=v.map(e=>"".concat(e.quantity,"x ").concat(e.name," - ").concat((0,h.$g)(e.price*e.quantity))).join("\n"),t=v.reduce((e,t)=>e+t.price*t.quantity,0);g("".concat(e,"\n\nTotal: ").concat((0,h.$g)(t)))}},[v,x]),(0,i.useEffect)(()=>{(async()=>{if(n)try{let e=await f.DynamoDBService.getLocationsByBusinessId(n);if(C(e),o&&e.length>0){let t=e.find(e=>e.qrCodes.primary===o||e.qrCodes.backup===o);t&&k(t.id)}}catch(e){console.error("Failed to load locations:",e)}})()},[n,o]);let A=async e=>{if(e.preventDefault(),!d.trim())return void(0,V.Qg)("Please enter an order number to continue.");if("preset"===x&&0===v.length)return void(0,V.Qg)("Please select at least one food item or switch to custom order.");if("custom"===x&&!u.trim())return void(0,V.Qg)("Please enter order details or select preset items.");y(!0);try{if(_.length>0&&!I){(0,V.Qg)("Please select a location for this order."),y(!1);return}let e=_.find(e=>e.id===I),r=I||"default",i=(null==e?void 0:e.businessId)||n||"default",a=(null==e?void 0:e.name)||"Default Location",h={id:Date.now().toString(),orderNumber:d.trim(),customerName:c.trim(),customerEmail:m.trim(),orderDetails:u.trim(),status:"pending",createdAt:new Date,location:{locationId:r,locationName:a,businessId:i,qrCodeId:o,verificationStatus:"manual",ipAddress:await en(),deviceInfo:F.E.getDeviceFingerprint()}};I&&e&&await f.DynamoDBService.updateLocationUsage(I,1);let b=await f.DynamoDBService.createOrder(h);t(b),(0,V.Te)("Order #".concat(d," created successfully!")),s(""),l(""),p(""),g(""),j([]),w("preset")}catch(e){(0,V.Qg)("Failed to create order. Please try again or contact support.")}finally{y(!1)}},z=v.reduce((e,t)=>e+t.price*t.quantity,0);return(0,r.jsxs)(O,{children:[(0,r.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"bold",marginBottom:"1.5rem",color:"#1c1917",margin:0},children:"Create New Order Tracker"}),(0,r.jsxs)(K,{children:[(0,r.jsx)(J,{type:"button",$active:"preset"===x,onClick:()=>w("preset"),children:"\uD83C\uDF7D️ Select from Menu"}),(0,r.jsx)(J,{type:"button",$active:"custom"===x,onClick:()=>w("custom"),children:"✏️ Custom Order"})]}),_.length>0&&(0,r.jsxs)(H,{children:[(0,r.jsx)(Y,{htmlFor:"location",children:"Location *"}),(0,r.jsxs)(G,{id:"location",value:I,onChange:e=>k(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select a location"}),_.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," - ",e.address.city,", ",e.address.state]},e.id))]})]}),"preset"===x&&(0,r.jsx)(M,{selectedItems:v,onItemSelect:e=>{v.find(t=>t.id===e.id)?j(t=>t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):j(t=>[...t,{...e,quantity:1}])},onItemRemove:e=>{let t=v.find(t=>t.id===e);t&&t.quantity>1?j(t=>t.map(t=>t.id===e?{...t,quantity:t.quantity-1}:t)):j(t=>t.filter(t=>t.id!==e))},onClearAll:()=>{j([])},businessId:n,includePresets:!0}),"preset"===x&&v.length>0&&(0,r.jsxs)(ee,{children:[(0,r.jsx)(et,{children:"Order Summary"}),v.map(e=>(0,r.jsxs)(eo,{children:[(0,r.jsxs)(er,{children:[e.quantity,"x ",e.name]}),(0,r.jsx)(ei,{children:(0,h.$g)(e.price*e.quantity)})]},e.id)),(0,r.jsxs)(eo,{children:[(0,r.jsx)(er,{children:"Total"}),(0,r.jsx)(ei,{children:(0,h.$g)(z)})]})]}),(0,r.jsxs)(U,{onSubmit:A,children:[(0,r.jsxs)(B,{children:[(0,r.jsxs)(W,{children:[(0,r.jsx)(Y,{htmlFor:"orderNumber",children:"Order Number *"}),(0,r.jsx)(Q,{type:"text",id:"orderNumber",value:d,onChange:e=>s(e.target.value),placeholder:"Enter order number",required:!0,"aria-describedby":"orderNumber-error",disabled:b})]}),(0,r.jsxs)(W,{children:[(0,r.jsx)(Y,{htmlFor:"customerName",children:"Customer Name"}),(0,r.jsx)(Q,{type:"text",id:"customerName",value:c,onChange:e=>l(e.target.value),placeholder:"Enter customer name",disabled:b})]})]}),(0,r.jsxs)(B,{children:[(0,r.jsxs)(W,{children:[(0,r.jsx)(Y,{htmlFor:"customerEmail",children:"Customer Email"}),(0,r.jsx)(Q,{type:"email",id:"customerEmail",value:m,onChange:e=>p(e.target.value),placeholder:"Enter customer email",disabled:b})]}),(0,r.jsxs)(W,{children:[(0,r.jsxs)(Y,{htmlFor:"orderDetails",children:["Order Details ","custom"===x&&"*"]}),(0,r.jsx)(X,{id:"orderDetails",value:u,onChange:e=>g(e.target.value),placeholder:"preset"===x?"Order details will be auto-generated from selected items":"Enter custom order details",rows:3,disabled:b||"preset"===x})]})]}),(0,r.jsx)(Z,{type:"submit",isLoading:b,children:b?"Creating Order...":"✨ Create Order"})]})]})}},96259:(e,t,o)=>{o.d(t,{E:()=>i});var r=o(95704);class i{static async getCurrentLocation(){return new Promise(e=>{if(!navigator.geolocation){console.warn("Geolocation is not supported by this browser"),e(null);return}navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy})},t=>{console.error("Error getting location:",t),e(null)},{enableHighAccuracy:!0,timeout:this.GEOLOCATION_TIMEOUT,maximumAge:6e4})})}static calculateDistance(e,t,o,r){let i=this.toRadians(o-e),n=this.toRadians(r-t),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(o))*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371e3}static toRadians(e){return Math.PI/180*e}static async verifyLocationFromGPS(e,t){try{let o=null,r=1/0;for(let i of t){if(!i.billing.isActive)continue;let t=this.calculateDistance(e.latitude,e.longitude,i.coordinates.latitude,i.coordinates.longitude);t<r&&(r=t,o=i)}if(!o)return{isValid:!1,error:"No active locations found",method:"gps",coordinates:e};if(r<=this.MAX_DISTANCE_METERS)return{isValid:!0,locationId:o.id,businessId:o.businessId,distance:Math.round(r),method:"gps",coordinates:e};return{isValid:!1,locationId:o.id,businessId:o.businessId,distance:Math.round(r),error:"Location verification failed. You are ".concat(Math.round(r),"m away from ").concat(o.name,". Please be within ").concat(this.MAX_DISTANCE_METERS,"m to place an order."),method:"gps",coordinates:e}}catch(t){return console.error("Error verifying location:",t),{isValid:!1,error:"Failed to verify location",method:"gps",coordinates:e}}}static async verifyLocationFromQRCode(e,t){try{let o=t.find(t=>t.billing.isActive&&(t.qrCodes.primary===e||t.qrCodes.backup===e));if(o)return{isValid:!0,locationId:o.id,businessId:o.businessId,method:"qr_code"};return{isValid:!1,error:"Invalid QR code or location not active",method:"qr_code"}}catch(e){return console.error("Error verifying QR code location:",e),{isValid:!1,error:"Failed to verify QR code location",method:"qr_code"}}}static async verifyLocationFromIP(){try{let e=r.env.NEXT_PUBLIC_IPSTACK_API_KEY;if(e)try{let t=await fetch("https://api.ipify.org?format=json"),o=(await t.json()).ip,r=await fetch("http://api.ipstack.com/".concat(o,"?access_key=").concat(e));if(r.ok){let e=await r.json();if(e.latitude&&e.longitude)return{isValid:!0,method:"ip_address",coordinates:{latitude:e.latitude,longitude:e.longitude},metadata:{city:e.city,country:e.country_name,region:e.region_name}}}}catch(e){console.error("IPStack API error:",e)}console.warn("Using fallback IP geolocation - add NEXT_PUBLIC_IPSTACK_API_KEY for production");return{isValid:!0,method:"ip_address",coordinates:{latitude:40.7128,longitude:-74.006},metadata:{city:"New York",country:"US",fallback:!0}}}catch(e){return console.error("Error getting IP location:",e),{isValid:!1,error:"Failed to determine location from IP",method:"ip_address"}}}static async verifyLocationForOrder(e,t){try{if(e&&t){let o=await this.verifyLocationFromQRCode(e,t);if(o.isValid)return o}if(t){let e=await this.getCurrentLocation();if(e){let o=await this.verifyLocationFromGPS(e,t);return o.isValid,o}}return{...await this.verifyLocationFromIP(),isValid:!1,error:"Please enable location services or scan a valid QR code to place an order"}}catch(e){return console.error("Comprehensive location verification failed:",e),{isValid:!1,error:"Unable to verify your location. Please try again.",method:"manual"}}}static getDeviceFingerprint(){let e=document.createElement("canvas"),t=e.getContext("2d");t&&(t.textBaseline="top",t.font="14px Arial",t.fillText("Device fingerprint",2,2));let o=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,new Date().getTimezoneOffset(),e.toDataURL()].join("|"),r=0;for(let e=0;e<o.length;e++)r=(r<<5)-r+o.charCodeAt(e),r&=r;return r.toString()}static isLocationVerificationRequired(e){return(null==e?void 0:e.requireLocationVerification)!==!1}}i.MAX_DISTANCE_METERS=100,i.GEOLOCATION_TIMEOUT=1e4},97936:(e,t,o)=>{o.d(t,{j2:()=>d,v7:()=>s,wN:()=>a});var r=o(95704);let i="https://thejerktracker0.vercel.app";function n(e){if(e)return e.replace(/\/$/,"")}function a(){var e,t,o;let a=n("https://thejerktracker0.vercel.app".trim()||(null==(o=r.env.NEXT_PUBLIC_APP_URL)?void 0:o.trim())||(r.env.NEXT_PUBLIC_VERCEL_URL?"https://".concat(r.env.NEXT_PUBLIC_VERCEL_URL):void 0));return a||((null==(e=window.location)?void 0:e.origin)&&null!=(t=n(window.location.origin))?t:i)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=a();if(!e)return t;if(/^https?:\/\//i.test(e))return e;let o=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(o)}function s(e){let t=encodeURIComponent(e);return d("/orders/".concat(t))}}}]);