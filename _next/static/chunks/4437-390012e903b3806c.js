"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4437],{1524:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},26617:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},26921:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},26983:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},50906:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},80534:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},91761:(e,t,i)=>{i.d(t,{A:()=>n});let n=(0,i(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},94437:(e,t,i)=>{i.d(t,{A:()=>G});var n=i(95155),o=i(12115),r=i(50625),a=i(1733),d=i(91761),s=i(1524),c=i(26921),l=i(26617),p=i(50906),h=i(80534),m=i(26983),x=i(39903);let g=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-0"})(["padding:2rem;background:#fafaf9;min-height:100vh;"]),f=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-1"})(["margin-bottom:2rem;"]),j=r.Ay.h1.withConfig({componentId:"jt-app__sc-e23e63c3-2"})(["font-size:2rem;font-weight:700;color:#1c1917;margin:0 0 0.5rem 0;"]),u=r.Ay.p.withConfig({componentId:"jt-app__sc-e23e63c3-3"})(["color:#78716c;font-size:1rem;margin:0;"]),y=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-4"})(["display:flex;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;"]),w=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-5"})(["display:flex;flex-direction:column;gap:0.5rem;"]),v=r.Ay.label.withConfig({componentId:"jt-app__sc-e23e63c3-6"})(["font-size:0.875rem;font-weight:500;color:#44403c;"]),A=r.Ay.select.withConfig({componentId:"jt-app__sc-e23e63c3-7"})(["padding:0.75rem 1rem;border:1px solid #d6d3d1;border-radius:0.5rem;background:white;font-size:0.875rem;color:#1c1917;cursor:pointer;min-width:200px;transition:all 0.2s ease;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),_=r.Ay.input.withConfig({componentId:"jt-app__sc-e23e63c3-8"})(["padding:0.75rem 1rem;border:1px solid #d6d3d1;border-radius:0.5rem;background:white;font-size:0.875rem;color:#1c1917;transition:all 0.2s ease;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 2px #ed773420;}"]),b=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-9"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem;"]),k=(0,r.Ay)(a.P.div).withConfig({componentId:"jt-app__sc-e23e63c3-10"})(["background:white;border-radius:1rem;padding:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid #e7e5e4;"]),C=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-11"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem;"]),I=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-12"})(["width:48px;height:48px;border-radius:0.75rem;background:",";display:flex;align-items:center;justify-content:center;svg{width:24px;height:24px;color:",";}"],e=>"".concat(e.$color,"15"),e=>e.$color),$=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-13"})(["display:flex;align-items:center;gap:0.25rem;padding:0.25rem 0.5rem;border-radius:0.5rem;background:",";color:",";font-size:0.75rem;font-weight:600;svg{width:14px;height:14px;}"],e=>e.$isPositive?"#dcfce7":"#fee2e2",e=>e.$isPositive?"#16a34a":"#dc2626"),M=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-14"})(["font-size:2rem;font-weight:700;color:#1c1917;margin-bottom:0.25rem;"]),D=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-15"})(["font-size:0.875rem;color:#78716c;"]),z=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-16"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:1.5rem;margin-bottom:2rem;@media (max-width:1024px){grid-template-columns:1fr;}"]),F=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-17"})(["background:white;border-radius:1rem;padding:1.5rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid #e7e5e4;"]),L=r.Ay.h3.withConfig({componentId:"jt-app__sc-e23e63c3-18"})(["font-size:1.125rem;font-weight:600;color:#1c1917;margin:0 0 1.5rem 0;display:flex;align-items:center;gap:0.5rem;svg{width:20px;height:20px;color:#ed7734;}"]),P=r.Ay.table.withConfig({componentId:"jt-app__sc-e23e63c3-19"})(["width:100%;border-collapse:collapse;"]),S=r.Ay.th.withConfig({componentId:"jt-app__sc-e23e63c3-20"})(["text-align:left;padding:0.75rem;font-size:0.875rem;font-weight:600;color:#44403c;border-bottom:2px solid #e7e5e4;"]),O=r.Ay.tr.withConfig({componentId:"jt-app__sc-e23e63c3-21"})(["&:hover{background:#fafaf9;}"]),V=r.Ay.td.withConfig({componentId:"jt-app__sc-e23e63c3-22"})(["padding:0.75rem;font-size:0.875rem;color:#1c1917;border-bottom:1px solid #f5f5f4;"]),H=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-23"})(["width:100%;height:8px;background:#f5f5f4;border-radius:4px;overflow:hidden;margin-top:0.5rem;"]),N=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-24"})(["height:100%;width:","%;background:",";border-radius:4px;transition:width 0.3s ease;"],e=>e.$width,e=>e.$color),R=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-25"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:0.5rem;"]),B=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-26"})(["padding:1rem;border-radius:0.5rem;text-align:center;background:",";border:1px solid ",";"],e=>e.$intensity>80?"#fee2e2":e.$intensity>50?"#fed7aa":e.$intensity>20?"#fef3c7":"#f5f5f4",e=>e.$intensity>80?"#fca5a5":e.$intensity>50?"#fdba74":e.$intensity>20?"#fde047":"#e7e5e4"),E=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-27"})(["font-size:0.75rem;font-weight:600;color:#44403c;margin-bottom:0.25rem;"]),T=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-28"})(["font-size:1rem;font-weight:700;color:#1c1917;"]),q=r.Ay.div.withConfig({componentId:"jt-app__sc-e23e63c3-29"})(["text-align:center;padding:3rem;color:#78716c;svg{width:64px;height:64px;margin-bottom:1rem;color:#d6d3d1;}h3{font-size:1.25rem;font-weight:600;color:#44403c;margin:0 0 0.5rem 0;}p{margin:0;}"]);function G(e){let{businessId:t}=e,[i,r]=(0,o.useState)([]),[a,G]=(0,o.useState)([]),[J,K]=(0,o.useState)("all"),[Q,U]=(0,o.useState)("week"),[W,X]=(0,o.useState)(""),[Y,Z]=(0,o.useState)(""),[ee,et]=(0,o.useState)(!0);(0,o.useEffect)(()=>{ei()},[t,J,Q,W,Y]);let ei=async()=>{et(!0);try{let[e,i]=await Promise.all([x.DynamoDBService.getLocationsByBusinessId(t),x.DynamoDBService.getAllOrders()]);r(e);let n=i.filter(e=>{var i;return(null==(i=e.location)?void 0:i.businessId)===t});"all"!==J&&(n=n.filter(e=>{var t;return(null==(t=e.location)?void 0:t.locationId)===J}));let o=new Date,a=new Date;if("today"===Q)a.setHours(0,0,0,0);else if("week"===Q)a.setDate(o.getDate()-7);else if("month"===Q)a.setMonth(o.getMonth()-1);else if("custom"===Q&&W&&Y){a=new Date(W);let e=new Date(Y);n=n.filter(t=>{let i=new Date(t.createdAt);return i>=a&&i<=e})}"custom"!==Q&&(n=n.filter(e=>new Date(e.createdAt)>=a)),G(n)}catch(e){console.error("Error loading analytics:",e)}finally{et(!1)}},en=a.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),eo=a.length,er=eo>0?en/eo:0,ea=a.filter(e=>"delivered"===e.status||"picked_up"===e.status).length,ed=eo>0?ea/eo*100:0,es=.85*eo,ec=eo-es,el=.15*en,ep=i.map(e=>{let t=a.filter(t=>{var i;return(null==(i=t.location)?void 0:i.locationId)===e.id}),i=t.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),n=t.filter(e=>"delivered"===e.status||"picked_up"===e.status).length;return{locationId:e.id,locationName:e.name,totalOrders:t.length,revenue:i,averageOrderValue:t.length>0?i/t.length:0,completionRate:t.length>0?n/t.length*100:0}}),eh=Array.from({length:24},(e,t)=>{let i=a.filter(e=>new Date(e.createdAt).getHours()===t);return{hour:t,orders:i.length}}),em=Math.max(...eh.map(e=>e.orders),1),ex=Math.max(...ep.map(e=>e.revenue),1);return(0,n.jsxs)(g,{children:[(0,n.jsxs)(f,{children:[(0,n.jsx)(j,{children:"Business Intelligence & Analytics"}),(0,n.jsx)(u,{children:"Real-time insights across all your restaurant locations"})]}),(0,n.jsxs)(y,{children:[(0,n.jsxs)(w,{children:[(0,n.jsx)(v,{children:"Location"}),(0,n.jsxs)(A,{value:J,onChange:e=>K(e.target.value),children:[(0,n.jsx)("option",{value:"all",children:"All Locations"}),i.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)(w,{children:[(0,n.jsx)(v,{children:"Time Period"}),(0,n.jsxs)(A,{value:Q,onChange:e=>U(e.target.value),children:[(0,n.jsx)("option",{value:"today",children:"Today"}),(0,n.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,n.jsx)("option",{value:"month",children:"Last 30 Days"}),(0,n.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),"custom"===Q&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w,{children:[(0,n.jsx)(v,{children:"Start Date"}),(0,n.jsx)(_,{type:"date",value:W,onChange:e=>X(e.target.value)})]}),(0,n.jsxs)(w,{children:[(0,n.jsx)(v,{children:"End Date"}),(0,n.jsx)(_,{type:"date",value:Y,onChange:e=>Z(e.target.value)})]})]})]}),!ee&&a.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b,{children:[(0,n.jsxs)(k,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,n.jsxs)(C,{children:[(0,n.jsx)(I,{$color:"#16a34a",children:(0,n.jsx)(d.A,{})}),(0,n.jsxs)($,{$isPositive:el>=0,children:[el>=0?(0,n.jsx)(s.A,{}):(0,n.jsx)(c.A,{}),Math.abs(el).toFixed(0),"%"]})]}),(0,n.jsxs)(M,{children:["$",en.toFixed(2)]}),(0,n.jsx)(D,{children:"Total Revenue"})]}),(0,n.jsxs)(k,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,n.jsxs)(C,{children:[(0,n.jsx)(I,{$color:"#ed7734",children:(0,n.jsx)(l.A,{})}),(0,n.jsxs)($,{$isPositive:ec>=0,children:[ec>=0?(0,n.jsx)(s.A,{}):(0,n.jsx)(c.A,{}),Math.abs(ec).toFixed(0)]})]}),(0,n.jsx)(M,{children:eo}),(0,n.jsx)(D,{children:"Total Orders"})]}),(0,n.jsxs)(k,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,n.jsx)(C,{children:(0,n.jsx)(I,{$color:"#3b82f6",children:(0,n.jsx)(d.A,{})})}),(0,n.jsxs)(M,{children:["$",er.toFixed(2)]}),(0,n.jsx)(D,{children:"Avg Order Value"})]}),(0,n.jsxs)(k,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,n.jsx)(C,{children:(0,n.jsx)(I,{$color:"#8b5cf6",children:(0,n.jsx)(p.A,{})})}),(0,n.jsxs)(M,{children:[ed.toFixed(1),"%"]}),(0,n.jsx)(D,{children:"Completion Rate"})]})]}),(0,n.jsxs)(z,{children:["all"===J&&i.length>1&&(0,n.jsxs)(F,{children:[(0,n.jsxs)(L,{children:[(0,n.jsx)(h.A,{}),"Location Performance"]}),(0,n.jsxs)(P,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)(S,{children:"Location"}),(0,n.jsx)(S,{children:"Orders"}),(0,n.jsx)(S,{children:"Revenue"}),(0,n.jsx)(S,{children:"Avg Order"})]})}),(0,n.jsx)("tbody",{children:ep.sort((e,t)=>t.revenue-e.revenue).map(e=>(0,n.jsxs)(O,{children:[(0,n.jsxs)(V,{children:[(0,n.jsx)("strong",{children:e.locationName}),(0,n.jsx)(H,{children:(0,n.jsx)(N,{$width:e.revenue/ex*100,$color:"#ed7734"})})]}),(0,n.jsx)(V,{children:e.totalOrders}),(0,n.jsxs)(V,{children:["$",e.revenue.toFixed(2)]}),(0,n.jsxs)(V,{children:["$",e.averageOrderValue.toFixed(2)]})]},e.locationId))})]})]}),(0,n.jsxs)(F,{children:[(0,n.jsxs)(L,{children:[(0,n.jsx)(m.A,{}),"Peak Hours Analysis"]}),(0,n.jsx)(R,{children:eh.filter(e=>e.hour>=6&&e.hour<=23).map(e=>(0,n.jsxs)(B,{$intensity:e.orders/em*100,children:[(0,n.jsxs)(E,{children:[e.hour%12||12,e.hour>=12?"PM":"AM"]}),(0,n.jsx)(T,{children:e.orders})]},e.hour))})]})]})]}):ee?(0,n.jsxs)(q,{children:[(0,n.jsx)(p.A,{}),(0,n.jsx)("h3",{children:"Loading Analytics..."})]}):(0,n.jsxs)(q,{children:[(0,n.jsx)(h.A,{}),(0,n.jsx)("h3",{children:"No Data Available"}),(0,n.jsx)("p",{children:"No orders found for the selected filters. Try adjusting your date range or location."})]})]})}}}]);