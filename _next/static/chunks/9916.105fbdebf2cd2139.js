"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9916],{69916:(e,n,a)=>{a.r(n),a.d(n,{CapacitorBarcodeScannerWeb:()=>r});var o=a(32587),t=a(41514),c=a(47972);class r extends o.E_{async stopAndHideScanner(){console.log(window.OSBarcodeWebScanner),window.OSBarcodeWebScanner&&(await window.OSBarcodeWebScanner.stop(),window.OSBarcodeWebScanner=null),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="none"}buildScannerElement(){if(document.getElementById("cap-os-barcode-scanner-container")){document.getElementById("cap-os-barcode-scanner-container").className="scanner-container-display";return}let e=document.body.appendChild(document.createElement("div"));e.id="cap-os-barcode-scanner-container";let n=document.createElement("div");n.id="cap-os-barcode-scanner-container-dialog",n.className="scanner-dialog";let a=document.createElement("div");a.className="scanner-dialog-inner";let o=document.createElement("span");o.className="close-button",o.innerHTML="&times;",a.appendChild(o);let t=document.createElement("p");t.innerHTML="&nbsp;",a.appendChild(t);let c=document.createElement("div");c.className="scanner-container-full-width",c.id="cap-os-barcode-scanner-container-scanner",a.appendChild(c),n.appendChild(a),e.appendChild(n),o.onclick=this.stopAndHideScanner}async scanBarcode(e){return this.buildScannerElement(),document.getElementById("cap-os-barcode-scanner-container-dialog").style.display="block",new Promise((n,a)=>{var o,r;let d={facingMode:1===e.cameraDirection?"environment":"user",hasScannerButton:!1,scanButton:void 0!==e.scanButton&&e.scanButton,showScanLine:!1,scanInstructions:e.scanInstructions?e.scanInstructions:"",orientation:e.scanOrientation?e.scanOrientation:c.UO.PORTRAIT,showCameraSelection:null!=(o=e.web)&&!!o.showCameraSelection&&e.web.showCameraSelection,typeHint:17===e.hint?void 0:e.hint,scannerFPS:(null==(r=e.web)?void 0:r.scannerFPS)?e.web.scannerFPS:50},i=document.getElementById("cap-os-barcode-scanner-container-scanner");if(!i)throw Error("Scanner Element is required for web");window.OSBarcodeWebScanner=new t.j9(i.id,{formatsToSupport:void 0!==d.typeHint?[d.typeHint]:void 0,verbose:void 0});let s={fps:d.scannerFPS,qrbox:i.getBoundingClientRect().width*(9/16)-10,aspectRatio:16/9,videoConstraints:{focusMode:"continuous",height:{min:576,ideal:1920},deviceId:void 0,facingMode:d.facingMode}},l=(e,a)=>{var o,t;this.stopAndHideScanner(),n({ScanResult:e,format:null!=(t=null==(o=a.result.format)?void 0:o.format)?t:c.Gm.ALL})},m=e=>{["NotFoundException","No barcode or QR code detected","No MultiFormat Readers were able to detect the code"].find(n=>-1!==e.indexOf(n))||(this.stopAndHideScanner(),console.error(`[Scanner Web Error] ${e}`),a(e))};window.OSBarcodeWebScanner.start({facingMode:d.facingMode},s,l,m)})}}}}]);