"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2879],{6191:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},12181:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},16485:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},20017:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},23664:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},26497:(e,t,n)=>{n.d(t,{N:()=>j});var r=n(95155),i=n(12115),o=n(60296),a=n(94416),s=n(86553),c=n(59686),l=n(81402),d=n(53127);function p(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class h extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=(0,l.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:n,anchorX:o,root:a}=e,s=(0,i.useId)(),c=(0,i.useRef)(null),l=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,i.useContext)(d.Q),m=function(...e){return i.useCallback(function(...e){return t=>{let n=!1,r=e.map(e=>{let r=p(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?n():p(e[t],null)}}}}(...e),e)}(c,null==t?void 0:t.ref);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:i,right:d}=l.current;if(n||!c.current||!e||!t)return;c.current.dataset.motionPopId=s;let p=document.createElement("style");u&&(p.nonce=u);let h=null!=a?a:document.head;return h.appendChild(p),p.sheet&&p.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(i):"right: ".concat(d),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{h.contains(p)&&h.removeChild(p)}},[n]),(0,r.jsx)(h,{isPresent:n,childRef:c,sizeRef:l,children:i.cloneElement(t,{ref:m})})}let m=e=>{let{children:t,initial:n,isPresent:o,onExitComplete:s,custom:l,presenceAffectsLayout:d,mode:p,anchorX:h,root:m}=e,g=(0,a.M)(f),x=(0,i.useId)(),y=!0,j=(0,i.useMemo)(()=>(y=!1,{id:x,initial:n,isPresent:o,custom:l,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;s&&s()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[o,g,s]);return d&&y&&(j={...j}),(0,i.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[o]),i.useEffect(()=>{o||g.size||!s||s()},[o]),"popLayout"===p&&(t=(0,r.jsx)(u,{isPresent:o,anchorX:h,root:m,children:t})),(0,r.jsx)(c.t.Provider,{value:j,children:t})};function f(){return new Map}var g=n(75601);let x=e=>e.key||"";function y(e){let t=[];return i.Children.forEach(e,e=>{(0,i.isValidElement)(e)&&t.push(e)}),t}let j=e=>{let{children:t,custom:n,initial:c=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:p="sync",propagate:h=!1,anchorX:u="left",root:f}=e,[j,b]=(0,g.xQ)(h),w=(0,i.useMemo)(()=>y(t),[t]),v=h&&!j?[]:w.map(x),A=(0,i.useRef)(!0),k=(0,i.useRef)(w),_=(0,a.M)(()=>new Map),[C,I]=(0,i.useState)(w),[z,M]=(0,i.useState)(w);(0,s.E)(()=>{A.current=!1,k.current=w;for(let e=0;e<z.length;e++){let t=x(z[e]);v.includes(t)?_.delete(t):!0!==_.get(t)&&_.set(t,!1)}},[z,v.length,v.join("-")]);let E=[];if(w!==C){let e=[...w];for(let t=0;t<z.length;t++){let n=z[t],r=x(n);v.includes(r)||(e.splice(t,0,n),E.push(n))}return"wait"===p&&E.length&&(e=E),M(y(e)),I(w),null}let{forceRender:S}=(0,i.useContext)(o.L);return(0,r.jsx)(r.Fragment,{children:z.map(e=>{let t=x(e),i=(!h||!!j)&&(w===z||v.includes(t));return(0,r.jsx)(m,{isPresent:i,initial:(!A.current||!!c)&&void 0,custom:n,presenceAffectsLayout:d,mode:p,root:f,onExitComplete:i?void 0:()=>{if(!_.has(t))return;_.set(t,!0);let e=!0;_.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),M(k.current),h&&(null==b||b()),l&&l())},anchorX:u,children:e},t)})})}},69141:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},80501:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},86651:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},92879:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var r=n(95155),i=n(12115),o=n(50625),a=n(1733),s=n(26497),c=n(20063),l=n(86651),d=n(6191),p=n(20017),h=n(23664),u=n(69141),m=n(16485),f=n(12181),g=n(80501);let x=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-0"})(["padding:0.5rem;min-height:100vh;background:linear-gradient(135deg,#fef7ee 0%,#fafaf9 100%);"]),y=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-1"})(["margin-top:0.5rem;margin-bottom:2rem;text-align:center;"]),j=o.Ay.h1.withConfig({componentId:"jt-app__sc-ad46c8e8-2"})(["font-size:1.5rem;font-weight:700;color:#1f2937;margin:0 0 0.5rem 0;"]),b=o.Ay.p.withConfig({componentId:"jt-app__sc-ad46c8e8-3"})(["font-size:1rem;color:#6b7280;margin:0;"]),w=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-4"})(["margin-bottom:1.5rem;"]),v=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-5"})(["position:relative;margin-bottom:1rem;"]),A=o.Ay.input.withConfig({componentId:"jt-app__sc-ad46c8e8-6"})(["width:100%;padding:0.75rem 1rem 0.75rem 2.5rem;border:1px solid #d1d5db;border-radius:8px;font-size:0.875rem;background:white;&:focus{outline:none;border-color:#ed7734;box-shadow:0 0 0 3px rgba(237,119,52,0.1);}"]),k=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-7"})(["position:absolute;left:0.75rem;top:50%;transform:translateY(-50%);color:#6b7280;"]),_=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-8"})(["display:flex;gap:0.75rem;margin-bottom:1rem;"]),C=o.Ay.button.withConfig({componentId:"jt-app__sc-ad46c8e8-9"})(["padding:0.5rem 0.75rem;border:1px solid ",";background:",";color:",";border-radius:6px;font-size:0.75rem;font-weight:500;cursor:pointer;&:active{transform:scale(0.98);}"],e=>e.active?"#ed7734":"#d1d5db",e=>e.active?"#ed7734":"white",e=>e.active?"white":"#6b7280"),I=(0,o.Ay)(a.P.button).withConfig({componentId:"jt-app__sc-ad46c8e8-10"})(["width:100%;padding:0.75rem;background:#ed7734;color:white;border:none;border-radius:8px;font-size:0.875rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:0.5rem;cursor:pointer;margin-bottom:1.5rem;"]),z=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-11"})(["display:flex;flex-direction:column;gap:0.75rem;"]),M=(0,o.Ay)(a.P.div).withConfig({componentId:"jt-app__sc-ad46c8e8-12"})(["background:white;border-radius:12px;padding:1rem;box-shadow:0 1px 3px rgba(0,0,0,0.1);border:1px solid rgba(237,119,52,0.1);"]),E=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-13"})(["display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:0.75rem;"]),S=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-14"})(["flex:1;"]),L=o.Ay.h3.withConfig({componentId:"jt-app__sc-ad46c8e8-15"})(["font-size:1rem;font-weight:600;color:#1f2937;margin:0 0 0.25rem 0;"]),R=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-16"})(["font-size:0.75rem;font-weight:500;padding:0.25rem 0.5rem;border-radius:4px;display:inline-block;background:",";color:",";text-transform:capitalize;"],e=>{switch(e.role){case"admin":return"rgba(239, 68, 68, 0.1)";case"manager":return"rgba(59, 130, 246, 0.1)";case"driver":return"rgba(16, 185, 129, 0.1)";default:return"rgba(107, 114, 128, 0.1)"}},e=>{switch(e.role){case"admin":return"#dc2626";case"manager":return"#2563eb";case"driver":return"#059669";default:return"#4b5563"}}),P=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-17"})(["position:relative;"]),D=o.Ay.button.withConfig({componentId:"jt-app__sc-ad46c8e8-18"})(["padding:0.5rem;border:none;background:transparent;cursor:pointer;border-radius:4px;color:#6b7280;&:hover{background:rgba(0,0,0,0.05);}&:active{transform:scale(0.95);}"]),N=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-19"})(["display:flex;flex-direction:column;gap:0.5rem;"]),U=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-20"})(["display:flex;align-items:center;gap:0.5rem;font-size:0.875rem;color:#6b7280;"]),T=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-21"})(["font-size:0.75rem;font-weight:500;padding:0.25rem 0.5rem;border-radius:4px;background:",";color:",";text-transform:capitalize;"],e=>"active"===e.status?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",e=>"active"===e.status?"#059669":"#dc2626"),q=o.Ay.div.withConfig({componentId:"jt-app__sc-ad46c8e8-22"})(["display:flex;justify-content:space-between;margin-top:0.75rem;padding-top:0.75rem;border-top:1px solid #f3f4f6;font-size:0.75rem;color:#6b7280;"]);function H(e){let{className:t}=e,n=(0,c.useRouter)(),[o,a]=(0,i.useState)([]),[H,J]=(0,i.useState)(!0),[O,Q]=(0,i.useState)(""),[W,X]=(0,i.useState)("all");(0,i.useEffect)(()=>{B()},[W]);let B=async()=>{try{J(!0);let e=new URLSearchParams;"all"!==W&&e.append("role",W);let t="/api/users".concat(e.toString()?"?"+e.toString():""),n=await fetch(t),r=await n.json();if(r.success&&r.users){let e=r.users.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone||"N/A",role:e.role,status:"active",joinDate:new Date(e.createdAt).toISOString().split("T")[0],lastActive:F(e.updatedAt||e.createdAt),ordersCount:0}));a(e)}}catch(e){console.error("Error fetching users:",e),a([])}finally{J(!1)}},F=e=>{let t=new Date(e),n=new Date().getTime()-t.getTime(),r=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r," minute").concat(r>1?"s":""," ago"):i<24?"".concat(i," hour").concat(i>1?"s":""," ago"):"".concat(o," day").concat(o>1?"s":""," ago")},V=o.filter(e=>e.name.toLowerCase().includes(O.toLowerCase())||e.email.toLowerCase().includes(O.toLowerCase()));return H?(0,r.jsx)(x,{className:t,children:(0,r.jsx)(y,{children:(0,r.jsx)(j,{children:"Loading Users..."})})}):(0,r.jsxs)(x,{className:t,children:[(0,r.jsxs)(y,{children:[(0,r.jsx)(j,{children:"Manage Users"}),(0,r.jsxs)(b,{children:[o.length," total users"]})]}),(0,r.jsxs)(w,{children:[(0,r.jsxs)(v,{children:[(0,r.jsx)(k,{children:(0,r.jsx)(l.A,{size:16})}),(0,r.jsx)(A,{type:"text",placeholder:"Search users...",value:O,onChange:e=>Q(e.target.value)})]}),(0,r.jsx)(_,{children:[{key:"all",label:"All Users"},{key:"admin",label:"Admins"},{key:"manager",label:"Managers"},{key:"driver",label:"Drivers"},{key:"customer",label:"Customers"}].map(e=>(0,r.jsx)(C,{active:W===e.key,onClick:()=>X(e.key),children:e.label},e.key))}),(0,r.jsxs)(I,{whileTap:{scale:.98},onClick:()=>{n.push("/mobile/admin/users/create")},children:[(0,r.jsx)(d.A,{size:16}),"Add New User"]})]}),(0,r.jsx)(z,{children:(0,r.jsx)(s.N,{children:V.map((e,t)=>(0,r.jsxs)(M,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.1*t},children:[(0,r.jsxs)(E,{children:[(0,r.jsxs)(S,{children:[(0,r.jsx)(L,{children:e.name}),(0,r.jsx)(R,{role:e.role,children:e.role})]}),(0,r.jsx)(P,{children:(0,r.jsx)(D,{onClick:()=>n.push("/mobile/admin/users/".concat(e.id,"/edit")),children:(0,r.jsx)(p.A,{size:16})})})]}),(0,r.jsxs)(N,{children:[(0,r.jsxs)(U,{children:[(0,r.jsx)(h.A,{size:14}),e.email]}),(0,r.jsxs)(U,{children:[(0,r.jsx)(u.A,{size:14}),e.phone]}),(0,r.jsxs)(U,{children:[(0,r.jsx)(m.A,{size:14}),"Joined ",new Date(e.joinDate).toLocaleDateString()]}),(0,r.jsxs)(U,{children:["active"===e.status?(0,r.jsx)(f.A,{size:14}):(0,r.jsx)(g.A,{size:14}),(0,r.jsx)(T,{status:e.status,children:e.status}),(0,r.jsxs)("span",{style:{marginLeft:"auto"},children:["Last: ",e.lastActive]})]})]}),(0,r.jsxs)(q,{children:[(0,r.jsxs)("span",{children:["Orders: ",e.ordersCount]}),(0,r.jsxs)("span",{children:["Role: ",e.role]}),(0,r.jsxs)("span",{children:["Status: ",e.status]})]})]},e.id))})}),0===V.length&&(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"2rem",color:"#6b7280"},children:"No users found matching your criteria."})]})}}}]);